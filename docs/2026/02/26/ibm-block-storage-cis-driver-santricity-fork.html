<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>IBM Block Storage CSI driver patched for NetApp E-Series | Acting Technologist</title>
<meta name="description" content="Another CSI driver for NetApp E-Series (SANtricity) systems">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="IBM Block Storage CSI driver patched for NetApp E-Series">
<meta property="og:url" content="https://scaleoutsean.github.io/2026/02/26/ibm-block-storage-cis-driver-santricity-fork.html">


  <meta property="og:description" content="Another CSI driver for NetApp E-Series (SANtricity) systems">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="IBM Block Storage CSI driver patched for NetApp E-Series">
  <meta name="twitter:description" content="Another CSI driver for NetApp E-Series (SANtricity) systems">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2026/02/26/ibm-block-storage-cis-driver-santricity-fork.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2026-02-26T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2026/02/26/ibm-block-storage-cis-driver-santricity-fork.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="IBM Block Storage CSI driver patched for NetApp E-Series">
    <meta itemprop="description" content="Unofficial patch to IBM Block CSI driver for E-Series SANtricity storage">
    <meta itemprop="datePublished" content="2026-02-26T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2026/02/26/ibm-block-storage-cis-driver-santricity-fork.html" itemprop="url">IBM Block Storage CSI driver patched for NetApp E-Series
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-26T00:00:00+08:00">2026-02-26 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          10 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#what-is-ibm-block-driver-csi-patched-for-e-series-santricity">What is IBM Block Driver CSI (patched for E-Series SANtricity)</a></li><li><a href="#why">Why?</a></li><li><a href="#whats-not-implemented">What's not implemented</a></li><li><a href="#how-to-use-it">How to use it</a><ul><li><a href="#configuration-and-deployment">Configuration and deployment</a><ul><li><a href="#checks">Checks</a></li></ul></li><li><a href="#pvcs">PVCs</a></li></ul></li><li><a href="#possible-improvements">Possible improvements</a></li><li><a href="#demo">Demo</a></li><li><a href="#conclusion">Conclusion</a></li></ul>
            </nav>
          </aside>
        
        <h2 id="what-is-ibm-block-driver-csi-patched-for-e-series-santricity">What is IBM Block Driver CSI (patched for E-Series SANtricity)</h2>

<p>It is my patch of IBM Block Storage CSI driver v1.13.0 (<a href="https://github.com/ibm/ibm-block-csi-driver/">IBM Block CSI driver</a> on Github).</p>

<h2 id="why">Why?</h2>

<p>Just like NetApp Trident CSI, <a href="https://www.ibm.com/docs/en/stg-block-csi-driver/1.13.0?topic=requirements-features-capabilities">IBM Block Storage CSI driver</a> is a decent CSI driver.</p>

<p>Neither of them supports NetApp E-Series SANtricity systems, but one of them makes that <em>easy</em>. That is IBM Block Storage CSI driver, where array adapters are written in Python.</p>

<p>Some 60 days ago, I set out to <a href="/2025/12/22/reautomating-eseries.html">reautomate E-Series/SANtricity</a>.</p>

<p>CSI driver for SANtricity was high on my wish-list, but I wasn't sure how to best "attack" this problem. When I saw IBM Block Driver CSI, I knew that was what I was looking for - well-respected developers, OpenShift focus, and array-facing code written in Python. Perfect!</p>

<p>I started playing with it and soon realized testing it was just too hard without knowing where all the various "landmines" and gotchas were. As a temporary workaround, I switched to building it for SolidFire, which is something I can test at home(with SolidFire Demo VM) and SolidFire has a great Python SDK, so at least one side of the equation was known.</p>

<p>But I didn't make much progress with SolidFire due to home "infrastructure" and Kuberntes issues and, frustrated with that situation, I switched to creating a CSI driver from scratch. Last week I released <a href="/2026/01/19/netapp-eseries-santricity-csi.html">SANtricity CSI</a>, but this week I thought to revisit this patched driver because I really liked its aproachability.</p>

<p>The other reason was - see my recent blog posts to get the idea - it had been almost two months of "re-automating" and since then I had improved <a href="https://github.com/scaleoutsean/santricity-client">santricity-client</a> (Python client library for SANtricity) enough to approach this in a better way: plugin into that CSI driver rather than build from within. That was expected lessen uncertainties and difficulties.</p>

<p>There's more to like about IBM's Block CSI driver. For example, it's witten for "old school" storage (SVC, XIV, DS8000) and some of them are similar to SANtricity. I worked with some those arrays many years ago. It seemed like a great fit. And I saw value in that upstream is focused on testing and certification with OpenShift, unlike some other community CSI drivers (I already have one of those!).</p>

<p>What my SANtricity CSI driver does <strong>not</strong> do (and does not want to) is touch Fibre Channel, get certifications, test with OpenShift, or use operators. Amazingy, IBM Block Storage CSI does all of that. Aren't we lucky!</p>

<p>This fork obviously does not inherit any of IBM's certifications and doesn't get IBM's (or Red Hat's) support. But if you think you'd rather try this than my SANtricity CSI, you can.</p>

<p>So, this driver is a great match for E-Series integration.</p>

<h2 id="whats-not-implemented">What's not implemented</h2>

<p>Portset host definer setting is something my patch ignores, the reason being SANtricity arrays don't have <em>that</em> many ports to require micro-management. And in Kubernetes environments you will probably have an all-can-see-everything situation in any case. It can be done, but I don't see much value in it.</p>

<p>Other things not included:</p>

<ul>
  <li>Call home (don't call me, I'll call you!)</li>
  <li>SVC Enhanced Stretch Cluster (no can do)</li>
  <li>Snapshots and clones (same reason as Portset; can be implemented, though)</li>
  <li>Policy-based replication (doesn't seem important enough; I think Kubernetes users should use native application replication and clustering)</li>
  <li>NVMe+FC support (no hardware to test, and not interested. It might work out of box, who knows!)</li>
  <li>IO group support, HyperSwap and other features specific to IBM storage hardware</li>
  <li>Topology awareness - this what portsets enable and not very relevant for Kubernetes with SANtricity (which isn't a scale-out storage array, unlike some of IBM's block storage arrays)</li>
  <li>UNIX support (I've no UNIX systems at home, soâ€¦ As an aside, I built working Trident <a href="/2021/02/24/netapp-trident-on-arm64#notes-on-linuxs390x-feb-25-2021">binaries for Power and Linux on zOS</a> five years ago, also ARM64 containers for Trident CSI <a href="/2021/07/31/netapp-trident-v21.07.html#trident-v2107-on-arm64">before</a> it was officially supported)</li>
</ul>

<p>The patch'es README file has more technical details about differences from upstream.</p>

<h2 id="how-to-use-it">How to use it</h2>

<h3 id="configuration-and-deployment">Configuration and deployment</h3>

<p>For this version (v1.13), make sure you have a Kubernetes 1.32-1.34 (or OpenShift 4.16-4.20) cluster on x86 systems and one E-Series array with iSCSI or NVMe/RoCE interfaces (even Fibre Channel might work, it's just that I don't have a way to test it, and wouldn't even if I could).</p>

<p>iSCSI should be the stable one, as NVMe/RoCE is not supported by upstream (only NVMe/FC is, so it's a change but not a big, one especially since SANtricity also supports NVMe/FC, so NVMe discovery exists in upstream).</p>

<p>If you have IBM storage, this driver aims to install in a different name space (<code class="language-plaintext highlighter-rouge">default</code>; IBM's uses own, non-default namespace) and uses a slightly different CSI driver name (<code class="language-plaintext highlighter-rouge">santricity.block.csi.ibm.com</code>) to avoid naming conflicts and give credit to upstream. So it should be able to coexist with "real" IBM Block Storage CSI driver.</p>

<p>How to deploy :</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/scaleoutsean/ibm-block-csi-driver
<span class="nb">cd </span>ibm-block-csi-driver/
<span class="nb">cat </span>santricity/README.md

<span class="c"># if you want to build your own </span>
<span class="c"># sudo apt install make -y</span>
<span class="c"># make vendor-santricity</span>

kubectl apply <span class="nt">-f</span> ./deploy/santricity-solidfire/ibm-block-csi-operator.yaml
kubectl apply <span class="nt">-f</span> ./deploy/santricity-solidfire/csi.ibm.com_v1_ibmblockcsi_cr.yaml

<span class="c"># edit array details (management API, username, password, and storage pool name).</span>
<span class="c"># I recommend using one large DDP</span>
vim deploy/santricity-solidfire/secret-santricity.yaml
kubectl apply <span class="nt">-f</span> deploy/santricity-solidfire/secret-santricity.yaml
</code></pre></div></div>

<p>This gives you a working CSI provisioner.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get pods <span class="nt">-A</span>
NAMESPACE        NAME                                         READY   STATUS    RESTARTS       AGE
default          ibm-block-csi-controller-0                   8/8     Running   0              42s
default          ibm-block-csi-node-d5vpp                     3/3     Running   0              42s
default          ibm-block-csi-operator-85d5dd55c5-vf9l6      1/1     Running   0              77m
</code></pre></div></div>

<p>Next, create (or identify) a storage pool to use and configure a storage class.</p>

<ul>
  <li>Make sure you provide correct authentication details (your IP might get locked out) and TLS verification behavior</li>
  <li>I recommend using DDP pools, just like in SANtricity CSI</li>
</ul>

<p>For the latter, edit <code class="language-plaintext highlighter-rouge">./deploy/santricity-solidfire/demo-storageclass-santricity.yaml</code>, mostly to identify DDP (by name is OK, since storage pool names are enforced to be unique).</p>

<h4 id="checks">Checks</h4>

<p>To see if array is reachable, check the controller pod. It's not supposed to be crashing, simply speaking.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span> kubectl get pods <span class="nt">-A</span>
NAMESPACE        NAME                                         READY   STATUS    RESTARTS       AGE
default          ibm-block-csi-controller-0                   8/8     Running   0              30s
default          ibm-block-csi-node-65xb5                     3/3     Running   0              74m
default          ibm-block-csi-operator-85d5dd55c5-xd79h      1/1     Running   0              75m

<span class="nv">$ </span>kubectl logs ibm-block-csi-controller-0
Defaulted container <span class="s2">"ibm-block-csi-controller"</span> out of: ibm-block-csi-controller, csi-provisioner, csi-attacher, csi-snapshotter, csi-resizer, csi-addons-replicator, csi-volume-group, livenessprobe
2026-02-25 09:18:12,282 DEBUG   <span class="o">[</span>125328088737600] <span class="o">[</span>MainThread] <span class="o">(</span>ds8k_volume_cache.py:__init__:11<span class="o">)</span> - creating a new cache
2026-02-25 09:18:12,662 INFO    <span class="o">[</span>125328088737600] <span class="o">[</span>MainThread] <span class="o">(</span>controller_server_manager.py:start_server:44<span class="o">)</span> - Controller version: 1.13.0
2026-02-25 09:18:12,662 DEBUG   <span class="o">[</span>125328088737600] <span class="o">[</span>MainThread] <span class="o">(</span>controller_server_manager.py:start_server:47<span class="o">)</span> - Listening <span class="k">for </span>connections on endpoint address: unix:///var/lib/csi/sockets/pluginproxy/csi.sock
2026-02-25 09:18:12,664 DEBUG   <span class="o">[</span>125328088737600] <span class="o">[</span>MainThread] <span class="o">(</span>controller_server_manager.py:start_server:50<span class="o">)</span> - Controller Server running ...
2026-02-25 09:18:12,860 INFO    <span class="o">[</span>125327011477248] <span class="o">[</span>ThreadPoolExecutor-0_0] <span class="o">(</span>decorators.py:_set_sync_lock:48<span class="o">)</span> - GetPluginInfo
2026-02-25 09:18:12,861 INFO    <span class="o">[</span>125327011477248] <span class="o">[</span>ThreadPoolExecutor-0_0] <span class="o">(</span>decorators.py:_set_sync_lock:54<span class="o">)</span> - finished GetPluginInfo
</code></pre></div></div>

<p>Check your storage class:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get sc
NAME                           PROVISIONER                         RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
demo-storageclass-santricity   santricity.block.csi.ibm.com        Delete          Immediate           <span class="nb">true                   </span>100s
santricity                     santricity.scaleoutsean.github.io   Delete          Immediate           <span class="nb">true                   </span>2d18h
santricity-hdd-raid6           santricity.scaleoutsean.github.io   Retain          Immediate           <span class="nb">true                   </span>2d17h
santricity-nvme-raid1          santricity.scaleoutsean.github.io   Delete          Immediate           <span class="nb">true                   </span>2d17h
santricity-nvme-raid6          santricity.scaleoutsean.github.io   Delete          Immediate           <span class="nb">true                   </span>2d17h

<span class="nv">$ </span>kubectl describe sc demo-storageclass-santricity
Name:            demo-storageclass-santricity
IsDefaultClass:  No
Annotations:     kubectl.kubernetes.io/last-applied-configuration<span class="o">={</span><span class="s2">"allowVolumeExpansion"</span>:true,<span class="s2">"apiVersion"</span>:<span class="s2">"storage.k8s.io/v1"</span>,<span class="s2">"kind"</span>:<span class="s2">"StorageClass"</span>,<span class="s2">"metadata"</span>:<span class="o">{</span><span class="s2">"annotations"</span>:<span class="o">{}</span>,<span class="s2">"name"</span>:<span class="s2">"demo-storageclass-santricity"</span><span class="o">}</span>,<span class="s2">"parameters"</span>:<span class="o">{</span><span class="s2">"csi.storage.k8s.io/controller-publish-secret-name"</span>:<span class="s2">"santricity-secret"</span>,<span class="s2">"csi.storage.k8s.io/controller-publish-secret-namespace"</span>:<span class="s2">"default"</span>,<span class="s2">"csi.storage.k8s.io/fstype"</span>:<span class="s2">"xfs"</span>,<span class="s2">"csi.storage.k8s.io/node-stage-secret-name"</span>:<span class="s2">"santricity-secret"</span>,<span class="s2">"csi.storage.k8s.io/node-stage-secret-namespace"</span>:<span class="s2">"default"</span>,<span class="s2">"csi.storage.k8s.io/provisioner-secret-name"</span>:<span class="s2">"santricity-secret"</span>,<span class="s2">"csi.storage.k8s.io/provisioner-secret-namespace"</span>:<span class="s2">"default"</span>,<span class="s2">"csi.storage.k8s.io/secret-name"</span>:<span class="s2">"santricity-secret"</span>,<span class="s2">"csi.storage.k8s.io/secret-namespace"</span>:<span class="s2">"default"</span>,<span class="s2">"pool"</span>:<span class="s2">"data"</span>,<span class="s2">"volume_name_prefix"</span>:<span class="s2">"csi"</span><span class="o">}</span>,<span class="s2">"provisioner"</span>:<span class="s2">"santricity.block.csi.ibm.com"</span>,<span class="s2">"reclaimPolicy"</span>:<span class="s2">"Delete"</span><span class="o">}</span>

Provisioner:           santricity.block.csi.ibm.com
Parameters:            csi.storage.k8s.io/controller-publish-secret-name<span class="o">=</span>santricity-secret,csi.storage.k8s.io/controller-publish-secret-namespace<span class="o">=</span>default,csi.storage.k8s.io/fstype<span class="o">=</span>xfs,csi.storage.k8s.io/node-stage-secret-name<span class="o">=</span>santricity-secret,csi.storage.k8s.io/node-stage-secret-namespace<span class="o">=</span>default,csi.storage.k8s.io/provisioner-secret-name<span class="o">=</span>santricity-secret,csi.storage.k8s.io/provisioner-secret-namespace<span class="o">=</span>default,csi.storage.k8s.io/secret-name<span class="o">=</span>santricity-secret,csi.storage.k8s.io/secret-namespace<span class="o">=</span>default,pool<span class="o">=</span>data,volume_name_prefix<span class="o">=</span>csi
AllowVolumeExpansion:  True
MountOptions:          &lt;none&gt;
ReclaimPolicy:         Delete
VolumeBindingMode:     Immediate
Events:                &lt;none&gt;
</code></pre></div></div>

<p>All right, demo-storageclass-santricity is good to go!</p>

<h3 id="pvcs">PVCs</h3>

<p>One last thing before "The Moment of Truth": this driver has the "Host Definer" feature to register hosts with storage. This CSI driver should do this for you, so first try to create a PVC and see what happens (whether host(s) get registered or not). The reason I suggest this is your network host name (for Kubernetes workers) may be different from what SANtricity has. My Python client library tries to figure it out, but you may theoretically end up with duplicate host names or some mix up between host groups and hosts. I've seen such bugs in SANtricity CSI (see the blog post).</p>

<p>That should be mitigated by querying hosts by IQN or NQN, but then there are also situations where a client might have both (!) and possibly other edge cases. SANtricity CSI has likely fixed that and I think I've implemented that correctly in this driver so I haven't even seen that bug here, but who really knows?</p>

<p>So just watch out how the first PVC gets created (or not) and how hosts and host groups change (or not). Without topology awareness (i.e portsets) we should want to present volumes to a host group that containers all workers. If provisioning fails, then create a host group and hosts (with NQNs or IQNs (or FC WWNs)) and retry.</p>

<p>My first try went like this.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># kubectl get pvc</span>
NAME                  STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS                   VOLUMEATTRIBUTESCLASS   AGE
demo-pvc-santricity   Bound    pvc-b766ad3e-388b-43c0-b3d1-cc5f4c5fd865   12Gi       RWO            demo-storageclass-santricity   &lt;<span class="nb">unset</span><span class="o">&gt;</span>                 4s
</code></pre></div></div>

<p>Control plane worked. Good.</p>

<p>The name on E-Series? Don't ask. It's <code class="language-plaintext highlighter-rouge">csi_GkR7FvXS9dqXv3zDQpN7gCQshS</code>.</p>

<p><img src="/assets/images/ibm_block_driver_for_santricity_02.png" alt="IBM Block CSI (patched for SANtricity) volume name in SANtricity" /></p>

<p>Don't blame me - this patch in charge of the prefix only (adjustable; default: <code class="language-plaintext highlighter-rouge">csi_</code>)! My SANtricity CSI driver uses (trimmed, due to length) PVC names. Here, I won't interfere.</p>

<p>What I can - and do - is tag these volumes with SANtricity volume metadata tags. You get these, and can collect them with my <a href="https://github.com/scaleoutsean/eseries-santricity-collector">E-Series SANtricity Collector</a> or your own API client.</p>
<ul>
  <li>pvc_name - from csi.storage.k8s.io/pvc/name</li>
  <li>pvc_namespace - from csi.storage.k8s.io/pvc/namespace</li>
  <li>pv_name - from csi.storage.k8s.io/pv/name</li>
  <li>fstype - from csi.storage.k8s.io/pv/fstype</li>
</ul>

<p>Attached PVC, used by a running pod.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl describe pvc demo-pvc-santricity
Name:          demo-pvc-santricity
Namespace:     default
StorageClass:  demo-storageclass-santricity
Status:        Bound
Volume:        pvc-253086a7-e1da-433a-89bf-4086aa27b972
Labels:        &lt;none&gt;
Annotations:   pv.kubernetes.io/bind-completed: <span class="nb">yes
               </span>pv.kubernetes.io/bound-by-controller: <span class="nb">yes
               </span>volume.beta.kubernetes.io/storage-provisioner: santricity.block.csi.ibm.com
               volume.kubernetes.io/storage-provisioner: santricity.block.csi.ibm.com
Finalizers:    <span class="o">[</span>kubernetes.io/pvc-protection]
Capacity:      12Gi
Access Modes:  RWO
VolumeMode:    Filesystem
Used By:       first-ibm-csi-pod
Events:        &lt;none&gt;

<span class="nv">$ </span>kubectl describe pv pvc-253086a7-e1da-433a-89bf-4086aa27b972
Name:            pvc-253086a7-e1da-433a-89bf-4086aa27b972
Labels:          &lt;none&gt;
Annotations:     pv.kubernetes.io/provisioned-by: santricity.block.csi.ibm.com
                 volume.kubernetes.io/provisioner-deletion-secret-name: santricity-secret
                 volume.kubernetes.io/provisioner-deletion-secret-namespace: default
Finalizers:      <span class="o">[</span>kubernetes.io/pv-protection external-attacher/santricity-block-csi-ibm-com]
StorageClass:    demo-storageclass-santricity
Status:          Bound
Claim:           default/demo-pvc-santricity
Reclaim Policy:  Delete
Access Modes:    RWO
VolumeMode:      Filesystem
Capacity:        12Gi
Node Affinity:   &lt;none&gt;
Message:
Source:
    Type:              CSI <span class="o">(</span>a Container Storage Interface <span class="o">(</span>CSI<span class="o">)</span> volume <span class="nb">source</span><span class="o">)</span>
    Driver:            santricity.block.csi.ibm.com
    FSType:            xfs
    VolumeHandle:      SANtricity:020000006D039EA000493A2600000961699EEF96<span class="p">;</span>020000006D039EA000493A2600000961699EEF96
    ReadOnly:          <span class="nb">false
    </span>VolumeAttributes:      storage.kubernetes.io/csiProvisionerIdentity<span class="o">=</span>1772028796876-5291-santricity.block.csi.ibm.com
Events:                &lt;none&gt;
</code></pre></div></div>

<p>The demo storage class above is the default one; XFS and RAID 6. I used a DDP pool named <code class="language-plaintext highlighter-rouge">data</code> (which can also be set using a <code class="language-plaintext highlighter-rouge">poolId</code> rather than name). You can also use RAID 1 on DDP.</p>

<p>Neither this patched IBM block CSI driver nor SANtricity CSI do is create DDPs or Disk Groups, but SANtricity CSI doesn't want to deal with non-DDP storage pools (I think it should be optimized, so DDP-only, although you could point it to any). This patch doesn't do that and isn't picky about underlying storage pools: use any type of storage pool.</p>

<p>Other arrays supported by this driver also support different RAID types, this patch follows. If you like to micro-manage low level storage, use RAID 1, RAID 5, RAID 6, or DDP. If you use DDP, your Storage Class choices are RAID 1 or RAID 6, with RAID 6 as the default. The rest ("classic" disk groups) has no choice - a PVC's RAID type follows underlying disk group's RAID type.</p>

<p>DDP is vastly superior and should be used over others.</p>

<p><img src="/assets/images/ibm_block_driver_for_santricity_01.png" alt="First SANtricity PVC with IBM Block CSI driver" /></p>

<h2 id="possible-improvements">Possible improvements</h2>

<ul>
  <li>Snapshots - highly desirable, but I'm focusing on SANtricity CSI as the "native" SANtricity CSI driver for Kubernetes. If anyone uses this patch and needs snapshots and linked clones (aka "snapshot volumes"), let me know in issues (or ping me on X)</li>
  <li>Clones - slightly less interesting, but interesting</li>
  <li>Portsets - these aren't really a thing on E-Series arrays, but we could expose them ("portsets" being matching sets of host-facing controller ports), it's just need some work</li>
</ul>

<p>I haven't updated this CSI from upstream yet but, after v1.14 comes out, I'll see how difficult or easy it is. In the meantime, I assume you can cherry-pick and apply fixes or improvements that appear between IBM's releases. It's not like you'll lose support - this CSI already doesn't have it!</p>

<h2 id="demo">Demo</h2>

<ul>
  <li><a href="https://rumble.com/v76ascc-ibm-block-csi-with-santricity-patch-iscsi.html">IBM Block Storage CSI driver with SANtricity Patch and NVMe/RoCE</a> - 8m17s</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>It would be best if Trident CSI supported E-Series - I could spend free time on other things E-Series - but since it doesn't, I've created two alternatives for own (and anyone's) use, so now we have a "native" SANtricity CSI on the one side, and this patch of IBM Block Storage CSI with SANtricity support on the other. But are "BOYCSI", but that's how it is.</p>

<p>With two prototypes that support SANtricity 11.9 and modern (NVMe/RoCE) protocols, given how stable SANtricity API is, these should be easy to maintain for years to come, even if you're doing it yourself. My patched IBM block CSI driver has only minor changes to upstream code, so it should be easy to update once IBM releases a new version.</p>

<p>I recommend SANtricity CSI for NVMe/RoCE and "modern" use cases, and this patch of IBM Block Driver CSI for following use cases and situations:</p>
<ul>
  <li>iSCSI environments (although NVMe/RoCE is the one I tested, upstream does not officially support NVMe/RoCE, while my own SANtricity CSI focuses on NVMe/RoCE)</li>
  <li>Self-sufficient OpenShift users with E-Series. I suspect even OpenShift Virtualization might work, if it works</li>
  <li>SANtricity users already familiar with IBM Block Driver CSI</li>
  <li>Folks willing to experiment with SANtricity in an FC SAN environment</li>
  <li>Folks who must micro-manage or use classic RAID which SANtricity CSI does not target</li>
</ul>

<p>You probably shouldn't use it for air traffic control and similar.</p>

<p>Check out the <a href="https://github.com/scaleoutsean/ibm-block-csi-driver/tree/santricity/santricity">README</a>.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/csi" class="page__taxonomy-item p-category" rel="tag">csi</a><span class="sep">, </span>
    
      <a href="/tags/ef600" class="page__taxonomy-item p-category" rel="tag">ef600</a><span class="sep">, </span>
    
      <a href="/tags/iscsi" class="page__taxonomy-item p-category" rel="tag">iscsi</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/nvme" class="page__taxonomy-item p-category" rel="tag">nvme</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/e-series" class="page__taxonomy-item p-category" rel="tag">e-series</a><span class="sep">, </span>
    
      <a href="/categories/kubernetes" class="page__taxonomy-item p-category" rel="tag">kubernetes</a><span class="sep">, </span>
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2026-02-26T00:00:00+08:00">2026-02-26 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=IBM+Block+Storage+CSI+driver+patched+for+NetApp+E-Series%20https%3A%2F%2Fscaleoutsean.github.io%2F2026%2F02%2F26%2Fibm-block-storage-cis-driver-santricity-fork.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2026/02/26/ibm-block-storage-cis-driver-santricity-fork.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2026/02/19/the-shocking-truth-about-ef600-200g-ports.html" class="pagination--pager" title="Connecting to 200G HICs on E-Series EF600">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/19/the-shocking-truth-about-ef600-200g-ports.html" rel="permalink">Connecting to 200G HICs on E-Series EF600
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-19T00:00:00+08:00">2026-02-19 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Connecting to EF-Series EF600 200G HIC in DAS mode
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/19/linux-nvme-roce-ef-series.html" rel="permalink">Linux, NVMe/RoCE and HA NetApp EF-Series NVMe-oF storage
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-19T00:00:00+08:00">2026-02-19 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          17 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Linux NVMe/RoCE clients with NetApp EF-Series NVMe-oF
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/15/updated-terraform-provider-solidfire.html" rel="permalink">Terraform provider for SolidFire update for Feb 2026
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-15T00:00:00+08:00">2026-02-15 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Latest and greatest Terraform provider for SolidFire status update (2026/02)
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/14/weak-security-ssh-client.html" rel="permalink">Overcome SSH invalid key length, SSH security annoyances
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-14T00:00:00+08:00">2026-02-14 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Fix for the annoying SSH invalid key error
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2026 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
