<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            SolidFire backup to disk with Versity S3 Gateway | Acting Technologist
      
    </title>
    <meta name="description" content="
     It's storage and it ought to work
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>SolidFire backup to disk with Versity S3 Gateway | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="SolidFire backup to disk with Versity S3 Gateway" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="It’s storage and it ought to work" />
<meta property="og:description" content="It’s storage and it ought to work" />
<link rel="canonical" href="https://scaleoutsean.github.io/2025/06/30/solidfire-backup-to-disk-with-versity-s3-gateway.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2025/06/30/solidfire-backup-to-disk-with-versity-s3-gateway.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:image" content="https://scaleoutsean.github.io/assets/images/solidfire-backup-to-disk-with-vgw.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-06-30T00:00:00+08:00" />
<script type="application/ld+json">
{"image":"https://scaleoutsean.github.io/assets/images/solidfire-backup-to-disk-with-vgw.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2025/06/30/solidfire-backup-to-disk-with-versity-s3-gateway.html"},"author":{"@type":"Person","name":"scaleoutSean"},"description":"It’s storage and it ought to work","@type":"BlogPosting","url":"https://scaleoutsean.github.io/2025/06/30/solidfire-backup-to-disk-with-versity-s3-gateway.html","headline":"SolidFire backup to disk with Versity S3 Gateway","dateModified":"2025-06-30T00:00:00+08:00","datePublished":"2025-06-30T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">SolidFire backup to disk with Versity S3 Gateway</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>30 Jun 2025</span> - <i class="far fa-clock"></i> 


  
  
    3 minute read
  

    </span>
  </div>
  
        <p>This is more appropriate for a tweet, but anyway…</p>

<p>I’ve blogged about SolidFire’s rather basic “backup to S3” feature many times.</p>

<p>As far as S3 targets are concerned, I’ve tried a bunch, including experiments with S3 storage appliance compression vs. source-side (that is, SolidFire) compression (I quite liked that thought, to sacrifice “efficiency at source” for greater storage cost savings down the road, although there were downsides, too.)</p>

<p>But it has somehow escaped me that Versity S3 Gateway would be an interesting endpoint to backup to.</p>

<p>The interesting part is it’s a gateway. That means whatever you PUT, you can <code class="language-plaintext highlighter-rouge">ls</code> and <code class="language-plaintext highlighter-rouge">cat</code> as you see it…</p>

<p><img src="/assets/images/solidfire-backup-to-disk-with-vgw.png" alt="SolidFire Backup to S3 is backup to disk with Versity S3 Gateway" /></p>

<p>It’s not that anyone is asking, but with a simple Versity S3 Gateway container or VM (we could create any number of them, e.g. one per SolidFire volume) we can create a sufficiently fast S3 target for SolidFire’s “backup to S3” feature.</p>

<p>What does “sufficiently fast” mean? It means that an entry level E-Series array (E4000) should be be faster than SolidFire’s backup-to-S3 write requirements.</p>

<p>Then, after you’ve backed up volume 37 to https://s3.company.com/vol37 (which may be the directory <code class="language-plaintext highlighter-rouge">/data/vol37</code> if your VGW runs out of <code class="language-plaintext highlighter-rouge">/data/</code>), you could see those files on the Linux host. Those “files” would be either garbled, post-efficient blobs, or “raw” (if you chose to not use any source-side efficiencies) 4MiB blobs identical to what you’d get with this:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">dd </span><span class="nv">bytes</span><span class="o">=</span>1M <span class="k">if</span><span class="o">=</span>/dev/sdb <span class="nv">of</span><span class="o">=</span>/data/vol37.bin
<span class="nb">cat </span>vol37.bin | <span class="nb">split</span> <span class="nt">--bytes</span><span class="o">=</span>4MiB <span class="nt">--numeric-suffixes</span><span class="o">=</span>0 <span class="nt">--suffix-length</span><span class="o">=</span>3 - vol37.bin.part-
<span class="c"># VGW's data could thus be recovered by dd-ing to a any block device of the same size</span>
</code></pre></div></div>

<p>In the latter case, such backups would be wasteful in terms of backup time as even zeros from empty space would be sent and stored as backup objects, so you’d need to have compression in S3 or underlying storage. Previously I tested this with MinIO, but with Versity S3 Gateway we’d need to use some storage with compression, such as ZFS.</p>

<p>As number (2) points out, such inefficient backups could be recovered to same-sized volumes anywhere by simply <code class="language-plaintext highlighter-rouge">cat</code>-ing them to raw disks of the same size.</p>

<p>We could also copy these buckets - when they’re not changing, or otherwise on storage level - to another location for DR or BC purposes.</p>

<h2 id="why-nobody-uses-this">Why nobody uses this</h2>

<p>Few people use SolidFire’s backup to S3 because restores are “all or nothing” and while one can create a new “temporary” file-system for restoring to a place to allow selective restoration of data, there’s no backup catalog and SolidFire never built the tools to make these backups more efficient which means despite there being the option to apply “at source” efficiency to every single volume, there’s no efficiency between consecutive backups or across volumes unless you use “Backup to SolidFire” which is similar to SolidFire snapshot replication that takes advantage of SolidFire’s global efficiencies.</p>

<p>It’s still a good tool for “just in case” and <em>ad hoc</em> backups, as well as a secondary backup tool for users who try to economize.</p>

<h2 id="note">Note</h2>

<p>Note that in the past SolidFire’s backup-to-S3 had issues with MinIO’s incompatible S3 API, so it may be possible that this wouldn’t work on Versity Gateway.</p>

<p>I haven’t tested and no one is asking, so for now it’s just an idea that should work as long as SolidFire’s S3 client can create backups on Versity S3 Gateway.</p>

      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#storage">storage</a>
      &nbsp; 
    
      <a href="
      /categories/#solidfire">solidfire</a>
       
    
  </span>
</div>
    

  
    <div>
      <h3>Related Posts</h3>
      <ul>
      
        <li><a href="/2022/08/29/solidfire-backup-to-s3-over-storage-network.html">SolidFire Backup to S3 over Storage Network</a></li>
      
        <li><a href="/2023/09/02/solidfire-backup-to-s3-backblaze-b2.html">SolidFire backup-to-S3 with Backblaze</a></li>
      
        <li><a href="/2024/04/24/netapp-solidfire-monitor-backup-influx-grafana-11.html">Metrics for NetApp SolidFire backup-to-S3 in InfluxDB and Grafana</a></li>
      
        <li><a href="/2024/04/09/solidbackup-velero-backup-non-k8s-volumes-netapp-solidfire-to-s3.html">Backup NetApp SolidFire's non-Kubernetes volumes with Velero</a></li>
      
        <li><a href="/2023/08/26/solidfire-backup-to-ontap-s3.html">SolidFire backup-to-S3 using ONTAP S3 destination</a></li>
      
      </ul>
    </div>
  

    
  </div><footer class= "footer">
    <p>2025-07-25 11:59 </p>
    <p>Copyright © 2025 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
