<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>EPA version 3.5.0 | Acting Technologist</title>
<meta name="description" content="E-Series Performance Analyzer v3.5.0">


  <meta name="author" content="Sean">
  
  <meta property="article:author" content="Sean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="EPA version 3.5.0">
<meta property="og:url" content="https://scaleoutsean.github.io/2025/08/31/epa-version-3-dot-5.html">


  <meta property="og:description" content="E-Series Performance Analyzer v3.5.0">



  <meta property="og:image" content="https://scaleoutsean.github.io/assets/images/epa_350_santricity_config_measurements.png">



  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="EPA version 3.5.0">
  <meta name="twitter:description" content="E-Series Performance Analyzer v3.5.0">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2025/08/31/epa-version-3-dot-5.html">

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://scaleoutsean.github.io/assets/images/epa_350_santricity_config_measurements.png">
  

  



  <meta property="article:published_time" content="2025-08-31T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2025/08/31/epa-version-3-dot-5.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="EPA version 3.5.0">
    <meta itemprop="description" content="What's new in EPA v3.5.0">
    <meta itemprop="datePublished" content="2025-08-31T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2025/08/31/epa-version-3-dot-5.html" itemprop="url">EPA version 3.5.0
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-31T00:00:00+08:00">2025-08-31 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#whats-new-in-epa-v350">What's new in EPA v3.5.0</a></li><li><a href="#more-performance-and-configuration-details">More performance and configuration details</a></li><li><a href="#experimental-prometheus-exporter">Experimental Prometheus exporter</a></li><li><a href="#improvements-to-existing-code">Improvements to existing code</a></li><li><a href="#whats-next">What's next</a></li></ul>
            </nav>
          </aside>
        
        <h2 id="whats-new-in-epa-v350">What's new in EPA v3.5.0</h2>

<p>Several small features have been added in <a href="https://github.com/scaleoutsean/eseries-perf-analyzer">E-Series Performance Analyzer</a> version 3.5.0.</p>

<p>Like with some of the changes in 3.4, I'd already added some of them in version 4 (currently in public beta), so I again wasted some time repeating the same thing.</p>

<p>At this point I've had enough of version 3, so I crammed even more into it - even some weakly desired features - and from now on I'll just maintain that version.</p>

<h2 id="more-performance-and-configuration-details">More performance and configuration details</h2>

<p>EPA is supposed to be about performance, but configuration monitoring options are lacking, so what to do? Do nothing is one option and do something is the other possibility.</p>

<p>While entertaining the latter, I realized the lack of options is not a coincidence, which is a good reason on its own to do it. Now it's no coincidence there <em>is</em> a way to conveniently monitor E-Series configuration with free tools.</p>

<p>I've therefore wasted more time re-implementing some configuration-gathering functions from EPA 4 Beta and adding several new ones.</p>

<ul>
  <li><strong>Controller configuration</strong>: this is related to performance, but even this was a waste of time since I had to practically re-do it after having done it for version 4</li>
  <li><strong>Hosts configuration</strong>: there isn't much to this, but we can see things like client ports, IQNs and such. Unfortunately, per-client performance or other details aren't available in the API. Still, we can use this to show configured hosts and potentially cross-reference with other configuration details</li>
  <li><strong>Volume configuration</strong>: the key parts here are volume names and sizes. InfluxDB doesn't support joins, but one can overlay disk groupings (added in 3.4.0) over the sum of volume sizes to get some idea of how much space is left. This requires care because of non-obvious reasons, such as snapshot reserves which are usually hard to see, even in the SANtricity UI</li>
  <li><strong>Storage pool configuration</strong>: this covers RAID and DDP groupings. Very important as we need some totals from which we can deduct volumes and find out how much unused disk group capacity is left</li>
  <li><strong>Drive configuration</strong>: this is interesting mostly because of two things: firmware and disk status. Both were already covered and inserted in other metrics in version 3.4 (for example, SSD wear level), as at the time I hoped having some key metrics would suffice. Drives' configuration is now a stand-alone measurement while SSD wear level is left where it was initially implemented (in disks performance metrics). Drive configuration measurement has more details about configuration and status and less about performance, so it made sense to leave SSD wear level in disk performance metrics</li>
</ul>

<p>Some less widely-known details:</p>

<p><img src="/assets/images/epa_350_santricity_config_curiosities.png" alt="EPA Configuration curiosities" /></p>

<ul>
  <li>(1) - <code class="language-plaintext highlighter-rouge">raidDiskPool</code> - yes, that's DDP</li>
  <li>(2) - yes, we can have RAID 0 on E-Series (except on the pre-crippled EF600C and EF300C). I was using R0 for <a href="/2024/02/28/incus-zfs-netapp-eseries.html">ZFS with E-Series</a> here, which is one of the several ways ZFS can be <a href="/2024/02/26/zfs-deduplication-netapp-eseries.html">used with E-Series</a>. I also use RAID 0 for apps with EC, such as <a href="/2023/09/03/minio-erasure-coding-and-netapp-e-series.html">MinIO</a> if/when I need MinIO with EC</li>
  <li>(3) - <code class="language-plaintext highlighter-rouge">repos_&lt;digits&gt;</code> are internal "volumes" used by SANtricity for CoW snapshots and such. It's better to see them (and account for their size) than hide them although they may confuse us at first</li>
</ul>

<h2 id="experimental-prometheus-exporter">Experimental Prometheus exporter</h2>

<p>As I decided to stop adding features, I added even the least desired one, a Prometheus exporter.</p>

<p>The way it works is Collector runs a Web server where the performance metrics that Collector already collects are exported in the Prometheus format.</p>

<p>Collected configuration details aren't exported because that's not what Prometheus does.</p>

<p>What's exported is performance metrics: system, controllers, volumes, disks, interfaces.</p>

<p>By default, EPA collects and sends output to both InfluxDB and Prometheus, but either can be disabled.</p>

<p>So now I'm done with this as well. There may be some bugs in Prometheus exports, but I can see metrics are available for use. Example with IOPS Other and IOPS Combined on old volumes I used in "MinIO with E-Series" <a href="/2024/10/14/minio-versitygw-s3-performance-netapp-ef-series.html">posts like this one</a>.</p>

<pre><code class="language-raw">eseries_volume_iops_total{operation="other",sys_id="600A098000F63714000000005E79C17C",sys_name="EF570",vol_name="CG_MINIO_01_SV_RWC_0002:r0_02"} 0.0
eseries_volume_iops_total{operation="combined",sys_id="600A098000F63714000000005E79C17C",sys_name="EF570",vol_name="CG_MINIO_01_SV_RWC_0002:r0_02"} 0.0
</code></pre>

<p>If any Prometheus exporter-related bugs get found <em>and reported</em>, I'll try to fix them in subsequent 3.5 releases.</p>

<h2 id="improvements-to-existing-code">Improvements to existing code</h2>

<p>InfluxDB storage bloat was one of the reasons I didn't want to add all those new measurements. But since they got added, that created more related derivative work.</p>

<p>Collector now performs better down-sampling as well as data pruning for old records. That should help keep DB growth in check even for users who enable everything.</p>

<p>By "enable everything" I mean now you don't have to. I've added <code class="language-plaintext highlighter-rouge">--include</code> in 3.4.1 so that one can include only one or more measurements. That was an unrelated feature request from another user, but it will come handy for the new feature bloat.</p>

<p>For example, to collect only interface performance metrics for Prometheus we can now do <code class="language-plaintext highlighter-rouge">--include interface --output prometheus</code>. Or include everything except all the new configuration collectors to keep your DB size the same as before.</p>

<p>Does the new approach work better? Who the heck knows? I'll know in about 30 days. What I can tell for sure is that old down-sampling that was in place when I forked probably didn't work <em>at all</em>. But I can't be sure, since no one ever complained. For my new implementation, I'll blog about it when I find out.</p>

<h2 id="whats-next">What's next</h2>

<p>With the added configuration collectors, it should be possible to show Grafana (or other) tables with host-to-volume mapping, capacity and few other things, such as finding volumes that are active on a non-preferred controller.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"label"</span><span class="p">,</span> <span class="nv">"currentControllerId"</span><span class="p">,</span> <span class="nv">"preferredControllerId"</span> 
<span class="k">FROM</span> <span class="nv">"config_volumes"</span> 
<span class="k">WHERE</span> <span class="nv">"currentControllerId"</span> <span class="o">!=</span> <span class="nv">"preferredControllerId"</span> 
  <span class="k">AND</span> <span class="nb">time</span> <span class="o">&gt;=</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="n">h</span><span class="p">;</span>
</code></pre></div></div>

<p>I say "should be possible" because I haven't tried to cross-reference the various IDs of these different configuration objects. I think I added all keys that enable that. If some keys that could enable better "end-to-end" mapping turn out to be missing but can be easily added, I'll add them in a minor 3.5 release after that.</p>

<p>Basic "EPA Configuration Template" dashboard was created and is auto-deployed for your fiddling.</p>

<p><img src="/assets/images/epa_350_santricity_config_measurements.png" alt="EPA 3.5.0 configuration measurements" /></p>

<p>Collector's Prometheus endpoint may be welcome by Prometheus users.</p>

<p>Database management (basically "rethinning" of old records) should now work well, but I'll confirm that separately. Also some of the build-in dashboards may need minor edits for time ranges that span into down-sampling time range. I'll take a look at that a month from, now when I inspect how down-sampling/pruning is working.</p>

<p>Other than that, EPA v3 is now in active maintenance. It's now over 2,000 lines long and I don't want to add any new features to it. It should continue to work fine for at least another two-three years, but it's time to focus on version 4.</p>

<p><a href="/2025/08/11/epa-4-beta.html">Version 4</a> is based on much better foundations (InfluxDB 3 with S3 tiering, strong security, AI readiness) and should be easier to develop and use. Because InfluxDB 3 is significantly different from InfluxDB v1 (yes, it's backward-compatible, but not fully), any new users looking to use EPA in non-trivial ways should probably start with EPA 4.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/e-series" class="page__taxonomy-item p-category" rel="tag">e-series</a><span class="sep">, </span>
    
      <a href="/tags/grafana" class="page__taxonomy-item p-category" rel="tag">grafana</a><span class="sep">, </span>
    
      <a href="/tags/influxdb" class="page__taxonomy-item p-category" rel="tag">influxdb</a><span class="sep">, </span>
    
      <a href="/tags/monitoring" class="page__taxonomy-item p-category" rel="tag">monitoring</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/e-series" class="page__taxonomy-item p-category" rel="tag">e-series</a><span class="sep">, </span>
    
      <a href="/categories/projects" class="page__taxonomy-item p-category" rel="tag">projects</a><span class="sep">, </span>
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2025-08-31T00:00:00+08:00">2025-08-31 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=EPA+version+3.5.0%20https%3A%2F%2Fscaleoutsean.github.io%2F2025%2F08%2F31%2Fepa-version-3-dot-5.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2025/08/31/epa-version-3-dot-5.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2025/08/27/epa-version-3-dot-4-dot-1.html" class="pagination--pager" title="EPA version 3.4.1">Previous</a>
    
    
      <a href="/2025/09/04/sfc-solidfire-collector-v2-dot-1-dot-0.html" class="pagination--pager" title="SolidFire Collector v2.1.0">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/26/ibm-block-storage-cis-driver-santricity-fork.html" rel="permalink">IBM Block Storage CSI driver patched for NetApp E-Series
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-26T00:00:00+08:00">2026-02-26 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Unofficial patch to IBM Block CSI driver for E-Series SANtricity storage
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/19/the-shocking-truth-about-ef600-200g-ports.html" rel="permalink">Connecting to 200G HICs on E-Series EF600
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-19T00:00:00+08:00">2026-02-19 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Connecting to EF-Series EF600 200G HIC in DAS mode
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/19/linux-nvme-roce-ef-series.html" rel="permalink">Linux, NVMe/RoCE and HA NetApp EF-Series NVMe-oF storage
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-19T00:00:00+08:00">2026-02-19 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          19 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Linux NVMe/RoCE clients with NetApp EF-Series NVMe-oF
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/15/updated-terraform-provider-solidfire.html" rel="permalink">Terraform provider for SolidFire update for Feb 2026
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-15T00:00:00+08:00">2026-02-15 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Latest and greatest Terraform provider for SolidFire status update (2026/02)
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2026 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
