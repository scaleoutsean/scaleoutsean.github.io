<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            The shocking truth about SolidFire ModifySchedule method | Acting Technologist
      
    </title>
    <meta name="description" content="
     CreateSchedule and ModifySchedule work in mysterious ways
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>The shocking truth about SolidFire ModifySchedule method | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="The shocking truth about SolidFire ModifySchedule method" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="CreateSchedule and ModifySchedule work in mysterious ways" />
<meta property="og:description" content="CreateSchedule and ModifySchedule work in mysterious ways" />
<link rel="canonical" href="https://scaleoutsean.github.io/2025/07/09/the-shocking-truth-about-createschedule.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2025/07/09/the-shocking-truth-about-createschedule.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:image" content="https://scaleoutsean.github.io/assets/images/dude-wtf.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-07-09T00:00:00+08:00" />
<script type="application/ld+json">
{"image":"https://scaleoutsean.github.io/assets/images/dude-wtf.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2025/07/09/the-shocking-truth-about-createschedule.html"},"author":{"@type":"Person","name":"scaleoutSean"},"description":"CreateSchedule and ModifySchedule work in mysterious ways","@type":"BlogPosting","url":"https://scaleoutsean.github.io/2025/07/09/the-shocking-truth-about-createschedule.html","headline":"The shocking truth about SolidFire ModifySchedule method","dateModified":"2025-07-09T00:00:00+08:00","datePublished":"2025-07-09T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">The shocking truth about SolidFire ModifySchedule method</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>09 Jul 2025</span> - <i class="far fa-clock"></i> 


  
  
    5 minute read
  

    </span>
  </div>
  
        <ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#show-me">Show me</a></li>
  <li><a href="#why">Why?</a></li>
  <li><a href="#thoughts">Thoughts</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>As I was trying to add snapshot-related feature to Firemox (see previous post, my Proxmox-SolidFire console thing) I was shocked about the true distinction between Group and “standard” snapshots in SolidFire.</p>

<p>And it shocked me enough to motivate me to blog about it.</p>

<h2 id="show-me">Show me</h2>

<p>If you create a snapshot schedule and use <code class="language-plaintext highlighter-rouge">ListSchedules</code> to view it, you’ll see an item like this (here, a schedule that protects volume ID 167).</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Time Interval"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"hasError"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lastRunStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lastRunTimeStarted"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-07-08T12:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"minutes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"monthdays"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"paused"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"runNextInterval"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"scheduleID"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"scheduleInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evry-4h-keep-3"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"retention"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12:1:00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"snapMirrorLabel"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"167"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"scheduleName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evry-4hr-keep-3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"scheduleType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Snapshot"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startingDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"toBeDeleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"weekdays"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>The key part - related to group vs. single - is <code class="language-plaintext highlighter-rouge">scheduleInfo</code> key which contains this part:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"scheduleInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evry-4h-keep-3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"retention"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12:1:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"snapMirrorLabel"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volumeID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"167"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Makes sense, right? <code class="language-plaintext highlighter-rouge">"volumeID" = "167"</code>. Single volume snapshot.</p>

<p>Now let’s take a look at the same section in a Group Snapshot schedule (there’s no <code class="language-plaintext highlighter-rouge">name</code> because when it’s missing, it’s <code class="language-plaintext highlighter-rouge">auto</code> which is the same as in regular snapshots - snapshots get auto-named by their timestamp). Anyway:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"scheduleInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"snapMirrorLabel"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"retention"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12:1:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volumes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"82"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"83"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Also makes sense, right? <code class="language-plaintext highlighter-rouge">volumes=["81","82"]</code>. It’s a group, of course!</p>

<p>It all made sense until it didn’t. And it didn’t once I used <code class="language-plaintext highlighter-rouge">ModifySchedule</code> on this group snapshot.</p>

<p>I removed a volume, checked the same <code class="language-plaintext highlighter-rouge">scheduleInfo</code> section and … my app crashed. I looked and …</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"scheduleInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"snapMirrorLabel"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volumeID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"83"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><img src="/assets/images/dude-wtf.png" alt="Dude, WTF?" /></p>

<p><code class="language-plaintext highlighter-rouge">tldr:</code></p>

<ul>
  <li>By removing the second volume, you turn a Group Snapshot into a “standard” snapshot</li>
  <li>By turning a Group Snapshot to “standard” snapshot, you change the JSON key that describes that schedule from <code class="language-plaintext highlighter-rouge">volumes</code> to <code class="language-plaintext highlighter-rouge">volumeID</code></li>
  <li>By turning a Group Snapshot to “standard” snapshot, the value changes from a list of strings to a string</li>
  <li>Any standard snapshot can likewise become a Group Snapshot, as long as you have at least two volumes in the cluster, and the same things change in reverse (<code class="language-plaintext highlighter-rouge">volumeID</code> becomes <code class="language-plaintext highlighter-rouge">volumes</code>, and the volume ID string becomes one of strings in a list)</li>
</ul>

<p>Obviously, this became obvious only after I repeatedly hit, and then investigated “inexplicable” bugs in my code. “Repeatedly” because at first I thought I didn’t see it correctly the first time, then later I realized that “it lives”.</p>

<h2 id="why">Why?</h2>

<p>I could probably ask around, but it’s not <em>that</em> important so I’ll speculate:</p>

<ul>
  <li>We know that initially SolidFire didn’t have group snapshots. At the time <code class="language-plaintext highlighter-rouge">"volumeID" : "82"</code> in JSON made perfect sense.</li>
  <li>Once Group Snapshot became a thing, I imagine the API guys had a problem on their hands. What’s less bad: go with the old (<code class="language-plaintext highlighter-rouge">"volumeID" : "82,83"</code>) or embrace the new (add <code class="language-plaintext highlighter-rouge">"volumes": ["82","83"]</code> on-demand and also flip-on-demand)?</li>
</ul>

<p>The first choice would not break automation that looks for the key <code class="language-plaintext highlighter-rouge">volumeID</code>. But it would still break them if they didn’t happen to handle the lack of this key gracefully (and it’d be lacking as soon as someone added the 2nd snapshot to the same schedule).</p>

<p>The second choice “makes sense”, but since snapshot-type schedules are essentially the same for Group and stand-alone, they also flip from one to the other, so even the first group of existing plugins or scripts couldn’t be spared - it would need to be changed to handle the ability of an <em>old</em> snapshot schedule to <em>flip</em> from one to the other kind.</p>

<p>It seems to me the only situation in which nothng would break would be if the user knew about this and refrained from <em>using</em> the new feature (or, the new API version) until their automation or plugin were upgraded. If they kept using the old API endpoint (e.g. /json-rpc/9.0 or something along those lines), the group snapshots couldn’t be created.</p>

<h2 id="thoughts">Thoughts</h2>

<p>This is the first time I noticed a breaking API change in SolidFire that I didn’t notice at the time. What broke was the guarantee that a snapshot schedule would have that <code class="language-plaintext highlighter-rouge">volumeID</code> key.</p>

<p>I haven’t looked at the API release notes to see if this was documented at the time, but I assume it was - it’s just that almost no non-programmer reads that stuff. Even if I read it, I wouldn’t have thought much of it at the time.</p>

<p>Most people assume because new features (and API methods) are added and old retained, that you don’t need to change your code because the old feature is there and you don’t use the new one. That’s not how it always works, as we can see from this example.</p>

<p>But if you have applications you’d prefer to not break, you have to be careful even when using a versioned API. It doesn’t (yet) automagically update your application.</p>

<p>Without knowing any of the details not in public domain, I’d prefer if they added another type of schedule. As you can see in the JSON at the top, snapshots were (and are) this type: <code class="language-plaintext highlighter-rouge">"scheduleType": "Snapshot"</code>. I think adding <code class="language-plaintext highlighter-rouge">"scheduleType": "groupSnapshot"</code> would have been a better choice, although that would probably have required even deeper changes (on a level where this distinction probably doesn’t really exist) to also handle this new type of schedule.</p>

<p>By the way, I’m also curious why volume ID is always a string in both group and regular snapshots. The reason for that must precede me (I started working with SolidFire around version 9) but I <em>think</em> early on they may have started with volume names, and since those could be duplicate (still can; only volume IDs are distinc) and people make typos and copy-paste mistakes, they flipped to <code class="language-plaintext highlighter-rouge">volumeID</code> and retained that string value.</p>

<h2 id="conclusion">Conclusion</h2>

<p>It took me almost a decade to find out about this. This reminds me of another blog post from several years ago, when I discovered that elements of group snapshots could be found under Snapshots &gt; Members in the Web UI.</p>

<p>In Firemox users can add volumes to a schedule which makes them flip from group to regular and back, which means a workflow can start with one set of parameters and value types and end up with another. Interesing stuff…</p>

      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#automation">automation</a>
      &nbsp; 
    
      <a href="
      /categories/#solidfire">solidfire</a>
       
    
  </span>
</div>
    

  
    <div>
      <h3>Related Posts</h3>
      <ul>
      
        <li><a href="/2023/04/01/using-solidfire-snapshot-attributes.html">Using snapshot attributes in SolidFire</a></li>
      
        <li><a href="/2023/10/05/snapshots-and-consistency-groups-with-netapp-e-series.html">Stand-alone and Consistency Group snapshots on NetApp E-Series</a></li>
      
        <li><a href="/2023/11/20/netapp-solidfire-calculate-snapshot-capacity-utilization.html">Calculate snapshot capacity utilization on NetApp SolidFire</a></li>
      
        <li><a href="/2024/06/16/snapshot-schedules-in-solidfire.html">Snapshots and snapshot schedules in NetApp SolidFire</a></li>
      
        <li><a href="/2023/10/29/consistency-group-monitoring-in-eseries.html">Monitor Snapshot Consistency Groups of NetApp E-Series SANtricity OS</a></li>
      
      </ul>
    </div>
  

    
  </div><footer class= "footer">
    <p>2025-08-11 23:30 </p>
    <p>Copyright © 2025 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
