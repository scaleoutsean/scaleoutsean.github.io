<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            Firemox - an anti-plugin for Proxmox PVE with NetApp SolidFire | Acting Technologist
      
    </title>
    <meta name="description" content="
     It works, kind of
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Firemox - an anti-plugin for Proxmox PVE with NetApp SolidFire | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Firemox - an anti-plugin for Proxmox PVE with NetApp SolidFire" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="It works, kind of" />
<meta property="og:description" content="It works, kind of" />
<link rel="canonical" href="https://scaleoutsean.github.io/2025/07/07/firemox.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2025/07/07/firemox.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:image" content="https://scaleoutsean.github.io/assets/images/firemox-04-utilities.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-07-07T00:00:00+08:00" />
<script type="application/ld+json">
{"image":"https://scaleoutsean.github.io/assets/images/firemox-04-utilities.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2025/07/07/firemox.html"},"author":{"@type":"Person","name":"scaleoutSean"},"description":"It works, kind of","@type":"BlogPosting","url":"https://scaleoutsean.github.io/2025/07/07/firemox.html","headline":"Firemox - an anti-plugin for Proxmox PVE with NetApp SolidFire","dateModified":"2025-07-07T00:00:00+08:00","datePublished":"2025-07-07T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">Firemox - an anti-plugin for Proxmox PVE with NetApp SolidFire</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>07 Jul 2025</span> - <i class="far fa-clock"></i> 


  
  
    6 minute read
  

    </span>
  </div>
  
        <ul>
  <li><a href="#background">Background</a></li>
  <li><a href="#firemox">Firemox</a></li>
  <li><a href="#what-it-does-and-doesnt">What it does, and doesn’t</a></li>
  <li><a href="#scope-creep">Scope creep</a></li>
  <li><a href="#known-issues">Known issues</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="background">Background</h2>

<p>In <a href="/2025/06/24/initial-exploration-solidfire-proxmox-plugin.html">“Do we need a NetApp SolidFire plugin for Proxmox”</a> in looked into storage plugins for Proxmox and explained why I didn’t like the idea of using the PVE way.</p>

<p>It’s taken me since then - approximately three weekends and two weeks of evenings - to get somewhere with a different approach - an external “management client” for NetApp SolidFire and Proxmox PVE.</p>

<p>Why I like this approach:</p>

<ul>
  <li>PowerShell: I wrote it in PowerShell and avoided the use of Perl and “CLI”</li>
  <li>Versatility: the same approach - and code - ought to work well with some other “alternative” virtualization platforms</li>
  <li>Simplicity: No need to have a tool that runs <em>inside</em> of Proxmox PVE and risks getting broken every time Promox is updated</li>
</ul>

<p>I need to clean up the code, fix some bugs, write some documentation, but I don’t plan to change it much so I thought to post a bit about it now.</p>

<h2 id="firemox">Firemox</h2>

<p>“Firemox” reminds me of Firefox: it works, but has its fair share of annoyances.</p>

<p>So I picked something similar.</p>

<p>Unlike Firefox, Firemox does not spy on its users and is much more secure. More about it in the README once I get it on Github.</p>

<h2 id="what-it-does-and-doesnt">What it does, and doesn’t</h2>

<p>Essentially, it helps SolidFire users get here:</p>

<p><img src="/assets/images/firemox-01-vg-on-iscsi.png" alt="Consistent storage object naming" /></p>

<p>What does that mean?</p>

<ul>
  <li>Your SolidFire iSCSI devices are used by PVE as iSCSI pools</li>
  <li>PVE creates LVM devices - one VG per one SolidFire LUN per each - on those iSCSI pools</li>
  <li>You get consistency in the process (<code class="language-plaintext highlighter-rouge">&lt;pve-dc&gt;-&lt;solidfire-clustername&gt;-&lt;000&gt;</code>, prefixed with <code class="language-plaintext highlighter-rouge">vg-</code> and <code class="language-plaintext highlighter-rouge">lvm-</code> when appropriate)</li>
  <li>You can put it together and tear it apart, VG by VG, LVM by LVM, and storage pool by storage pool</li>
  <li>It’s not slow</li>
</ul>

<p>To paraphrase that ad for compliance software, it’s a storage plugin that doesn’t suck… much.</p>

<p>Another - from Firemox CLI - look at that end-to-end consistency:</p>

<p><img src="/assets/images/firemox-02-pve-solidfire-map.png" alt="End-to-end consistency" /></p>

<p>Or another, with a view of all SolidFire-related storage pools broken down by iSCSI and iSCSI-backed LVM pools.</p>

<p><img src="/assets/images/firemox-03-storage-objects.png" alt="iSCSI pools and LVM configuration" /></p>

<p>And yes, it is possible to have 4 iSCSI pools and just 1 LVM, which is why the first view has a different purpose: it lets us see which VG and LVM configuration maps to which LUN, whereas in the iSCSI/LVM screenshot we could have three iSCSI LUNs and one LVM configuration.</p>

<h2 id="scope-creep">Scope creep</h2>

<p>As I’ve started, I just wanted one-two features, then three and so on. This (possibly) explains the messy way I coded it - the lack of planning is obvious (and that’s why cleaning it up will take days).</p>

<p>But having an external “not plugin” allowed me to do whatever I wanted.</p>

<p>Aside from “config” steps (where I configure SolidFire storage account, QoS, volumes and PVE iSCSI client), this is the main part of it where PVE-related stuff is exposed.</p>

<p><img src="/assets/images/firemox-04-utilities.png" alt="Firemox utilities" /></p>

<ul>
  <li>View SolidFire LUNs exposed to PVE cluster</li>
  <li>View PVE VGs that use SolidFire iSCSI pools</li>
  <li>Create PVE iSCSI and LVM storage backed by SolidFire</li>
  <li>Get a resource mapping (PVE&lt;-&gt;SolidFire) and network configuration</li>
  <li>Remove PVE VGs and iSCSI pools (SolidFire volumes can be removed in another area of Firemox)</li>
</ul>

<p>What I decided to <em>not</em> develop was the functionality related to Promox storage QoS or, more precisely, integration of that with SolidFire’s storage QoS. Actually, some of it is already in the Firemox code, but I decided to not finish it because it’s really not my business.</p>

<p>From a user’s perspective, it’d be nice if I could - similarly to how SolidFire and VMware storage policies worke - where I can automatically re-type QoS of my storage volumes depending on how individual VMs and containers were configured. Okay, that can be done.</p>

<p>But why do it when my array makes it easy (it’s in Firemox) to retype a volume, while PVE has absolutely no tools or APIs for that? There’s nothing. I know how to add up the various storage QoS settings from VMs and LXC containers, but why? Let them figure it out and write a proper API, then I’ll think about using it. (Or not, since by then SolidFire will enter end-of-support.)</p>

<p>In Firemox, I can retype SolidFire volumes, “up” or “down”, which is the same users can do with SolidFire plugin for vCenter (and still remains elusive to Trident users - I <a href="/2024/06/19/trident-policy-sucker-for-solidfire-backends.html">would have taken care of that</a> for SolidFire if I knew anyone who needed it, but I never did.)</p>

<h2 id="known-issues">Known issues</h2>

<p>The gray question mark issue is when you add a storage resource (such as LVM configuration on shared iSCSI storage) to a PVE cluster and, while the shared storage resource appears on all cluster members, on some nodes there’s a small gray question mark next to that resource.</p>

<p>I’ve seen this on the Internet with PVE and other shared storage, and I’ve seen it on PVE with SolidFire as well. Rescanning storage doesn’t help, but a rolling-reboot of other nodes (the one used to add storage doesn’t have that issue) does.</p>

<p>It’s not a huge issue for non-mission critical environments, especially since (unlike VMFS) in PVE one host uses one LVM which has one VG, but PVE should fix that. But it may be Corosync or whatever-related, and they’ll probably just wait until others fix their own code.</p>

<p>A rolling-reboot affects existing VMs and CTs, so those have to be live- (or cold-, if live doesn’t work) migrated before rolling reboot. To minimize that, add two or more volumes at a time, I guess, since SolidFire by default creates thin volumes - it doesn’t cost anything.</p>

<p>Other than that, I suppose I didn’t use PVE long enough to find more problems. At the same time I don’t expect that there would be “SolidFire-only” problems.</p>

<h2 id="conclusion">Conclusion</h2>

<p>I think I’ve done just enough to make Firemox desirable in a a NetApp SolidFire and Proxmox PVE my home lab. I believe it’s good enough for that.</p>

<p>Yes, I too can “write a shorter PVE-based Bash script that work faster”, but that’s just the PVE part. You’d still need a way to communicate with the SolidFire API, so… Would you call the SolidFire API from Python that would be called from Bash?</p>

<p>I’m convinced there’s no better way to manage PVE with SolidFire for home labs and small users. It’s PowerShell 7, API-only, and it works on Windows, OS X and Linux and the UI is rich enough to not be too “Spartan”.</p>

<p>Halfway through I thought about rewriting in Python (maybe with a Web UI) because I did run into some console bugs I couldn’t find a way to solve. I decided to persist and keep it as a client and I think it paid back.</p>

      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#automation">automation</a>
      &nbsp; 
    
      <a href="
      /categories/#solidfire">solidfire</a>
      &nbsp; 
    
      <a href="
      /categories/#virtualization">virtualization</a>
       
    
  </span>
</div>
    

  
    <div>
      <h3>Related Posts</h3>
      <ul>
      
        <li><a href="/2025/06/24/initial-exploration-solidfire-proxmox-plugin.html">Do we need a NetApp SolidFire plugin for Proxmox</a></li>
      
        <li><a href="/2022/04/05/proxmox-solidfire.html">Consume SolidFire storage from Proxmox hosts</a></li>
      
        <li><a href="/2024/02/11/add-solidfire-storage-from-kvm.html">Add NetApp SolidFire iSCSI storage to KVM</a></li>
      
        <li><a href="/2024/02/07/migrate-netapp-hci-from-vmware.html">How to change NetApp HCI from VMware to alternatives</a></li>
      
        <li><a href="/2025/06/29/solidfire-with-powershell-7.html">Connecting to SolidFire from PowerShell 7.5</a></li>
      
      </ul>
    </div>
  

    
  </div><footer class= "footer">
    <p>2025-07-07 11:54 </p>
    <p>Copyright © 2025 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
