<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Increase size of SolidFire volumes paired for replication | Acting Technologist</title>
<meta name="description" content="How to increase total size of SolidFire volumes paired for replication">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Increase size of SolidFire volumes paired for replication">
<meta property="og:url" content="https://scaleoutsean.github.io/2024/06/28/growing-solidfire-volumes-paired-for-replication.html">


  <meta property="og:description" content="How to increase total size of SolidFire volumes paired for replication">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Increase size of SolidFire volumes paired for replication">
  <meta name="twitter:description" content="How to increase total size of SolidFire volumes paired for replication">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2024/06/28/growing-solidfire-volumes-paired-for-replication.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2024-06-28T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2024/06/28/growing-solidfire-volumes-paired-for-replication.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects/"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://scaleoutsean.github.io/" itemprop="url">scaleoutSean</a>
    </h3>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Increase size of SolidFire volumes paired for replication">
    <meta itemprop="description" content="  Introduction  Situation  Procedure  Kubernetes  Conclusion  Appendix A - upsize remote and resize in Longhorny">
    <meta itemprop="datePublished" content="2024-06-28T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2024/06/28/growing-solidfire-volumes-paired-for-replication.html" itemprop="url">Increase size of SolidFire volumes paired for replication
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2024-06-28T00:00:00+08:00">2024-06-28 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#situation">Situation</a></li>
  <li><a href="#procedure">Procedure</a></li>
  <li><a href="#kubernetes">Kubernetes</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
  <li><a href="#appendix-a---upsize-remote-and-resize-in-longhorny">Appendix A - upsize remote and resize in Longhorny</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>You've paired two volumes at the source and the destination cluster, and now you need to grow their size.</p>

<p>This post reviews how to do that correctly on SolidFire.</p>

<h2 id="situation">Situation</h2>

<p>Source: volume ID 136 (5GB) is asynchronously replicated to the same-sized "target" volume at Destination.</p>

<p><img src="/assets/images/solidfire-volume-pairing-at-source.png" alt="" /></p>

<p>Destination: incoming Async replication from the source.</p>

<p><img src="/assets/images/solidfire-volume-pairing-at-destination.png" alt="" /></p>

<p>The NetApp TR (TR-4741) contains this gem to help you out:</p>

<blockquote>
  <p>The source volume should be of equal size to the target volume. If the size of the source and target volumes do not match, replication transitions to an error state.</p>
</blockquote>

<p>Uh, okayâ€¦ Good to know, Pete. But 95% of the readers must be wondering how to <em>avoid</em> this problem when they need to grow a replicated volume.</p>

<p><img src="/assets/images/solidfire-volume-pairing-useless-advice.png" alt="" /></p>

<p>Clearly that's too much to ask for: it's an exercise for the reader, as they say.</p>

<h2 id="procedure">Procedure</h2>

<p>We'll try the following:</p>

<ul>
  <li>Suspend replication at source</li>
  <li>Grow target volume size</li>
  <li>Grow source volume size</li>
  <li>(Optional) use filesystem tools to grow filesystem to new volume size</li>
  <li>Resume replication at source</li>
</ul>

<p>Because the volumes are already paired, we only need to use <a href="https://docs.netapp.com/us-en/element-software/api/reference_element_api_volume_pairing_order_of_operations.html">"ModifyVolumePair"</a> which RTFM says needs only be executed at the source.</p>

<p>View volume pairing by looking it up by volume ID (136) at the source. Status is "active" which tells us the pairing relationship is fine, so I won't check from the other side.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PS</span><span class="w"> </span><span class="nx">/home/sean</span><span class="err">&gt;</span><span class="w"> </span><span class="nx">Get-SFVolumePair</span><span class="w"> </span><span class="nt">-SourceVolumeID</span><span class="w"> </span><span class="nx">136</span><span class="w"> 

</span><span class="n">VolumeID</span><span class="w">                    </span><span class="p">:</span><span class="w"> </span><span class="nx">136</span><span class="w">
</span><span class="n">Name</span><span class="w">                        </span><span class="p">:</span><span class="w"> </span><span class="nx">sqldb</span><span class="w">
</span><span class="n">AccountID</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="nx">13</span><span class="w">
</span><span class="n">CreateTime</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="nx">2024-03-30T15:48:37Z</span><span class="w">
</span><span class="n">VolumeConsistencyGroupUUID</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="nx">037c2c49-d6cc-4a0b-9b82-4cb287634c33</span><span class="w">
</span><span class="n">VolumeUUID</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="nx">52707066-3f85-44a6-a2a2-ebb8e7bc0ba0</span><span class="w">
</span><span class="n">EnableSnapMirrorReplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nx">False</span><span class="w">
</span><span class="n">Status</span><span class="w">                      </span><span class="p">:</span><span class="w"> </span><span class="nx">active</span><span class="w">
</span><span class="n">Access</span><span class="w">                      </span><span class="p">:</span><span class="w"> </span><span class="nx">readWrite</span><span class="w">
</span><span class="n">Enable512e</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="nx">True</span><span class="w">
</span><span class="n">Iqn</span><span class="w">                         </span><span class="p">:</span><span class="w"> </span><span class="nx">iqn.2010-01.com.solidfire:wcwb.sqldb.136</span><span class="w">
</span><span class="n">ScsiEUIDeviceID</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="nx">7763776200000088f47acc0100000000</span><span class="w">
</span><span class="n">ScsiNAADeviceID</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="nx">6f47acc1000000007763776200000088</span><span class="w">
</span><span class="n">Qos</span><span class="w">                         </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"MinIOPS"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="s2">"MaxIOPS"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w"> </span><span class="s2">"BurstIOPS"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w"> </span><span class="s2">"BurstTime"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="p">}</span><span class="w">
</span><span class="n">QosPolicyID</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="nx">1</span><span class="w">
</span><span class="n">VolumeAccessGroups</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="mi">4</span><span class="p">}</span><span class="w">
</span><span class="n">VolumePairs</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">sql-replica</span><span class="p">}</span><span class="w">
</span><span class="n">DeleteTime</span><span class="w">                  </span><span class="p">:</span><span class="w"> 
</span><span class="n">PurgeTime</span><span class="w">                   </span><span class="p">:</span><span class="w"> 
</span><span class="n">LastAccessTime</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="nx">2024-06-16T16:07:04Z</span><span class="w">
</span><span class="n">LastAccessTimeIO</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="nx">2024-06-16T16:07:04Z</span><span class="w">
</span><span class="n">SliceCount</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="nx">1</span><span class="w">
</span><span class="n">TotalSize</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="nx">5000658944</span><span class="w">
</span><span class="n">BlockSize</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="nx">4096</span><span class="w">
</span><span class="n">VirtualVolumeID</span><span class="w">             </span><span class="p">:</span><span class="w"> 
</span><span class="n">Attributes</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="p">{[</span><span class="n">SfQosId</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]}</span><span class="w">
</span><span class="n">CurrentProtectionScheme</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="nx">singleHelix</span><span class="w">
</span><span class="n">PreviousProtectionScheme</span><span class="w">    </span><span class="p">:</span><span class="w"> 
</span><span class="n">FifoSize</span><span class="w">                    </span><span class="p">:</span><span class="w"> </span><span class="nx">5</span><span class="w">
</span><span class="n">MinFifoSize</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="nx">0</span><span class="w">
</span></code></pre></div></div>

<p>Modify the relationship by manually pausing replication at the source.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Set-SFVolumePair</span><span class="w"> </span><span class="nt">-VolumeID</span><span class="w"> </span><span class="nx">136</span><span class="w"> </span><span class="nt">-PausedManual</span><span class="p">:</span><span class="nv">$True</span><span class="w"> 
</span></code></pre></div></div>

<p>Now we can increase the size of both the source and target. Total size given above is 5000658944 bytes. Let's add 4,000 in 4096 byte blocks = 16384000 bytes. New size: 5000658944 + 16384000 = 5017042944 bytes.</p>

<p>Resizing the destination volume is <strong>the only operation that needs to be done at the destination</strong>.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PS</span><span class="w"> </span><span class="nx">/home/sean</span><span class="err">&gt;</span><span class="w"> </span><span class="nx">Set-SFVolume</span><span class="w"> </span><span class="nt">-VolumeID</span><span class="w"> </span><span class="nx">11</span><span class="w"> </span><span class="nt">-TotalSize</span><span class="w"> </span><span class="nx">5017042944</span><span class="w">

</span><span class="n">Confirm</span><span class="w">
</span><span class="nx">Are</span><span class="w"> </span><span class="nx">you</span><span class="w"> </span><span class="nx">sure</span><span class="w"> </span><span class="nx">you</span><span class="w"> </span><span class="nx">want</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">perform</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">action</span><span class="nf">?</span><span class="w">
</span><span class="nx">Performing</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">operation</span><span class="w"> </span><span class="s2">"SetSFVolume"</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">target</span><span class="w"> </span><span class="s2">"192.168.1.34 {"</span><span class="nx">VolumeID</span><span class="s2">" = 11}"</span><span class="o">.</span><span class="w">
</span><span class="p">[</span><span class="n">Y</span><span class="p">]</span><span class="w"> </span><span class="n">Yes</span><span class="w">  </span><span class="p">[</span><span class="n">A</span><span class="p">]</span><span class="w"> </span><span class="n">Yes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">All</span><span class="w">  </span><span class="p">[</span><span class="n">N</span><span class="p">]</span><span class="w"> </span><span class="n">No</span><span class="w">  </span><span class="p">[</span><span class="n">L</span><span class="p">]</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">All</span><span class="w">  </span><span class="p">[</span><span class="n">S</span><span class="p">]</span><span class="w"> </span><span class="n">Suspend</span><span class="w">  </span><span class="p">[</span><span class="nf">?</span><span class="p">]</span><span class="w"> </span><span class="n">Help</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="s2">"Y"</span><span class="p">):</span><span class="w"> </span><span class="n">y</span><span class="w">

</span><span class="n">VolumeID</span><span class="w">                    </span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w">
</span><span class="n">Name</span><span class="w">                        </span><span class="p">:</span><span class="w"> </span><span class="n">sql</span><span class="nt">-replica</span><span class="w">
</span><span class="n">AccountID</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="n">CreateTime</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="mi">2024</span><span class="nt">-06-14T16</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">26</span><span class="n">Z</span><span class="w">
</span><span class="nx">VolumeConsistencyGroupUUID</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="nx">c413905b-54c5-48d1-80a2-e4fa563b59a8</span><span class="w">
</span><span class="n">VolumeUUID</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="n">c74bf578</span><span class="nt">-c7d8-4959-9562-cce73a62a86d</span><span class="w">
</span><span class="n">EnableSnapMirrorReplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">False</span><span class="w">
</span><span class="n">Status</span><span class="w">                      </span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w">
</span><span class="n">Access</span><span class="w">                      </span><span class="p">:</span><span class="w"> </span><span class="n">replicationTarget</span><span class="w">
</span><span class="n">Enable512e</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="n">True</span><span class="w">
</span><span class="n">Iqn</span><span class="w">                         </span><span class="p">:</span><span class="w"> </span><span class="n">iqn.</span><span class="mi">2010</span><span class="nt">-01</span><span class="o">.</span><span class="nf">com</span><span class="o">.</span><span class="nf">solidfire</span><span class="p">:</span><span class="n">xh67.sql</span><span class="nt">-replica</span><span class="o">.</span><span class="nf">11</span><span class="w">
</span><span class="n">ScsiEUIDeviceID</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="mi">786836370000000</span><span class="n">bf47acc0100000000</span><span class="w">
</span><span class="n">ScsiNAADeviceID</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="n">f47acc100000000786836370000000b</span><span class="w">
</span><span class="n">Qos</span><span class="w">                         </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"MinIOPS"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="s2">"MaxIOPS"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1500</span><span class="p">,</span><span class="w"> </span><span class="s2">"BurstIOPS"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1500</span><span class="p">,</span><span class="w"> </span><span class="s2">"BurstTime"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="p">}</span><span class="w">
</span><span class="n">QosPolicyID</span><span class="w">                 </span><span class="p">:</span><span class="w"> 
</span><span class="n">VolumeAccessGroups</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="n">VolumePairs</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">sqldb</span><span class="p">}</span><span class="w">
</span><span class="n">DeleteTime</span><span class="w">                  </span><span class="p">:</span><span class="w"> 
</span><span class="n">PurgeTime</span><span class="w">                   </span><span class="p">:</span><span class="w"> 
</span><span class="n">LastAccessTime</span><span class="w">              </span><span class="p">:</span><span class="w"> 
</span><span class="n">LastAccessTimeIO</span><span class="w">            </span><span class="p">:</span><span class="w"> 
</span><span class="n">SliceCount</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="nx">1</span><span class="w">
</span><span class="n">TotalSize</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="nx">5017436160</span><span class="w">

</span></code></pre></div></div>

<p>Now repeat this <strong>on the source side</strong> for the pair, where the volume is readWrite.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PS</span><span class="w"> </span><span class="nx">/home/sean</span><span class="err">&gt;</span><span class="w"> </span><span class="nx">Set-SFVolume</span><span class="w"> </span><span class="nt">-VolumeID</span><span class="w"> </span><span class="nx">136</span><span class="w"> </span><span class="nt">-TotalSize</span><span class="w"> </span><span class="nx">5017042944</span><span class="w">                  

</span><span class="n">Confirm</span><span class="w">
</span><span class="nx">Are</span><span class="w"> </span><span class="nx">you</span><span class="w"> </span><span class="nx">sure</span><span class="w"> </span><span class="nx">you</span><span class="w"> </span><span class="nx">want</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">perform</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">action</span><span class="nf">?</span><span class="w">
</span><span class="nx">Performing</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">operation</span><span class="w"> </span><span class="s2">"SetSFVolume"</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">target</span><span class="w"> </span><span class="s2">"192.168.1.30 {"</span><span class="nx">VolumeID</span><span class="s2">" = 136}"</span><span class="o">.</span><span class="w">
</span><span class="p">[</span><span class="n">Y</span><span class="p">]</span><span class="w"> </span><span class="n">Yes</span><span class="w">  </span><span class="p">[</span><span class="n">A</span><span class="p">]</span><span class="w"> </span><span class="n">Yes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">All</span><span class="w">  </span><span class="p">[</span><span class="n">N</span><span class="p">]</span><span class="w"> </span><span class="n">No</span><span class="w">  </span><span class="p">[</span><span class="n">L</span><span class="p">]</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">All</span><span class="w">  </span><span class="p">[</span><span class="n">S</span><span class="p">]</span><span class="w"> </span><span class="n">Suspend</span><span class="w">  </span><span class="p">[</span><span class="nf">?</span><span class="p">]</span><span class="w"> </span><span class="n">Help</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="s2">"Y"</span><span class="p">):</span><span class="w"> </span><span class="n">Y</span><span class="w"> 

</span><span class="n">VolumeID</span><span class="w">                    </span><span class="p">:</span><span class="w"> </span><span class="mi">136</span><span class="w">
</span><span class="n">Name</span><span class="w">                        </span><span class="p">:</span><span class="w"> </span><span class="n">sqldb</span><span class="w">
</span><span class="n">AccountID</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="w">
</span><span class="n">CreateTime</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="mi">2024</span><span class="nt">-03-30T15</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">37</span><span class="n">Z</span><span class="w">
</span><span class="nx">VolumeConsistencyGroupUUID</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="nx">037c2c49-d6cc-4a0b-9b82-4cb287634c33</span><span class="w">
</span><span class="n">VolumeUUID</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="mi">52707066</span><span class="nt">-3f85-44a6-a2a2-ebb8e7bc0ba0</span><span class="w">
</span><span class="n">EnableSnapMirrorReplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">False</span><span class="w">
</span><span class="n">Status</span><span class="w">                      </span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w">
</span><span class="n">Access</span><span class="w">                      </span><span class="p">:</span><span class="w"> </span><span class="n">readWrite</span><span class="w">
</span><span class="n">Enable512e</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="n">True</span><span class="w">
</span><span class="n">Iqn</span><span class="w">                         </span><span class="p">:</span><span class="w"> </span><span class="n">iqn.</span><span class="mi">2010</span><span class="nt">-01</span><span class="o">.</span><span class="nf">com</span><span class="o">.</span><span class="nf">solidfire</span><span class="p">:</span><span class="n">wcwb.sqldb.</span><span class="mi">136</span><span class="w">
</span><span class="n">ScsiEUIDeviceID</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="mi">7763776200000088</span><span class="n">f47acc0100000000</span><span class="w">
</span><span class="n">ScsiNAADeviceID</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="n">f47acc1000000007763776200000088</span><span class="w">
</span><span class="n">Qos</span><span class="w">                         </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"MinIOPS"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="s2">"MaxIOPS"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w"> </span><span class="s2">"BurstIOPS"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w"> </span><span class="s2">"BurstTime"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="p">}</span><span class="w">
</span><span class="n">QosPolicyID</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="n">VolumeAccessGroups</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="mi">4</span><span class="p">}</span><span class="w">
</span><span class="n">VolumePairs</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">sql-replica</span><span class="p">}</span><span class="w">
</span><span class="n">DeleteTime</span><span class="w">                  </span><span class="p">:</span><span class="w"> 
</span><span class="n">PurgeTime</span><span class="w">                   </span><span class="p">:</span><span class="w"> 
</span><span class="n">LastAccessTime</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="nx">2024-06-16T16:07:04Z</span><span class="w">
</span><span class="n">LastAccessTimeIO</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="nx">2024-06-16T16:07:04Z</span><span class="w">
</span><span class="n">SliceCount</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="nx">1</span><span class="w">
</span><span class="n">TotalSize</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="nx">5017436160</span><span class="w">

</span></code></pre></div></div>

<p>Now each side in the pair has the identical and larger TotalSize property (5017436160 bytes).</p>

<p>We could immediately resume replication, but in most cases you will want to resize the filesystem first. I mean at the source, obviously, because the destination is a replica at there's no need to touch contents of the replica volume.</p>

<p>Technically you can resume replication now and resize the filesystem later, it's just that the added capacity won't be visible to filesystem until the filesystem has been resized.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PS</span><span class="w"> </span><span class="nx">/home/sean</span><span class="err">&gt;</span><span class="w"> </span><span class="nx">Get-SFVolumePair</span><span class="w"> </span><span class="nt">-SourceVolumeID</span><span class="w"> </span><span class="nx">136</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Select-Object</span><span class="w"> </span><span class="nt">-Property</span><span class="w"> </span><span class="nx">TotalSize</span><span class="w">

 </span><span class="n">TotalSize</span><span class="w">
 </span><span class="o">---------</span><span class="w">
</span><span class="mi">5017436160</span><span class="w">

</span><span class="n">PS</span><span class="w"> </span><span class="nx">/home/sean</span><span class="err">&gt;</span><span class="w"> </span><span class="nx">Set-SFVolumePair</span><span class="w"> </span><span class="nt">-VolumeID</span><span class="w"> </span><span class="nx">136</span><span class="w"> </span><span class="nt">-PausedManual</span><span class="p">:</span><span class="nv">$False</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">-PausedManual:$False</code> is enough to unpause the state and minutes later replication should be back to normal.</p>

<h2 id="kubernetes">Kubernetes</h2>

<p>In a Kubernetes environment, if resizing is allowed in the StorageClass, editing the PVC claim is enough to resize the volume and filesystem at the source. But the remote volume would still remain undersized, so that the volume pair's replication would enter error state. To avoid that, you need to resize the destination volume as well.</p>

<p>Because in Trident CSI PVCs you probably use larger units like 20G or 20Gi rather than bytes (which is allowed, but not common), you can use the SoliFire UI to pick the same size at the destination, or maybe a CLI utility that changes the destination first and gives you the amount of bytes to use in PVC at the source side. That way you don't have to use the UI if you can accomplish everything from the CLI.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Whether it's Kubernetes or something else, it's best to first manually pause replication for the volume at the source, resize the volume at the destination, then at the source, and finally resume volume replication from the source.</p>

<p>You may also want to confirm each cluster has enough capacity to allow new storage growth, and take a snapshot with few hours of retention time before each step described above.</p>

<h2 id="appendix-a---upsize-remote-and-resize-in-longhorny">Appendix A - upsize remote and resize in Longhorny</h2>

<p>Two actions have been added to <a href="https://github.com/scaleoutsean/longhorny">Longhorny</a>:</p>

<ul>
  <li>resize</li>
  <li>upsize-remote</li>
</ul>

<p>Resize adds the specified amount in bytes to both paired volumes. Longhorny can't resize the filesystem for the user, so that part has to be done manually (only at the source side, since the destination will receive updated volume data thanks to replication).</p>

<p>Upsize remote, as the name suggests, looks up the source volume size, grows the destination volume to the same size, and resumes replication. Its main use case is to make it easy to recover replication relationships broken by Trident CSI volume expand feature.</p>


        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/api" class="page__taxonomy-item p-category" rel="tag">api</a><span class="sep">, </span>
    
      <a href="/tags/devops" class="page__taxonomy-item p-category" rel="tag">devops</a><span class="sep">, </span>
    
      <a href="/tags/dr" class="page__taxonomy-item p-category" rel="tag">dr</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/powershell" class="page__taxonomy-item p-category" rel="tag">powershell</a><span class="sep">, </span>
    
      <a href="/tags/replication" class="page__taxonomy-item p-category" rel="tag">replication</a><span class="sep">, </span>
    
      <a href="/tags/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/automation" class="page__taxonomy-item p-category" rel="tag">automation</a><span class="sep">, </span>
    
      <a href="/categories/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a><span class="sep">, </span>
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2024-06-28T00:00:00+08:00">2024-06-28 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Increase+size+of+SolidFire+volumes+paired+for+replication%20https%3A%2F%2Fscaleoutsean.github.io%2F2024%2F06%2F28%2Fgrowing-solidfire-volumes-paired-for-replication.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2024/06/28/growing-solidfire-volumes-paired-for-replication.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2024/06/20/snapshot-and-schedules-in-sfc.html" class="pagination--pager" title="Snapshots and snapshot schedules in SFC v2">Previous</a>
    
    
      <a href="/2024/07/02/solidfire-volume-attributes-from-trident-and-other-apps.html" class="pagination--pager" title="Extract SolidFire volume attributes created by Trident or other apps">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/11/epa-4-beta.html" rel="permalink">E-Series Performance Analyzer (EPA) v4 beta
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-11T00:00:00+08:00">2025-08-11 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
  Introduction
  EPA 4
  EPA Collector-specific
  Details related to storage requirements
  What's next

</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/11/bing-index-issue.html" rel="permalink">Got binged in July 2025
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-11T00:00:00+08:00">2025-08-11 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">I don't track users (see Privacy page), don't have ads and don't care about "likes" or "followers", but generally I want my content to be in search engine in...</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/07/30/solidfire-windows-admin-center-extension.html" rel="permalink">SolidFire Extension for Windows Admin Center 2025
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-07-30T00:00:00+08:00">2025-07-30 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          19 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
  Introduction
  Walk-through
  And nowâ€¦
  Conclusion
  Appendix A: demo
    
      Animated GIF (no playback control)
      Video demo with voice-over
    ...</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/07/26/solidfire-windows-admin-center-gateway.html" rel="permalink">SolidFire Gateway for Windows Admin Center 2025
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-07-26T00:00:00+08:00">2025-07-26 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
  Introduction
  What it is
  What it does
  IIS Setup
  Why this matters
  What about it?
  Conclusion

</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
