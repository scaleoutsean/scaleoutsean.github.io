<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Comparison between S3 object versioning and WORM with NetApp StorageGRID | Acting Technologist</title>
<meta name="description" content="What is S3 versioning, what is WORM and can they be used for the same purpose">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Comparison between S3 object versioning and WORM with NetApp StorageGRID">
<meta property="og:url" content="https://scaleoutsean.github.io/2023/07/21/storagegrid-comparison-between-versioning-and-worm.html">


  <meta property="og:description" content="What is S3 versioning, what is WORM and can they be used for the same purpose">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Comparison between S3 object versioning and WORM with NetApp StorageGRID">
  <meta name="twitter:description" content="What is S3 versioning, what is WORM and can they be used for the same purpose">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2023/07/21/storagegrid-comparison-between-versioning-and-worm.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2023-07-21T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2023/07/21/storagegrid-comparison-between-versioning-and-worm.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects/"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://scaleoutsean.github.io/" itemprop="url">scaleoutSean</a>
    </h3>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Comparison between S3 object versioning and WORM with NetApp StorageGRID">
    <meta itemprop="description" content="Terms">
    <meta itemprop="datePublished" content="2023-07-21T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2023/07/21/storagegrid-comparison-between-versioning-and-worm.html" itemprop="url">Comparison between S3 object versioning and WORM with NetApp StorageGRID
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-07-21T00:00:00+08:00">2023-07-21 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h2 id="terms">Terms</h2>

<ul>
  <li>Versioning in the S3 API is a means of keeping multiple variants of an object in the same bucket, according to AWS.</li>
  <li>WORM is a generic concept and stands for "Write Once, Read Many". In data storage it describes the ability to create indelible files and directories. Obviously, with S3-compliant storage, that translates to paths/keys.</li>
</ul>

<p>What's common to both is it's possible to use them to prevent accidental deletion.</p>

<h2 id="versioning">Versioning</h2>

<p>Versioning is allows keeping and access to previous revisions of an object (e.g. <code class="language-plaintext highlighter-rouge">GET object.mp3?v=2</code> gets revision #2 of the object).</p>

<p><em>If</em> users are allowed to overwrite objects, but are <em>not allowed</em> to delete old versions (not the default!), then objects practically become indelible to general users.</p>

<p>But each revision is a copy that takes up disk space, so the benefit of versioning should be higher than its cost. Otherwise we should consider WORM or some other approach.</p>

<p>One popular feature used in conjunction with S3 versioning is S3 Object Lock with specified retention, which guarantees retention until a certain date, but unlocks and allows deletion of older objects - very useful for backups that need to be ransomware-resistant as long as they're needed.</p>

<p>But even without any of these tricks, the versioning feature protects files from accidental deletion or change, as you can always GET object.mp4?v=2 and re-upload it to recover from deleting the object or uploading a wrong revision 3.</p>

<h3 id="versioning-and-compliance">Versioning and compliance</h3>

<p>Can a user delete a non-current version of an object? Sure!</p>

<p>As mentioned earlier, S3 versioning prevents accidental deletion of S3 data:</p>

<ul>
  <li>Original (and current) revision is overwritten by another object, or even "deleted"</li>
  <li>The original object version now becomes revision #1, while the new object becomes revision #2 and "current" version of the object. Even if the original object was deleted, revision #2 would become current (non-existing object).</li>
  <li>If we delete revision #1 now, it's no longer possible to recover it</li>
</ul>

<p>That's what's happening in this screenshot.</p>

<p>We can see that s3access.txt was deleted, so the current version (revision #2) doesn't exist, while the first/original revision #1 is also being deleted. After that it will no longer be possible to recover s3access.txt.</p>

<p><img src="/assets/images/storagegrid-versioning-delete-old-version.png" alt="Deleting older version" /></p>

<p>Compliance is another feature that <em>ensures</em> that non-current versions cannot be deleted. Versioning enables the creation of revisions, while compliance prevents the deletion of revisions.</p>

<p>If you're wondering about the relationship between Object Lock with S3 versioning and how it compares with legacy "Compliance" feature of StorageGRID, see <a href="https://docs.netapp.com/us-en/storagegrid-117/ilm/managing-objects-with-s3-object-lock.html">the docs</a> for that.</p>

<p>Versions allow other interesting features, such as the ability to easily restore an object from an older version (as soon as you know there is an older version). We may also use download older revisions for local processing, which is similar to using files from filesystem snapshots.</p>

<p><img src="/assets/images/storagegrid-versioning-restore-old-version.png" alt="Other operations with versions" /></p>

<h2 id="worm">WORM</h2>

<p>"Software WORM" or ACLs-based WORM is simpler: it aims to prevent users from modifying and deleting existing objects.</p>

<p>To do that we craft a bucket policy that denies the use of those API methods to non-admin.</p>

<p>Let's say we have a bucket <code class="language-plaintext highlighter-rouge">wormbucket</code>. In our <a href="https://netapp.io/2017/07/21/worm-s3-buckets-storagegrid-webscale-updated-july-2017/">bucket policy ACL</a> we would first Allow - in one or more rules - access to whomever needs it, and then Deny certain operations that we want to prevent.</p>

<p>In this case those may be <code class="language-plaintext highlighter-rouge">s3:PutOverwriteObject</code>, <code class="language-plaintext highlighter-rouge">s3:DeleteObject</code> and such.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"Effect"</span><span class="p">:</span><span class="s2">"Deny"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"Principal"</span><span class="p">:{</span><span class="w">
     </span><span class="nl">"SGWS"</span><span class="p">:[</span><span class="s2">"11111111111111111111"</span><span class="p">]</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"Action"</span><span class="p">:[</span><span class="w">
     </span><span class="s2">"s3:PutOverwriteObject"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"s3:DeleteObject"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"s3:DeleteObjectVersion"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"s3:PutBucketPolicy"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nl">"Resource"</span><span class="p">:[</span><span class="w">
     </span><span class="s2">"urn:sgws:s3:::wormbucket"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"urn:sgws:s3:::wormbucket/*"</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Obviously, this isn't as robust as compliance (where even administrators cannot delete objects), but it's good for many purposes including the prevention of accidental modification or deletion of files/objects by regular users and - unlike versioning - does not take extra storage space.</p>

<p>We could prevent users from deleting versioning-enabled objects by also taking away their ability to <code class="language-plaintext highlighter-rouge">s3:DeleteObjectVersion</code> or by enabling Compliance on the bucket, but it would make <a href="/2021/01/19/storagegrid-versioning-example.html">previous versions harder to find</a> and it would likely use more storage space.</p>

<p>With WORM, if any of the operations from Deny list is attempted in a bucket where deletes are denied they simply fail.</p>

<p>Here we can see two overwrites and two delete attempts failed.</p>

<p><img src="/assets/images/storagegrid-worm-overwrite-delete.png" alt="WORM disables overwrites and deletes to non-admin users" /></p>

<h2 id="demo">Demo</h2>

<p>In this demo two buckets are created, one with versioning enable, and another with WORM-like ACLs, and then several basic operations (PUT, GET, DEL) are performed.</p>

<ul>
  <li><a href="https://rumble.com/v313be0-how-versioning-and-worm-like-acls-work-on-netapp-storagegrid.html">Comparison between S3 versioning and WORM using NetApp StorageGRID</a> - 3m53s</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>Versioning and ACLs-based WORM are different features that sometimes can be used for the same use case.</p>

<p>Even then, though, one may be more appropriate than the other, depending on the requirements.</p>


        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/s3" class="page__taxonomy-item p-category" rel="tag">s3</a><span class="sep">, </span>
    
      <a href="/tags/storagegrid" class="page__taxonomy-item p-category" rel="tag">storagegrid</a><span class="sep">, </span>
    
      <a href="/tags/version" class="page__taxonomy-item p-category" rel="tag">version</a><span class="sep">, </span>
    
      <a href="/tags/versioning" class="page__taxonomy-item p-category" rel="tag">versioning</a><span class="sep">, </span>
    
      <a href="/tags/worm" class="page__taxonomy-item p-category" rel="tag">worm</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2023-07-21T00:00:00+08:00">2023-07-21 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Comparison+between+S3+object+versioning+and+WORM+with+NetApp+StorageGRID%20https%3A%2F%2Fscaleoutsean.github.io%2F2023%2F07%2F21%2Fstoragegrid-comparison-between-versioning-and-worm.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2023/07/21/storagegrid-comparison-between-versioning-and-worm.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2023/07/20/storagegrid-and-elaticsearches.html" class="pagination--pager" title="StorageGRID and Elasticsearches">Previous</a>
    
    
      <a href="/2023/07/26/ontap-s3-as-velero-object-store.html" class="pagination--pager" title="Use ONTAP S3 as backup destination for Velero">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/11/epa-4-beta.html" rel="permalink">E-Series Performance Analyzer (EPA) v4 beta
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-11T00:00:00+08:00">2025-08-11 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
  Introduction
  EPA 4
  EPA Collector-specific
  Details related to storage requirements
  What's next

</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/11/bing-index-issue.html" rel="permalink">Got binged in July 2025
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-11T00:00:00+08:00">2025-08-11 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">I don't track users (see Privacy page), don't have ads and don't care about "likes" or "followers", but generally I want my content to be in search engine in...</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/07/30/solidfire-windows-admin-center-extension.html" rel="permalink">SolidFire Extension for Windows Admin Center 2025
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-07-30T00:00:00+08:00">2025-07-30 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          19 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
  Introduction
  Walk-through
  And now…
  Conclusion
  Appendix A: demo
    
      Animated GIF (no playback control)
      Video demo with voice-over
    ...</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/07/26/solidfire-windows-admin-center-gateway.html" rel="permalink">SolidFire Gateway for Windows Admin Center 2025
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-07-26T00:00:00+08:00">2025-07-26 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
  Introduction
  What it is
  What it does
  IIS Setup
  Why this matters
  What about it?
  Conclusion

</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
