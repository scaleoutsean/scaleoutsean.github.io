<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Faster initialization, rebalancing with DDP on NetApp E-Series | Acting Technologist</title>
<meta name="description" content="How fast can DDP be initialized and voluems expanded">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Faster initialization, rebalancing with DDP on NetApp E-Series">
<meta property="og:url" content="https://scaleoutsean.github.io/2021/07/06/e-series-ddp-expansion-and-rebalancing.html">


  <meta property="og:description" content="How fast can DDP be initialized and voluems expanded">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Faster initialization, rebalancing with DDP on NetApp E-Series">
  <meta name="twitter:description" content="How fast can DDP be initialized and voluems expanded">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2021/07/06/e-series-ddp-expansion-and-rebalancing.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2021-07-06T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2021/07/06/e-series-ddp-expansion-and-rebalancing.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Faster initialization, rebalancing with DDP on NetApp E-Series">
    <meta itemprop="description" content="How quickly can I grow a DDP and volumes on it?">
    <meta itemprop="datePublished" content="2021-07-06T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2021/07/06/e-series-ddp-expansion-and-rebalancing.html" itemprop="url">Faster initialization, rebalancing with DDP on NetApp E-Series
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-07-06T00:00:00+08:00">2021-07-06 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <ul>
  <li><a href="#raid-6-vs-ddp">RAID 6 vs DDP</a></li>
  <li><a href="#ddp-expansion">DDP expansion</a></li>
  <li><a href="#disk-media-refresh-with-ddp-pools">Disk media refresh with DDP pools</a></li>
  <li><a href="#demo">Demo</a></li>
</ul>

<h2 id="raid-6-vs-ddp">RAID 6 vs DDP</h2>

<p><a href="/2021/01/04/elasticsearch-on-netapp-h615c-ef280.html#elasticsearch-data-protection-with-ef-series">Here</a> I explained how Dynamic Disk Pools (DDP) work and how they differ from traditional RAID6 (or RAID5) data protection.</p>

<p>Recently I had a query about the need for DDP for which I revisited some details from that post and the TR mentioned in it. The next question was "But then why do people still use RAID6?"</p>

<p>They use it because for some workloads and use cases, RAID6 is more suitable. But the person who asked wasn't one of those users - one of their primary requirements was to be able to quickly and easily expand volumes and DDP below them while using NL-SAS HDDs (with SSDs or NVMe, RAID5 volume groups also expand quickly).</p>

<p>In that case, DDP may indeed be more suitable. Check the TR I mentioned above for the details (you may have some important requirement that conflicts with DDP, say you have a bunch of sites with 10 disks per E-2812 - you can't do DDP that way).</p>

<h2 id="ddp-expansion">DDP expansion</h2>

<p>Let's say DDP is exactly what you need. Let's see how long it takes to perform that operation.</p>

<p><img src="/assets/images/e-series-ddp-expansion-01.png" alt="E-Series DDP" /></p>

<p>I've added two HDDs to this DDP so that it has 21 HDDs (screenshot above) and immediately created a new volume. Without other I/O, estimated time for each was approximately two hours.</p>

<p><img src="/assets/images/e-series-ddp-expansion-volume-initialization-and-rebalancing-02.png" alt="E-Series DDP operations in progress" /></p>

<p>What if the controllers and disks were loaded? Well, then it'd be slower, but these are two operations (one might be faster) and you should still be able to finish the same day. Secondly, operations on a larger DDPs (say, going from 30 to 40 drives) would be faster.</p>

<p><img src="/assets/images/e-series-ddp-expansion-controller-loading-during-rebalancing-03.png" alt="E-Series DDP controller loading during rebalancing and initialization" /></p>

<p>In fact, this E-5760 system had one faulty controller, while the remaining controller needed only 20% CPU resources for these two operations. That means that in all likelihood only HDD utilization on the same DDP would impact the time required to complete the tasks.</p>

<p>New configuration:</p>

<p><img src="/assets/images/e-series-ddp-expansion-volumes-in-ddp-04.png" alt="E-Series DDP with new volume" /></p>

<p>These operations still take some time (unlike on some other NetApp arrays where resources are very "virtualized" and these tasks are either unnecessary or hidden), but E-Series keeps its stack lean which increases reliability and performance, while keeping the latency low.</p>

<p>Some time after the second volume was successfully initialized while DDP rebalancing was still going on. To get an idea of how long volume expansion takes, I increased the second volume size from 5 TB to 6 TB:</p>

<p><img src="/assets/images/e-series-ddp-expansion-volume-size-in-ddp-05.png" alt="E-Series DDP increase volume size" /></p>

<p>Going back to operations in progress, we observed that SANtricity estimated that this operation would take only 20 minutes.</p>

<p><img src="/assets/images/e-series-ddp-expansion-volume-size-in-ddp-time-taken-06.png" alt="E-Series DDP increase volume size in minutes" /></p>

<p>If you expand your storage rarely or in a predictable manner (say, add a R6 group of 8 x 10 TB drives every quarter), or if your application prefers RAID6 or RAID5, by all means stick to it - just beware that RAID operations with HDDs take time! Those who can use DDP will certainly appreciate the speed gains as well as other advantages of DDP.</p>

<p>Don't forget that you can use a resized volume <em>as soon as you've kicked-off the UI resize operation</em>. You don't need to wait until rebalancing completes: once you've resized a volume, go back to your host(s), rescan the storage and you'll see the new volume size. As the SANtricity UI reminds, you may still need to resize the partition and filesystem. Maybe take a snapshot before you do that if you're afraid you might screw up.</p>

<h2 id="disk-media-refresh-with-ddp-pools">Disk media refresh with DDP pools</h2>

<p>Scenario with the current SANtricity v11.80:</p>

<ul>
  <li>You have a DDP with 5 years old 4 TB NL-SAS disks which need a refresh. But alas, those may no longer be available. How can we migrate?</li>
  <li>According to the (poorly worded) documentation, you shouldn't use different disk sizes in a DDP. But you may.</li>
  <li>Add new 12 TB disks to the pool. DDP will use only 2 TB per disk. Relax.</li>
  <li>Once rebalancing is complete, select all old disks (4 TB, in this case), and kick them out of the pool</li>
  <li>Once the last old disk is gone from the pool, DDP should recognize the new lowest common denominator - 12 TB - and up its capacity threefold (4-&gt;12 TB per disk)</li>
</ul>

<p>This can be done online and there's no need to migrate anything.</p>

<p>On a busy system you may want to start removal of old disks on a Friday night, as that may be more performance-intensive than adding disks.</p>

<h2 id="demo">Demo</h2>

<ul>
  <li><a href="https://youtu.be/O5umRL4dlfo">Initialize and grow a volume on DDP made of 30 HDDs</a> - 2m17s</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/ddp" class="page__taxonomy-item p-category" rel="tag">ddp</a><span class="sep">, </span>
    
      <a href="/tags/e-series" class="page__taxonomy-item p-category" rel="tag">e-series</a><span class="sep">, </span>
    
      <a href="/tags/eseries" class="page__taxonomy-item p-category" rel="tag">eseries</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2021-07-06T00:00:00+08:00">2021-07-06 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Faster+initialization%2C+rebalancing+with+DDP+on+NetApp+E-Series%20https%3A%2F%2Fscaleoutsean.github.io%2F2021%2F07%2F06%2Fe-series-ddp-expansion-and-rebalancing.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2021/07/06/e-series-ddp-expansion-and-rebalancing.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2021/06/22/solidfire-backup-and-cloning-with-per-storage-node-queues.html" class="pagination--pager" title="Maximum parallelization of SolidFire Backup and Volume Copy/Clone jobs">Previous</a>
    
    
      <a href="/2021/07/06/solidfire-protection-domains-data-path.html" class="pagination--pager" title="Data Path in SolidFire clusters with Protection Domains">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/03/01/proxmox-pve-with-netapp-eseries.html" rel="permalink">Proxmox PVE 9.1.1 (Debian) with NetApp EF-Series NVMe/RoCE
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-03-01T00:00:00+08:00">2026-03-01 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">PVE 9.1.1 with NVMe/RoCE on NetApp EF600
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/03/01/adblock-and-netapp-docs.html" rel="permalink">Block external sites to improve loading speed of NetApp docs
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-03-01T00:00:00+08:00">2026-03-01 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Block external domains on https://docs.netapp.com
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/26/ibm-block-storage-cis-driver-santricity-fork.html" rel="permalink">IBM Block Storage CSI driver patched for NetApp E-Series
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-26T00:00:00+08:00">2026-02-26 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Unofficial patch to IBM Block CSI driver for E-Series SANtricity storage
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/19/the-shocking-truth-about-ef600-200g-ports.html" rel="permalink">Connecting to 200G HICs on E-Series EF600
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-19T00:00:00+08:00">2026-02-19 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Connecting to EF-Series EF600 200G HIC in DAS mode
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2026 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
