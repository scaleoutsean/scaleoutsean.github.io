<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>GA of NetApp Trident v21.07 | Acting Technologist</title>
<meta name="description" content="What's new and noteworthy in NetApp Trident v21.07">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="GA of NetApp Trident v21.07">
<meta property="og:url" content="https://scaleoutsean.github.io/2021/07/31/netapp-trident-v21.07.html">


  <meta property="og:description" content="What's new and noteworthy in NetApp Trident v21.07">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="GA of NetApp Trident v21.07">
  <meta name="twitter:description" content="What's new and noteworthy in NetApp Trident v21.07">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2021/07/31/netapp-trident-v21.07.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2021-07-31T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2021/07/31/netapp-trident-v21.07.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="GA of NetApp Trident v21.07">
    <meta itemprop="description" content="What's new and noteworthy in NetApp Trident v21.07">
    <meta itemprop="datePublished" content="2021-07-31T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2021/07/31/netapp-trident-v21.07.html" itemprop="url">GA of NetApp Trident v21.07
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-07-31T00:00:00+08:00">2021-07-31 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Latest &amp; greatest NetApp Trident is out!</p>

<p>Version 21.07 says goodbye to OCP 3.11 (and any and all Kubernetes clusters running versions earlier than v1.17).</p>

<p>It also removes support for E-Series back-end. Users can still use Trident v21.04 with E-Series, as well as any other (generic) or specialized drivers such as our <a href="https://github.com/NetApp/beegfs-csi-driver">BeeGFS CSI Driver</a>.</p>

<p>Other noteworthy changes:</p>

<h2 id="multipath-discovery">Multipath discovery</h2>

<p><code class="language-plaintext highlighter-rouge">find_multipaths</code> is now recommended to be set to <code class="language-plaintext highlighter-rouge">no</code> on all workers, including on workers running previous versions of Trident.</p>

<p>Trident v21.07 contains an improvement related to ONTAP iSCSI MPIO, but older releases in environments that experienced multipathing issues could benefit from flipping <code class="language-plaintext highlighter-rouge">find_multipaths</code> to <code class="language-plaintext highlighter-rouge">no</code>. You can see the new code <a href="https://github.com/NetApp/trident/commit/2eee92b2f9c29c237e32dab5ec3be86632f8baf0">here</a>.</p>

<p>I haven't asked because the documentation doesn't differentiate (so it has to be applied for all back-ends), but based on the commit and related Trident issues, this seems to have affected only Trident with ONTAP SAN back-end.</p>

<p>Note that this doesn't mind that you can't use multipath, it only means that we instruct multipathd to not look for it. When one ONTAP controller is down, we will login to it via another controller. When <code class="language-plaintext highlighter-rouge">find_multipaths</code> is enabled despite the new recommendation, Trident v21.07 will throw a warning.</p>

<p>I previously blogged how I avoid using multipath with SolidFire whenever I can because it's rarely needed and introduces complexity (remember that SolidFire uses single SAN fabric and one Target Portal per LUN). With SolidFire and worker NICs in LACP pair we wouldn't have multipathd <em>installed</em>, let alone configured!</p>

<h2 id="snapshotter">Snapshotter</h2>

<p>One of the reasons why I haven't yet reviewed Kasten K10 v4 and latest Velero release is that this snapshot stuff in Kubernetes is such a PITA.</p>

<p>Trident v21.07 selects correct csi-snapshotter version for Kubernetes and snapshot CRD versions.</p>

<p>On Kubernetes v1.20 and later we use the validated <code class="language-plaintext highlighter-rouge">k8s.gcr.io/sig-storage/csi-snapshotter:v4.x</code> image if only v1 version is serving <code class="language-plaintext highlighter-rouge">volumesnapshots.snapshot.storage.k8s.io</code> CRD. If v1beta is in use, then snapshotter 3.x will be used.</p>

<p>I'll have to give this a try, so look forward for updated reviews of Kasten K10 and Velero with SolidFire SAN!</p>

<h2 id="improvements-in-ontap-capacity-related-calculation">Improvements in ONTAP capacity-related calculation</h2>

<p>The way snapshotReserve and LUN sizes were calculated in pre-v21.07 was â€¦ unusual. Now it's more in line how people expect it to be.</p>

<ul>
  <li>ONTAP-SAN, ONTAP-NAS, and ONTAP-NAS-Flexgroup drivers now regard the snapshotReserve percentage as a percentage of the whole FlexVol size for new volumes</li>
  <li>ONTAP-SAN adds extra 10% to FlexVol size to account for LUN metadata</li>
</ul>

<h2 id="public-cloud-stuff">Public Cloud stuff</h2>

<p>From Release Notes v21.07:</p>

<blockquote>
  <p>In Trident versions earlier than 21.07, you could create ANF backend with no valid Capacity Pools corresponding to a Service Level. As a result the volumes were provisioned in the Capacity Pool of different
Service Level type.</p>
</blockquote>

<p>I mention this only because it's very similar to what I observed with SolidFire SAN: if you configure overlapping QoS policies (say, Bronze 100-200-300, Silver 200-300-500), Storage Classes without unambiguous QoS policy mapping will get "sprayed around" different QoS policies.</p>

<p>On the one hand it "makes sense" (load balancing!) but if you have services that depend on volumes having same performance characteristics, you may not like that. Seeing that note reminded me of this behavior with SolidFire SAN. You can read more about it <a href="https://github.com/NetApp/trident/issues/281#issuecomment-740597377">here</a>. Best practice for SolidFire SAN: don't overlap QoS ranges.</p>

<h2 id="other-ontap-improvements">Other ONTAP improvements</h2>

<p>Among other noteworthy options is support for volume replication in ONTAP NAS driver, as well as REST support for ONTAP NAS driver (the latter as a tech-preview).</p>

<p>These look like features <a href="https://cloud.netapp.com/astra">NetApp Astra</a> may need: if you look at the Astra documentation, it currently supports NAS back-ends (in the public cloud, it's Azure NetApp Files and Cloud Volume Service (GCP)).</p>

<h2 id="next-steps">Next steps</h2>

<ul>
  <li>Check out <a href="https://github.com/NetApp/trident/releases/tag/v21.07.0">release notes for NetApp Trident v21.07</a>
    <ul>
      <li>Update [Aug 6, 2021]: v21.07 was pulled because of a new bug related to ONTAP snapshot reserve calculations, see <a href="https://netapp.io/2021/08/01/hello-astra-trident/">here</a>. This does not affect SolidFire users.</li>
    </ul>
  </li>
  <li><a href="https://netapp-trident.readthedocs.io/en/stable-v21.07/support/requirements.html">RTFM</a></li>
  <li>If you're running Trident in a Kubernetes v1.17 (or newer) environment, you may want to upgrade Trident
    <ul>
      <li>I'll use this opportunity to update my unofficial Trident images for arm64 (see <a href="/2021/02/24/netapp-trident-on-arm64">this post</a>). K8s on ARM64 users can get 'em <a href="https://hub.docker.com/r/scaleoutsean/trident-arm64">here</a> or build their own</li>
    </ul>
  </li>
</ul>

<h2 id="trident-v2107-on-arm64">Trident v21.07 on ARM64</h2>

<p>If Kubernetes Master nodes are running on x86_64 hardware, we would need Trident ARM64 image just for ARM64 worker nodes. You can get this image and if you upload to your registry, tag it differently from AMD64 images:</p>

<p><code class="language-plaintext highlighter-rouge">docker pull scaleoutsean/trident-arm64:v21.07.0-custom</code></p>

<p>For all-ARM64 clusters, it's a bit more complicated - see archive posts about Trident on ARM64 or the instructions at the <a href="https://hub.docker.com/r/scaleoutsean/trident-arm64">Docker image page</a>.</p>

<p>You may also need <a href="https://netapp-trident.readthedocs.io/en/stable-v21.07/support/requirements.html#container-images-and-corresponding-kubernetes-versions">3rd party images</a> (csi-snapshotter, csi-resizer, etc.) for ARM64 in your registry, but you already knew that.</p>

<p>Trident v21.07.0 on Kubernetes v1.21.2 (ARM64) connected to SolidFire 12.3:</p>

<p><img src="/assets/images/trident-v21.07.0-arm64.png" alt="NetApp Trident v21.07 on ARM64 cluster with SolidFire 12.3" /></p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/csi" class="page__taxonomy-item p-category" rel="tag">csi</a><span class="sep">, </span>
    
      <a href="/tags/kubernetes" class="page__taxonomy-item p-category" rel="tag">kubernetes</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/trident" class="page__taxonomy-item p-category" rel="tag">trident</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/kubernetes" class="page__taxonomy-item p-category" rel="tag">kubernetes</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2021-07-31T00:00:00+08:00">2021-07-31 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=GA+of+NetApp+Trident+v21.07%20https%3A%2F%2Fscaleoutsean.github.io%2F2021%2F07%2F31%2Fnetapp-trident-v21.07.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2021/07/31/netapp-trident-v21.07.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2021/07/19/solidfire-mib-snmp-monitoring.html" class="pagination--pager" title="Monitor SolidFire with SNMP">Previous</a>
    
    
      <a href="/2021/08/09/sgac-storagegrid-audit-log-converter-v0.1.html" class="pagination--pager" title="SGAC v0.1">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/12/beegfs-nfs-s3-for-dev-test-edu-edge.html" rel="permalink">Containerized BeeGFS with NFSv4 and S3
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-12T00:00:00+08:00">2025-09-12 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Revisiting that old idea for All-in-One BeeGFS stack
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/08/solidfire-wac-gateway-client-powershell.html" rel="permalink">SolidFire WAC Gateway Client (PowerShell)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-08T00:00:00+08:00">2025-09-08 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">About that thing that should have been done in 2016
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/04/sfc-solidfire-collector-v2-dot-1-dot-0.html" rel="permalink">SolidFire Collector v2.1.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-04T00:00:00+08:00">2025-09-04 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Stack complete and tagged
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/31/epa-version-3-dot-5.html" rel="permalink">EPA version 3.5.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-31T00:00:00+08:00">2025-08-31 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.5.0
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
