<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>SolidFire Support Bundle Log with Automation, OneCollect | Acting Technologist</title>
<meta name="description" content="Log collection: when you need it, you want to do it faster">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="SolidFire Support Bundle Log with Automation, OneCollect">
<meta property="og:url" content="https://scaleoutsean.github.io/2021/07/07/solidfire-onecollect-and-scripted-supportbundle-automation.html">


  <meta property="og:description" content="Log collection: when you need it, you want to do it faster">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="SolidFire Support Bundle Log with Automation, OneCollect">
  <meta name="twitter:description" content="Log collection: when you need it, you want to do it faster">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2021/07/07/solidfire-onecollect-and-scripted-supportbundle-automation.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2021-07-07T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2021/07/07/solidfire-onecollect-and-scripted-supportbundle-automation.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="SolidFire Support Bundle Log with Automation, OneCollect">
    <meta itemprop="description" content="How to automate SolidFire log gathering for Support purposes">
    <meta itemprop="datePublished" content="2021-07-07T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2021/07/07/solidfire-onecollect-and-scripted-supportbundle-automation.html" itemprop="url">SolidFire Support Bundle Log with Automation, OneCollect
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-07-07T00:00:00+08:00">2021-07-07 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p><strong>NOTICE</strong>: any and all credentials and tokens on this page are samples, not leaked.</p>

<p>I don't have any first hand information to say this is the case, but I believe that with the increased focus on container workloads and container-packaged SolidFire (NetApp eSDS), SolidFire management has slowly been increasingly containerized as well. NetApp Hybrid Cloud Control - a VM with a bunch of management-related containers - is the most prominent example that is familiar to NetApp HCI and SolidFire customers.</p>

<p>I once wrote about log collection on NetApp HCC (see <a href="/2020/12/08/get-bearer-token-for-netapp-hci-hybrid-cloud-control-logs">here</a>), but early this week I was working on something that prompted me to revisit log collection on SolidFire storage nodes.</p>

<p>To get the logs, find the nodes' management IPs in the main SolidFire cluster GUI, click on each link, and you'll see the node management interface (https://${node-management-ip}:442). Go to System Utilities, select Collect Node Logs, enter Utility Options (such as bundle name), click on Collect Node Logs, and wait a few minutes till the logs are ready at which point you'll be prompted to download your log bundle.</p>

<p><img src="/assets/images/solidfire-onecollect-get-support-logs-00-hcc-download.png" alt="NetApp Hybrid Cloud Control - System Utilities" /></p>

<p>You need to do this for every node, and it's usually a good idea to not run this thing across several nodes at the same time because they do collect what can amount to gigabytes of logs files that have to be packaged into a <code class="language-plaintext highlighter-rouge">tar</code> archive file as defined by the bundle name.</p>

<p>But spending 5-10 minutes per each of four or more nodes isn't fun either. (Although that doesn't mean this is <em>not</em> how customers are asked to do it - I'm not in Support, so I'm curious myself as I haven't seen or heard of any better approaches. The manual approach seems excessively wasteful to me.)</p>

<p>Sometimes, if you can easily duplicate a problem, it makes sense to run Delete All Node Logs (see in screenshot above) before you Collect Node Logs, just so that you avoid collecting, downloading, and then uploading (to NetApp Support) logs unrelated to your issue. There are also options related to log collection - presumably Support can provide some parameters to limit log collection to certain services, but I have no knowledge of that detail.</p>

<p>In any case, as I was taking care of my debugging business, it didn't take long to get annoyed by this manual approach. Again, I chose PowerShell because it works well on Windows and Linux and the only requirement is SolidFire PowerShell Tools (module) for PowerShell 5 or 7.</p>

<p>What I do in v1 is:</p>

<ul>
  <li>Prompt the user for SolidFire cluster Management VIP and cluster administrator credentials, and from this point continue unattended</li>
  <li>Get the list of active SolidFire nodes
    <ul>
      <li>Connect to one node, call the generate Support Bundle API method and wait until the bundle is ready (minutes)</li>
      <li>As soon as the archive is ready I create a download job and send it to background. You may need 20 GB per each SolidFire storage node, so run the script from where you have enough capacity!</li>
      <li>Connect to the next node to do the same until all Support Bundles have been generated and download jobs sent to background</li>
    </ul>
  </li>
</ul>

<p>This doesn't gather logs in parallel, that is done sequentially. It only <em>downloads</em> them in parallel. With old logs <em>deleted</em> in Node Web Management UI prior to running this script, it takes me about 10 minutes to run this script on a SolidFire v12.3 cluster with five nodes. The first log is ready in little under 2 minutes, which means background downloads are almost free (time-wise).</p>

<p><img src="/assets/images/solidfire-onecollect-get-support-logs-01-scripted-download.png" alt="Collect SolidFire or eSDS logs with PowerShell" /></p>

<p>Free? Okay, that's not entirely true, as at the very end I can usually see three download jobs still running in the background, so clearly not every job can finish before the next log is ready, but it's very close to free… It may take longer on clusters where not all old node logs have been deleted, but if you run the script over a 10G network, maybe it wouldn't be bandwidth-constrained (screenshot below).</p>

<p><img src="/assets/images/solidfire-onecollect-get-support-logs-02-download-speed.png" alt="Download SolidFire or eSDS logs with PowerShell" /></p>

<p>So this is pretty nice - it's simple, safe and fast.</p>

<p>Of course, we don't need gigabytes of logs for every single Support case. Usually you need just the output of a handful of diagnostic commands. NetApp has a tool called OneCollect (I recorded a video about running it in an unsupported manner - on HCC VM - you can find it on YouTube) which runs in a Docker container or on regular mainstream OS (x86-64 version of OS X, Linux or Windows). You execute it on your client and access its Web UI at http://localhost:8888 (default port).</p>

<p><img src="/assets/images/solidfire-onecollect-get-support-logs-03-one-collect-lightweight-collection.png" alt="Generate and download SolidFire or eSDS logs with NetApp ActiveIQ OneCollect tool" /></p>

<p>Because these logs tend to be much smaller, OneCollect is and convenient for that, and can also login to NetApp support and upload these logs for you.</p>

<p><img src="/assets/images/solidfire-onecollect-get-support-logs-04-onecollect-lightweight-collection-complete.png" alt="NetApp ActiveIQ OneCollect tool job summary" /></p>

<p>But it doesn't do Support Bundles, as far as I can tell (I tried today). Should you need to collect those logs, you may still want to use a script to gather Support Bundle files, and <em>then</em> use OneCollect's Data Files upload to upload them to NetApp Support servers.</p>

<p><img src="/assets/images/solidfire-onecollect-get-support-logs-05-onecollect-upload-support-bundle-files.png" alt="Upload SolidFire or eSDS logs with NetApp ActiveIQ OneCollect tool" /></p>

<p>As you may have noticed, Support Bundle files are not compressed after my script downloads them. We could compress them on the fly (interestingly, this isn't so easy in PowerShell), or indeed after (compress each file immediately after download).</p>

<p>Because NetApp ActiveIQ OneCollect (or most browser upload utilities) can compress files on the fly, it's probably okay to upload them uncompressed - upload times may not be considerably worse and it's faster to unpack them when they're not compressed. I don't have a NetApp Support account so I can't tell if my guess regarding upload time is about right, but if I hear otherwise I could change the script to compress the logs on the fly as I download them, or later.</p>

<p>Of course the script could do more, but over the next 12 months even this basic version should save me enough time to pay back for its development. I'll put it on Github once I tidy up the code, add some logging and so on (I'm thinking about adding parameters to gather logs from only selected nodes, but I don't know if that is how it works in real life - I'll try to find out).</p>

<p>Edit (2022-02-20): I checked with the folks who know how people gather logs and unfortunately while it seems possible to it more conveniently than it's done now (script with a menu could be created to automate log collection and upload), the workflow is complex. First, because all logs are huge, it's always better to collect as few logs as possible. Second, depending on what seems to be broken, Support may ask for one or more logs, and those may need to be gathered with different options ("switches"). Third, there's some variability depending on the severity of problem, software version involved, hardware platform, etc. So while this can be automated, it's too complicated without knowing the process inside-out, so I've abandoned the idea to automate this on my own.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/log" class="page__taxonomy-item p-category" rel="tag">log</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/onecollect" class="page__taxonomy-item p-category" rel="tag">onecollect</a><span class="sep">, </span>
    
      <a href="/tags/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/automation" class="page__taxonomy-item p-category" rel="tag">automation</a><span class="sep">, </span>
    
      <a href="/categories/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2021-07-07T00:00:00+08:00">2021-07-07 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=SolidFire+Support+Bundle+Log+with+Automation%2C+OneCollect%20https%3A%2F%2Fscaleoutsean.github.io%2F2021%2F07%2F07%2Fsolidfire-onecollect-and-scripted-supportbundle-automation.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2021/07/07/solidfire-onecollect-and-scripted-supportbundle-automation.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2021/07/06/solidfire-protection-domains-data-path.html" class="pagination--pager" title="Data Path in SolidFire clusters with Protection Domains">Previous</a>
    
    
      <a href="/2021/07/16/iqn-level-chap-authentiation-on-solidfire.html" class="pagination--pager" title="Storage account-level vs. IQN-level CHAP on SolidFire">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/07/ecp-eseries-performance-analyzer-aka-collector.html" rel="permalink">E-Series SANtricity Collector (ESC 4)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-07T00:00:00+08:00">2025-10-07 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">About EPA 4 (aka ESC 4) and how to pick the right one for you
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/13/mcp-for-netapp-eseries.html" rel="permalink">MCP Server for NetApp E-Series arrays
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-13T00:00:00+08:00">2025-09-13 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Use case for MCP server for NetApp E-Series arrays
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/12/beegfs-nfs-s3-for-dev-test-edu-edge.html" rel="permalink">Containerized BeeGFS with NFSv4 and S3
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-12T00:00:00+08:00">2025-09-12 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Revisiting that old idea for All-in-One BeeGFS stack
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/08/solidfire-wac-gateway-client-powershell.html" rel="permalink">SolidFire WAC Gateway Client (PowerShell)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-08T00:00:00+08:00">2025-09-08 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">About that thing that should have been done in 2016
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
