<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Get Trident's SolidFire metrics from outside Kubernetes | Acting Technologist</title>
<meta name="description" content="Get Trident metrics out to external Prometheus server">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Get Trident's SolidFire metrics from outside Kubernetes">
<meta property="og:url" content="https://scaleoutsean.github.io/2021/05/25/external-access-to-netapp-trident-solidfire-metrics.html">


  <meta property="og:description" content="Get Trident metrics out to external Prometheus server">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Get Trident's SolidFire metrics from outside Kubernetes">
  <meta name="twitter:description" content="Get Trident metrics out to external Prometheus server">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2021/05/25/external-access-to-netapp-trident-solidfire-metrics.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2021-05-25T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2021/05/25/external-access-to-netapp-trident-solidfire-metrics.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Get Trident's SolidFire metrics from outside Kubernetes">
    <meta itemprop="description" content="Get Trident metrics out to external Prometheus server">
    <meta itemprop="datePublished" content="2021-05-25T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2021/05/25/external-access-to-netapp-trident-solidfire-metrics.html" itemprop="url">Get Trident's SolidFire metrics from outside Kubernetes
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-05-25T00:00:00+08:00">2021-05-25 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>If I had a SolidFire array in a VM and container environment (which I do), I'd prefer to run Prometheus and Grafana in VMs, rather than cram the monitoring into Kubernetes.</p>

<p>If you have that kind of a setup, you might prefer the same. Now, since newer releases of Trident export some Prometheus metrics, users who run monitoring infrastructure outside of Kubernetes may wonder how to get those metrics out.</p>

<p>First, see whatcha got:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get pods <span class="nt">-n</span> trident
NAME                           READY   STATUS    RESTARTS   AGE
trident-csi-5c98ff74fb-rwj4f   5/5     Running   0          23d
trident-csi-fhrjj              2/2     Running   0          23d
trident-csi-gq9w6              2/2     Running   0          23d
trident-csi-x9cnm              2/2     Running   0          23d

<span class="nv">$ </span>kubectl describe pod trident-csi-5c98ff74fb-rwj4f <span class="nt">-n</span> trident
Name:         trident-csi-5c98ff74fb-rwj4f
Namespace:    trident
Priority:     0
Node:         k2/192.168.1.19
Start Time:   Sat, 01 May 2021 13:02:42 +0000
Labels:       <span class="nv">app</span><span class="o">=</span>controller.csi.trident.netapp.io
              pod-template-hash<span class="o">=</span>5c98ff74fb
Annotations:  &lt;none&gt;
Status:       Running
IP:           10.244.1.26
</code></pre></div></div>

<p>Okay, so the one with the long name is the controller, running on internal IP 10.244.1.26 on worker <code class="language-plaintext highlighter-rouge">k2</code> (192.168.1.19). (This is my arm64 K8s cluster, by the way, I don't want to run a ton of services on it when I have rock-solid x86 VMs and my hypervisor is on 24x7).</p>

<p>From the node where the controller is running, you can get its Prometheus metrics.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl 10.244.1.26:8001/metrics
<span class="c"># HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.</span>
<span class="c"># TYPE go_gc_duration_seconds summary</span>
go_gc_duration_seconds<span class="o">{</span><span class="nv">quantile</span><span class="o">=</span><span class="s2">"0"</span><span class="o">}</span> 9.1588e-05
go_gc_duration_seconds<span class="o">{</span><span class="nv">quantile</span><span class="o">=</span><span class="s2">"0.25"</span><span class="o">}</span> 0.000124298
<span class="o">[</span>...]
</code></pre></div></div>

<p>In order to get to them from outside of the cluster you need to set up some sort of forwarding. This approach sucks but it will do for a blog post.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl port-forward <span class="nt">--address</span> 192.168.1.18 pod/trident-csi-5c98ff74fb-rwj4f 9090:8001 <span class="nt">--namespace</span><span class="o">=</span><span class="s2">"trident"</span>
</code></pre></div></div>

<p>Note that with this command I'm forwarding port 9090 on the worker k1 (192.168.1.18) to the Trident pod on k2 (192.168.1.19).</p>

<p>Now we can use the browser to visit http://192.168.1.18:9090 and see our Trident metrics.</p>

<pre><code class="language-raw"># HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.
# TYPE go_gc_duration_seconds summary
[..]
# TYPE trident_backend_count gauge
trident_backend_count{backend_state="online",backend_type="ontap-nas"} 1
trident_backend_count{backend_state="online",backend_type="ontap-nas-economy"} 1
trident_backend_count{backend_state="online",backend_type="solidfire-san"} 1
</code></pre>

<p>Now tell your Prometheus server to get the metrics off that forwarded IP and port (192.168.1.18:9090).</p>

<p>The last step for Grafana users is to add the Prometheus server to Data Sources and create some dashboards.</p>

<p><img src="/assets/images/trident-prometheus-external-monitor.png" alt="Visualizing Trident Prometheus data in Grafana" /></p>

<p>There isn't much to see (yet) in terms of SolidFire-specific metrics, but it can be helpful when you want to see how Trident is doing - how many volumes, how many backends, and stuff like that.</p>

<p>To get detailed SolidFire metrics and ready-made dashboards please consider <a href="/2021/05/19/solidfire-exporter-monitor-solidfire-network-interfaces-with-prometheus-and-grafana">SolidFire-Exporter</a> (especially for Prometheus) or <a href="/2021/03/08/hcicollector-v0.7">HCICollector</a>, which uses Grafana with Graphite back-end.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/csi" class="page__taxonomy-item p-category" rel="tag">csi</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a><span class="sep">, </span>
    
      <a href="/tags/trident" class="page__taxonomy-item p-category" rel="tag">trident</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/containers" class="page__taxonomy-item p-category" rel="tag">containers</a><span class="sep">, </span>
    
      <a href="/categories/kubernetes" class="page__taxonomy-item p-category" rel="tag">kubernetes</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2021-05-25T00:00:00+08:00">2021-05-25 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Get+Trident%27s+SolidFire+metrics+from+outside+Kubernetes%20https%3A%2F%2Fscaleoutsean.github.io%2F2021%2F05%2F25%2Fexternal-access-to-netapp-trident-solidfire-metrics.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2021/05/25/external-access-to-netapp-trident-solidfire-metrics.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2021/05/19/solidfire-exporter-monitor-solidfire-network-interfaces-with-prometheus-and-grafana.html" class="pagination--pager" title="Monitor SolidFire Network with SolidFire-Exporter, Prometheus and Grafana">Previous</a>
    
    
      <a href="/2021/06/08/solidfire-availability-zones.html" class="pagination--pager" title="Does SolidFire support Availability Zones">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/12/28/ceph-with-netapp-eseries.html" rel="permalink">Ceph with NetApp E-Series
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-12-28T00:00:00+08:00">2025-12-28 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          15 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">How to use Ceph with NetApp E-Series SANtricity storage
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/12/24/trident-enable-concurrency-solidfire.html" rel="permalink">Trident concurrency with SolidFire
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-12-24T00:00:00+08:00">2025-12-24 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Let's see how much faster we can go!
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/12/22/this-blog-in-2025.html" rel="permalink">This blog in 2025
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-12-22T00:00:00+08:00">2025-12-22 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What worked, what didn't, what is next
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/12/22/reautomating-eseries.html" rel="permalink">Reautomating E-Series
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-12-22T00:00:00+08:00">2025-12-22 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Notes for E-Series automation
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
