<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>SolidFire, KVM, Duplicati and S3 Object Storage | Acting Technologist</title>
<meta name="description" content="Use SolidFire APIs and Duplicati to automate data protection in KVM environments">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="SolidFire, KVM, Duplicati and S3 Object Storage">
<meta property="og:url" content="https://scaleoutsean.github.io/2021/04/22/solidfire-kvm-duplicati-and-backup-to-s3.html">


  <meta property="og:description" content="Use SolidFire APIs and Duplicati to automate data protection in KVM environments">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="SolidFire, KVM, Duplicati and S3 Object Storage">
  <meta name="twitter:description" content="Use SolidFire APIs and Duplicati to automate data protection in KVM environments">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2021/04/22/solidfire-kvm-duplicati-and-backup-to-s3.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2021-04-22T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2021/04/22/solidfire-kvm-duplicati-and-backup-to-s3.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="SolidFire, KVM, Duplicati and S3 Object Storage">
    <meta itemprop="description" content="Use SolidFire APIs and Duplicati to automate data protection in KVM environments">
    <meta itemprop="datePublished" content="2021-04-22T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2021/04/22/solidfire-kvm-duplicati-and-backup-to-s3.html" itemprop="url">SolidFire, KVM, Duplicati and S3 Object Storage
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-04-22T00:00:00+08:00">2021-04-22 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>In the <a href="https://scaleoutsean.github.io/2021/04/21/solidfire-backup-to-s3.html">previous post</a> I explained how SolidFire's built-in backup/restore to/from S3 works and how we can automate it. This post is about doing less automation and more integration.</p>

<h2 id="why">Why</h2>

<p>For niche data protection use cases we can take advantage of the friendly SolidFire API features as well as various backup utilities to implement data protection that's better performing and richer than SoldiFire's built-in backup/restore feature that still doesn't cost a lot (it's mostly your time).</p>

<p>This is another manual walk through of how my (never-finished) SolidBackup might have worked, but this time with Duplicati 2.0 Beta.</p>

<p>So, what can this do that SolidFire's built-in Backup/Restore cannot?</p>

<ul>
  <li>Faster-performing (1 GB/s or more)</li>
  <li>Easier to manage (Web UI is available for certain workflows)</li>
  <li>Less coding and maintenance - SolidFire- and OS-related parts include quiesce/snapshot and mount/unmount - the rest is scheduled in Duplicati</li>
  <li>File based backup and restore makes it possible to easily restore individual files</li>
  <li>Better hybrid cloud support - you can restore your files to any system on-premises or in the cloud</li>
</ul>

<h2 id="how">How</h2>

<ul>
  <li>Optionally quiesce (on the client), and (on SolidFire) snapshot your source volume</li>
  <li>Use SolidFire to create a clone and present it to a backup VM</li>
  <li>Mount the clone volume
    <ul>
      <li>Consider Ansible</li>
    </ul>
  </li>
  <li>Configure Duplicati backup jobs to backup to S3-compatible storage</li>
  <li>Schedule unmount/logout from crontab
    <ul>
      <li>Consider Ansible</li>
    </ul>
  </li>
  <li>Repeat by taking another snapshot and syncing data from Src to Bkp volume using SolidFire's VolumeCopy feature
    <ul>
      <li>The advantage of doing this rather than re-creating the backup volume every day is it's faster and your backup volume remains consistent, which is why Ansible scripts would be largely static - you'd update them when new volume is added</li>
    </ul>
  </li>
</ul>

<p>SolidFire volumes are thin-provisioned by default. While SolidFire volumes can be expanded (sized up), resizing filesystems isn't fun, plus you may need to resize clone volumes in exactly the same way. I therefore recommend to use larger volumes to minimize the need to resize, and when you do need to resize, perhaps it's easier to recreate the clone volume. But it's up to you - manual filesystem expansion sure can work - just make sure that it does!</p>

<h2 id="how-to-restore-production-data">How to restore production data</h2>

<ul>
  <li>First line of defense: restore production volume from latest SolidFire snapshot</li>
  <li>Second line: clone latest snapshot, mount it somewhere, and restore individual file(s). Or if clone volume that can be mounted on Backup VM isn't too old, <code class="language-plaintext highlighter-rouge">scp</code> file(s) you need to your server/application</li>
  <li>Third line: if original volume, its snapshots and clones are all destroyed, you can restore a backup from S3. You can restore directly from S3 (even w/o the original Duplicati instance).</li>
</ul>

<h2 id="web-based-storage-management-in-a-solidfire-kvm-environment">Web-based storage management in a SolidFire-KVM environment</h2>

<p>SolidFire has a nice UI but CopyVolume isn't exposed through it so you'd have to use sfcli or PowerShell to take advantage of it. Backups are supposed to run unattended, so that is not a big deal.</p>

<p>In a KVM - on indeed any Linux-based - environment, Cockpit can be used for some simple operations such as mount, format, unmount and basic storage performance monitoring (for advanced storage monitoring see the community projects HCICollector and SolidFire Exporter (for Prometheus and K8s)).</p>

<p>So the "hard part" - snapshots and clones - would be done in the CLI or even with Ansible, and almost everything else can be done from a Web UI if you'd like that. But you can also use the CLI for everything including Duplicati's backup and restore operations (see the first two videos).</p>

<h2 id="demo-ubuntu-kvm-solidfire-duplicati-and-object-storage">Demo: Ubuntu KVM, SolidFire, Duplicati and Object Storage</h2>

<ul>
  <li><a href="https://youtu.be/9O3wXeD51IU">Duplicati and StorageGRID S3</a> - 2m36s - shows just backup and restore with Duplicati and StorageGRID</li>
  <li><a href="https://youtu.be/wP8nAgFo8og">KVM, SolidFire, Duplicati and Minio S3</a> - 8m19s - shows key steps from the workflow section above</li>
  <li><a href="https://youtu.be/8cYk2gNnMo8">Visual storage management of SolidFire-KVM enviroment with Cockpit</a> - 2m01s - shows SolidFire and Cockpit Web UI and snapshot in a KVM environment</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/backup" class="page__taxonomy-item p-category" rel="tag">backup</a><span class="sep">, </span>
    
      <a href="/tags/data-protection" class="page__taxonomy-item p-category" rel="tag">data protection</a><span class="sep">, </span>
    
      <a href="/tags/duplicati" class="page__taxonomy-item p-category" rel="tag">duplicati</a><span class="sep">, </span>
    
      <a href="/tags/kvm" class="page__taxonomy-item p-category" rel="tag">kvm</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/s3" class="page__taxonomy-item p-category" rel="tag">s3</a><span class="sep">, </span>
    
      <a href="/tags/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/containers" class="page__taxonomy-item p-category" rel="tag">containers</a><span class="sep">, </span>
    
      <a href="/categories/virtualization" class="page__taxonomy-item p-category" rel="tag">virtualization</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2021-04-22T00:00:00+08:00">2021-04-22 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=SolidFire%2C+KVM%2C+Duplicati+and+S3+Object+Storage%20https%3A%2F%2Fscaleoutsean.github.io%2F2021%2F04%2F22%2Fsolidfire-kvm-duplicati-and-backup-to-s3.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2021/04/22/solidfire-kvm-duplicati-and-backup-to-s3.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2021/04/21/solidfire-backup-to-s3.html" class="pagination--pager" title="Backup SolidFire volumes to S3-compatible storage">Previous</a>
    
    
      <a href="/2021/04/29/storagegrid-cloudmirror-async-replication-to-remote-s3-bucket.html" class="pagination--pager" title="StorageGRID with CloudMirror - replication to S3-compatible bucket">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/15/mcp-tapout.html" rel="permalink">TAPOUT - MCP server for ONTAP to E-Series migration
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-15T00:00:00+08:00">2025-10-15 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Migrate to NetApp E-Series arrays with MCP
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/10/post-quantum-crypto-proxy-for-solidfire-eseries-api.html" rel="permalink">Post-Quantum API proxy for E-Series and SolidFire
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-10T00:00:00+08:00">2025-10-10 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Enterprise-grade PQC TLS encryption for E-Series and SolidFire API endpoints
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/09/storagegrid-s3-cache-branch-buckets.html" rel="permalink">StorageGRID Branch Buckets and Read Cache
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-09T00:00:00+08:00">2025-10-09 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Some ways to take better advantage of the new features in StorageGRID 12
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/08/epa-3.5.1.html" rel="permalink">E-Series Performance Analyzer v3.5.1
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-08T00:00:00+08:00">2025-10-08 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">E-Series Performance Analyzer v3.5.1 has been released with minor improvements
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
