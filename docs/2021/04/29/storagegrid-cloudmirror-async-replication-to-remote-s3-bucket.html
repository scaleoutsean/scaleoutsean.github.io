<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>StorageGRID with CloudMirror - replication to S3-compatible bucket | Acting Technologist</title>
<meta name="description" content="Simple intro to StorageGRID CloudMirror">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="StorageGRID with CloudMirror - replication to S3-compatible bucket">
<meta property="og:url" content="https://scaleoutsean.github.io/2021/04/29/storagegrid-cloudmirror-async-replication-to-remote-s3-bucket.html">


  <meta property="og:description" content="Simple intro to StorageGRID CloudMirror">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="StorageGRID with CloudMirror - replication to S3-compatible bucket">
  <meta name="twitter:description" content="Simple intro to StorageGRID CloudMirror">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2021/04/29/storagegrid-cloudmirror-async-replication-to-remote-s3-bucket.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2021-04-29T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2021/04/29/storagegrid-cloudmirror-async-replication-to-remote-s3-bucket.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="StorageGRID with CloudMirror - replication to S3-compatible bucket">
    <meta itemprop="description" content="Simple intro to StorageGRID CloudMirror">
    <meta itemprop="datePublished" content="2021-04-29T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2021/04/29/storagegrid-cloudmirror-async-replication-to-remote-s3-bucket.html" itemprop="url">StorageGRID with CloudMirror - replication to S3-compatible bucket
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-04-29T00:00:00+08:00">2021-04-29 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h2 id="what">What</h2>

<p>When CloudMirror is properly configured, StorageGRID places changes into a queue and copies modified objects to a remote S3 bucket.</p>

<p>This remote bucket can be AWS S3, another StorageGRID or some other object store that adheres to the S3 API.</p>

<h2 id="why">Why</h2>

<p>If you need a persistent copy of your bucket data in another location - disaster recovery, predictably geographically distributed readers, distributed analytics, etc.</p>

<p>If you need a temporary or ad-hoc copy for quick or repetitive read access from remote clients, you can configure HTTP(S) read cache such as Varnish in front of StorageGRID. Varnish service can be located close to the S3 client(s).</p>

<h2 id="steps">Steps</h2>

<p>You should read the documentation as it doesn't make sense to rehash it here, so here goes a summary:</p>

<ul>
  <li>
    <p>Grid Admin must enable Platform Services for the Tenant (at Source). These services include CloudMirror, but also Search (Elasticsearch integration) and SNS.</p>
  </li>
  <li>
    <p>Tenant Admin must create an S3 API endpoint. This can be confusing. No, you don't <em>create</em> an endpoint and in fact don't create anything on the Grid you're using. You merely register a remote S3 API endpoint with your Grid, so that it knows where to send data. You must provide Access Key and Secure key for most Target buckets as they require some form of authentication and authorization.</p>
  </li>
  <li>
    <p>In Source bucket settings, paste the standard XML file for S3 replication. A simple template can be found in the StorageGRID documentation but you can use AWS S3 documentation as well (in the case you use the latter, some limitations outlined in the StorageGRID documentation apply - such as Storage Class is limited to <code class="language-plaintext highlighter-rouge">STANDARD</code> and so on). Best start with the skeleton configuration file from the StorageGRID documentation and improve it once you get it to work. Example to replicate s3://source-bucket/onlythis-subdir/ to s3://remote-bucket-name/onlythis-subdir/ (Standard storage class) on AWS S3:</p>
  </li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ReplicationConfiguration&gt;</span> 
    <span class="nt">&lt;Rule&gt;</span> 
        <span class="nt">&lt;Status&gt;</span>Enabled<span class="nt">&lt;/Status&gt;</span> 
        <span class="nt">&lt;Prefix&gt;</span>onlythis-subdir/<span class="nt">&lt;/Prefix&gt;</span> 
        <span class="nt">&lt;Destination&gt;</span> 
            <span class="nt">&lt;Bucket&gt;</span>arn:aws:s3:::remote-bucket-name<span class="nt">&lt;/Bucket&gt;</span> 
            <span class="nt">&lt;StorageClass&gt;</span>STANDARD<span class="nt">&lt;/StorageClass&gt;</span>
        <span class="nt">&lt;/Destination&gt;</span> 
    <span class="nt">&lt;/Rule&gt;</span> 
<span class="nt">&lt;/ReplicationConfiguration&gt;</span>
</code></pre></div></div>

<h2 id="gotchas">Gotchas</h2>

<p>As the documentation highlights, existing objects won't get replicated. You need to "touch" them (update them in some way) or use a 3rd party utility to sync existing objects from Source to Target bucket, which can be done before you configure CloudMirror, but also after. In the case you do it after you'd probably prefer to use a filter to not replicate objects that have changed after CloudMirror was enabled (maybe filter by date or object name or something else).</p>

<p>In endpoint settings and bucket's XML file you need to supply <code class="language-plaintext highlighter-rouge">arn:aws:s3:::</code> for AWS S3 and <code class="language-plaintext highlighter-rouge">urn:sg:s3:::</code> for StorageGRID destination. This is mentioned in the documentation and online help, but of course ain't nobody got time to read that (or this paragraph).</p>

<p>I found the aws s3 CLI frustratingly hard to use for StorageGRID to StorageGRID sync as it makes it hard (in my experience impossible) to provide two sets of profiles and credentials required for Source and Target. Try rclone or some other utility.</p>

<h2 id="workarounds">Workarounds</h2>

<p>If CloudMirror doesn't support your destination object store (say, Azure Blob), consider using client-side utilities and services (such as NetApp CloudSync).</p>

<h2 id="demo">Demo</h2>

<ul>
  <li><a href="https://www.youtube.com/watch?v=d_3C7Wq45n0">Configure StorageGRID CloudMirror replication</a> (2m33s)</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/cloud-mirror" class="page__taxonomy-item p-category" rel="tag">cloud mirror</a><span class="sep">, </span>
    
      <a href="/tags/cloud-sync" class="page__taxonomy-item p-category" rel="tag">cloud sync</a><span class="sep">, </span>
    
      <a href="/tags/cloudsync" class="page__taxonomy-item p-category" rel="tag">cloudsync</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/replication" class="page__taxonomy-item p-category" rel="tag">replication</a><span class="sep">, </span>
    
      <a href="/tags/s3" class="page__taxonomy-item p-category" rel="tag">s3</a><span class="sep">, </span>
    
      <a href="/tags/storagegrid" class="page__taxonomy-item p-category" rel="tag">storagegrid</a><span class="sep">, </span>
    
      <a href="/tags/sync" class="page__taxonomy-item p-category" rel="tag">sync</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/analytics" class="page__taxonomy-item p-category" rel="tag">analytics</a><span class="sep">, </span>
    
      <a href="/categories/cloud" class="page__taxonomy-item p-category" rel="tag">cloud</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2021-04-29T00:00:00+08:00">2021-04-29 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=StorageGRID+with+CloudMirror+-+replication+to+S3-compatible+bucket%20https%3A%2F%2Fscaleoutsean.github.io%2F2021%2F04%2F29%2Fstoragegrid-cloudmirror-async-replication-to-remote-s3-bucket.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2021/04/29/storagegrid-cloudmirror-async-replication-to-remote-s3-bucket.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2021/04/22/solidfire-kvm-duplicati-and-backup-to-s3.html" class="pagination--pager" title="SolidFire, KVM, Duplicati and S3 Object Storage">Previous</a>
    
    
      <a href="/2021/05/01/netapp-trident-21.04-released.html" class="pagination--pager" title="GA of NetApp Trident v21.04">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/07/ecp-eseries-performance-analyzer-aka-collector.html" rel="permalink">E-Series SANtricity Collector (ESC 4)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-07T00:00:00+08:00">2025-10-07 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">About EPA 4 (aka ESC 4) and how to pick the right one for you
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/13/mcp-for-netapp-eseries.html" rel="permalink">MCP Server for NetApp E-Series arrays
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-13T00:00:00+08:00">2025-09-13 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Use case for MCP server for NetApp E-Series arrays
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/12/beegfs-nfs-s3-for-dev-test-edu-edge.html" rel="permalink">Containerized BeeGFS with NFSv4 and S3
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-12T00:00:00+08:00">2025-09-12 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Revisiting that old idea for All-in-One BeeGFS stack
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/08/solidfire-wac-gateway-client-powershell.html" rel="permalink">SolidFire WAC Gateway Client (PowerShell)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-08T00:00:00+08:00">2025-09-08 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">About that thing that should have been done in 2016
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
