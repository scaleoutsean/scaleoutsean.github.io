<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Show per-node performance guarantees of SolidFire storage nodes | Acting Technologist</title>
<meta name="description" content="Display per-storage node performance guarantees of SolidFire nodes">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Show per-node performance guarantees of SolidFire storage nodes">
<meta property="og:url" content="https://scaleoutsean.github.io/2022/08/04/solidfire-volume-to-node-and-min-guarantees-per-node.html">


  <meta property="og:description" content="Display per-storage node performance guarantees of SolidFire nodes">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Show per-node performance guarantees of SolidFire storage nodes">
  <meta name="twitter:description" content="Display per-storage node performance guarantees of SolidFire nodes">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2022/08/04/solidfire-volume-to-node-and-min-guarantees-per-node.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2022-08-04T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2022/08/04/solidfire-volume-to-node-and-min-guarantees-per-node.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Show per-node performance guarantees of SolidFire storage nodes">
    <meta itemprop="description" content="Display per-storage node performance guarantees of SolidFire nodes">
    <meta itemprop="datePublished" content="2022-08-04T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2022/08/04/solidfire-volume-to-node-and-min-guarantees-per-node.html" itemprop="url">Show per-node performance guarantees of SolidFire storage nodes
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-08-04T00:00:00+08:00">2022-08-04 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>There's a PowerShell script <code class="language-plaintext highlighter-rouge">sfvid2nid.ps1</code> in my Awesome SolidFire repository on Github. It produces a table that shows the mapping of volume IDs to node IDs.</p>

<p>SolidFire users sometimes ask about checking if their volumes are well-balanced.</p>

<p>SolidFire has its own definition of "well" means and users have no direct impact on how it works. It's impossible to balance based on one factor (such as "average latency in last 60 seconds") because volumes would bounce around all the time (which is nearly seamless - the effect on the client is like a quick fail-over - but still not good when too frequent).</p>

<p>SolidFire also won't necessarily re-balance based only on Minimum IOPS. If all nodes in the cluster can satisfy Minimum IOPS and host the volume, then there's no need to move it. Long story short, volumes are scheduled onto nodes based on Minimum QoS, volume size, node utilization and various other factors not exposed to the administrator or user.</p>

<p>Sometimes users don't manage QoS settings, which results in predominantly capacity-based placement and distribution. Then, if several busy workloads happen to be on the same volume, they won't be spread around because nominally the node can satisfy Minimum IOPS for such volumes.</p>

<p>Some best practices:</p>

<ul>
  <li>Create several storage QoS Policies (even just basic Low, Med, High)</li>
  <li>Assign policies to volumes (rather than set custom storage QoS setting for every volume)</li>
  <li>Monitor storage and client performance and adjust volume settings and create new QoS policies for very granular control</li>
</ul>

<p>The script just makes it possible to easily see where's what and whether Minimum IOPS balance across storage cluster members looks sane (see the example below).</p>

<p>We could do better and rewrite this in Python and send it to Elasticsearch or other database, and monitor balancing over time. In my HCI Collector, which I've been lazy to rewrite, we could create similar monitors for Max and Burst IOPS, and use QoS Histograms to find volumes which may need to have their QoS changed (already implemented, in HCI Collector v0.7).</p>

<p>I say "may need" because the fact that someone is maxing their QoS (i.e. hitting Max IOPS) doesn't mean their Maximum IOPS need to be increased: maybe they're abusing the system, maybe the application behaves wastefully (poorly written SQL queries, etc.), and maybe the cluster is close to overloaded.</p>

<p>Because of that and other reasons (such as: Minimum IOPS setting is a SLO, Maximum is best-effort-no-guarantee) managing storage QoS can be somewhat of an art. To manage even better, we'd monitor individual volume utilization and adjust Maximum and Burst values as well, forming our decisions on potentially more than one factor (storage, compute workload, business prioritiesâ€¦).</p>

<p>Anyway, here's a sample of committed minimums by node. If you want to check it out and use it, get the source from Awesome SolidFire on Github.</p>

<h2 id="sample-output-from-solidfire-125-five-storage-nodes">Sample output from SolidFire 12.5 (five storage nodes)</h2>

<p>Changes made today add the first table below, which contains the sum of Minimum IOPS of all volumes scheduled on a storage node (identified by Node ID).</p>

<p>As an example, we can see that node ID 1 carries most performance guarantees (51,000) and is just above the node's performance rating (50,000 IOPS per node). That is not a big problem (IOPS are over-committed by only 2%). The cluster is reasonably well-balanced, but we should probably start looking into adding a node or lowering Minimum QoS settings for some volumes that don't need it.</p>

<p>Why aren't Minimum IOPS better balanced? As mentioned above, that's not the only criterion used to balance volumes. Being 2% overcommitted in terms of Minimum IOPS guarantees is probably less bad than having big imbalances in metadata or some other trade-off.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Min IOPS by node ID:

Name                           Value
<span class="nt">----</span>                           <span class="nt">-----</span>
13                             43900
10                             43900
4                              43950
2                              43900
1                              51000

Volume-Node pairings by volume ID:

Name                           Value
<span class="nt">----</span>                           <span class="nt">-----</span>
262                            2
261                            2
260                            2
259                            10
258                            10
...

Volume-Node pairings by node ID:

Name                           Value
<span class="nt">----</span>                           <span class="nt">-----</span>
92                             1
93                             1
122                            1
135                            1
255                            1
3                              2
4                              2
51                             2
54                             2
...
</code></pre></div></div>

<p>If we added up all the Minimum IOPS for each volume together we should obtain the same figure we see in the SolidFire Web management interface - total Minimum IOPS. This cluster I used showed 226.65k IOPS (or 91% committed; (226.5k / (5 nodes * 50k per node)) in total Minimum IOPS guarantees which equals the sum of values from the first table.</p>

<p>The script doesn't offer any options, but you can modify the script to suit your needs.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/api" class="page__taxonomy-item p-category" rel="tag">api</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/performance" class="page__taxonomy-item p-category" rel="tag">performance</a><span class="sep">, </span>
    
      <a href="/tags/qos" class="page__taxonomy-item p-category" rel="tag">QoS</a><span class="sep">, </span>
    
      <a href="/tags/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a><span class="sep">, </span>
    
      <a href="/tags/visualize" class="page__taxonomy-item p-category" rel="tag">visualize</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2022-08-04T00:00:00+08:00">2022-08-04 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Show+per-node+performance+guarantees+of+SolidFire+storage+nodes%20https%3A%2F%2Fscaleoutsean.github.io%2F2022%2F08%2F04%2Fsolidfire-volume-to-node-and-min-guarantees-per-node.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2022/08/04/solidfire-volume-to-node-and-min-guarantees-per-node.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2022/07/10/xcp-ng-with-netapp-solidfire-iscsi.html" class="pagination--pager" title="XCP-ng and XOA with NetApp SolidFire iSCSI Storage Repositories">Previous</a>
    
    
      <a href="/2022/08/08/apptainer-with-beegfs-mounts.html" class="pagination--pager" title="Apptainer with BeeGFS">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/12/beegfs-nfs-s3-for-dev-test-edu-edge.html" rel="permalink">Containerized BeeGFS with NFSv4 and S3
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-12T00:00:00+08:00">2025-09-12 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Revisiting that old idea for All-in-One BeeGFS stack
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/08/solidfire-wac-gateway-client-powershell.html" rel="permalink">SolidFire WAC Gateway Client (PowerShell)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-08T00:00:00+08:00">2025-09-08 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">About that thing that should have been done in 2016
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/04/sfc-solidfire-collector-v2-dot-1-dot-0.html" rel="permalink">SolidFire Collector v2.1.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-04T00:00:00+08:00">2025-09-04 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Stack complete and tagged
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/31/epa-version-3-dot-5.html" rel="permalink">EPA version 3.5.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-31T00:00:00+08:00">2025-08-31 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.5.0
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
