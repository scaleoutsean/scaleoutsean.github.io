<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Configuration approaches to NetApp E-Series with ThinkParQ BeeGFS | Acting Technologist</title>
<meta name="description" content="How to mix and match storage and servers">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Configuration approaches to NetApp E-Series with ThinkParQ BeeGFS">
<meta property="og:url" content="https://scaleoutsean.github.io/2022/08/28/configuring-netapp-e-series-solution-for-beegfs.html">


  <meta property="og:description" content="How to mix and match storage and servers">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Configuration approaches to NetApp E-Series with ThinkParQ BeeGFS">
  <meta name="twitter:description" content="How to mix and match storage and servers">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2022/08/28/configuring-netapp-e-series-solution-for-beegfs.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2022-08-28T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2022/08/28/configuring-netapp-e-series-solution-for-beegfs.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Configuration approaches to NetApp E-Series with ThinkParQ BeeGFS">
    <meta itemprop="description" content="How to mix and match storage and servers">
    <meta itemprop="datePublished" content="2022-08-28T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2022/08/28/configuring-netapp-e-series-solution-for-beegfs.html" itemprop="url">Configuration approaches to NetApp E-Series with ThinkParQ BeeGFS
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-08-28T00:00:00+08:00">2022-08-28 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>It may not be easy to digest how BeeGFS with NetApp E-Series is usually configured.</p>

<p>One of the good reasons is that it can be configured in many different ways, but then people just ask for one or two suggestions to look at.</p>

<p>Another is that many BeeGFS clusters out there use data mirroring, which the NetApp E-Series solution for BeeGFS does not - instead, it uses HA server pairs with protected storage on E-Series arrays.</p>

<p>Let's take a look at some examples.</p>

<h2 id="two-servers-one-disk-array">Two servers, one disk array</h2>

<p>Two servers with one E-Series disk array are used when performance and capacity requirements can be met with a single E-Series array.</p>

<p>In the case where the servers don't need to max out E-Series array performance, using 1U, uniprocessor servers provides a way to save compute node cost.</p>

<p><img src="/assets/images/beegfs-layout-two-one.png" alt="BeeGFS HA pair with one E-Series array" /></p>

<p>Comments:</p>

<ul>
  <li>It is usually desirable to put data and metadata on separate disk groups/pools</li>
  <li>Create 1 or 2 volumes on each group/pool and present to BeeGFS server pair(s)
    <ul>
      <li>Use RAID 1 or 10 for metadata, usually no more than 2-3% of data capacity</li>
      <li>Use RAID 6 or DDP for data; on each group/pool create 1 or 2 volumes per BeeGFS server</li>
      <li>EF600 has 24 slots so one nice way to divide that for MD and Data is like this:
        <ul>
          <li>2 RAID 6 groups (8+2) = 20 disks; 1 volume per RAID group when two BeeGFS servers are used</li>
          <li>2 RAID 1 groups (1+1) = 4 disks; 1 volume per RAID group when two BeeGFS servers are used</li>
        </ul>
      </li>
      <li>It's possible to create two metadata volumes on each RAID 1 group, but with two servers one volume per RAID/DDP is enough</li>
    </ul>
  </li>
  <li>If MD doesn't need more than two disks worth of IOPS, we could also create one RAID 1 group with two volumes on it, but while that would save two disks (and slots in the controller chassis), there isn't much we can do with 2 available slots <em>unless</em> we change RAID 6 (8+2) to a wider RAID 6 (10+2) or DDP (12/2). Would that make sense?
    <ul>
      <li>If you need more capacity to avoid buying another storage array and are happy with just two disks for MD, that can be a good idea</li>
      <li>8+2 is most performance-effective RAID 6 configuration for EF600, so if you need more capacity you could as well go with DDP (12/2 or even 12/1) if you're not optimizing for highest data performance</li>
    </ul>
  </li>
</ul>

<h2 id="two-servers-two-disk-arrays">Two servers, two disk arrays</h2>

<p>Sometimes more performance or more capacity is needed. Because we have two E-Series arrays at our disposal, we would probably use 2U, two-way servers to be able to fully utilize their bandwidth.</p>

<p>This is how NetApp BeeGFS Building Block validated for NVIDIA SuperPOD looks like, so you may hear people refer to this approach as "BeeGFS building block".</p>

<p><img src="/assets/images/beegfs-layout-two-two.png" alt="BeeGFS-E-Series Building Block" /></p>

<p>Comments:</p>

<ul>
  <li>Commonly you can't go wrong with RAID 6 for data and RAID 1 for MD, but sometimes you may want to use RAID 10 for MD or DDP for data; usually that has to do with capacity or performance requirements, when a small deviation from RAID 6 (8+2) and RAID 1 can help you avoid purchasing another building block
    <ul>
      <li>Example: one RAID1 (1+1) group and one DDP (22/2) pool per each E-Series array. We should create two volumes per each group and pool to have each server active on 50% of the disks</li>
    </ul>
  </li>
</ul>

<h2 id="other-combinations">Other combinations</h2>

<p>By now it's probably clear that we can pretty much do what we want.</p>

<ul>
  <li>Need 1 million metadata IOPS? Deploy a dedicated HA pair with EF600 for metadata-only workload and deploy separate data "pods" for data-only workload</li>
  <li>Need to maximize capacity and keep the cost-down? Expand EF600 with multiple NL-SAS expansion enclosures (up to 60 18TB disks each) and configure just two wide pools - DDP (30/2) - on each enclosure which takes only 4 disks of overhead per 60 disk enclosure (93.33% usable)</li>
  <li>Don't want to use any SSDs for BeeGFS data disks? Configure a dedicated Metadata "pod" with EF600 (NVMe SSDs) and have Data pods use E5760 with 100% NL-SAS disks</li>
  <li>BeeGFS clusters with very static data could be built with only NL-SAS (for both data and metadata), but consider using SSD pools (DDP) to cost-down from the optimal RAID 1 while still retaining 100-200K IOPS for metadata before you even think about using NL-SAS for metadata. Especially with EF600 and EF300 where controller shelves can only host SSDs, controller shelf is a great place for all-NVMe metadata SSDs - even if SSDs are in a DDP pool made of 1.92TB SSDs, that's still much than any RAID 10 configuration for metadata on NL-SAS disks.</li>
</ul>

<p><img src="/assets/images/beegfs-layout-detailed.png" alt="Custom BeeGFS with E-Series" /></p>

<p>Comments:</p>

<ul>
  <li>Because Metadata volumes are on a dedicated E-Series array, each array dedicated to "Data" has 24 disks slots which means we can either:
    <ul>
      <li>Use two DDP (12/2) pools per array, to make use of all disk slots in the controller shelf (or shelves), <strong>or</strong></li>
      <li>Use two RAID 6 (8+2) groups per array and leave 4 disk slots empty (more optimal performance, but we may need another array if more than 20 disks are required for Data capacity). And adding an extra disk array may also need two more servers, so sometimes a small sacrifice in performance can translate into significant savings</li>
    </ul>
  </li>
  <li>When possible (i.e. disk slots are available, etc.) and needed, it may be advantageous to use more smaller disks for metadata disk groups. By using RAID10 (4+4) made of 1.92TB disks it is possible to get up to 4 times more IOPS than with just two 7.68TB disks in RAID1. The capacity is the same and the cost of capacity is slightly higher, but the gain in performance is significant
    <ul>
      <li>BeeGFS clusters that will grow data will ultimately need more metadata capacity and performance, so we need to find optimal balance between using many small disks for IOPS and few large disks for capacity (like in the earlier examples, we don't want to run out of empty slots and buy another array, but we also don't want to use very large SSDs for metadata and have insufficient metadata performance)</li>
    </ul>
  </li>
</ul>

<h2 id="networking">Networking</h2>

<p>Although the diagrams are simple, it's obvious that common approach is switchless - it involves directly attaching servers to E-Series - while server-to-server and client-to-server communications are supposed to use a high-performance, low-latency network such as Infiniband or Ethernet. The same switch pair could be used for server-to-storage communications, but many clusters don't have it because there's no gain in performance or even manageability, yet it adds to the cost.</p>

<p>If you need fewer servers and many arrays (example: four servers, 12 arrays), DAS won't do it because there aren't enough ports on current E-Series arrays to allow that. In that case a SAN is necessary and a pair of switches (IB or FC) can help. BeeGFS server pairs connected to switches can be connected to multiple E-Series arrays. To use the earlier example of four BeeGFS servers and 12 E-Series arrays: each server pair can be connected to six arrays).</p>

<h2 id="other-information">Other information</h2>

<p>If you plan to deploy BeeGFS with E-Series and get support from NetApp, you should use Ansible to configure E-Series and deploy BeeGFS.</p>

<p>In that case, read <a href="https://docs.netapp.com/us-en/beegfs/beegfs-deploy-overview.html#configuration-profiles-for-beegfs-building-blocks">the documentation</a> to make sure your configuration is supported or submit a feature request (or even better, pull request) for it on Github.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/beegfs" class="page__taxonomy-item p-category" rel="tag">beegfs</a><span class="sep">, </span>
    
      <a href="/tags/e-series" class="page__taxonomy-item p-category" rel="tag">e-series</a><span class="sep">, </span>
    
      <a href="/tags/eseries" class="page__taxonomy-item p-category" rel="tag">eseries</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/sizing" class="page__taxonomy-item p-category" rel="tag">sizing</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2022-08-28T00:00:00+08:00">2022-08-28 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Configuration+approaches+to+NetApp+E-Series+with+ThinkParQ+BeeGFS%20https%3A%2F%2Fscaleoutsean.github.io%2F2022%2F08%2F28%2Fconfiguring-netapp-e-series-solution-for-beegfs.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2022/08/28/configuring-netapp-e-series-solution-for-beegfs.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2022/08/21/timesten-xe-notes.html" class="pagination--pager" title="Oracle TimesTen Classic XE notes">Previous</a>
    
    
      <a href="/2022/08/29/solidfire-backup-to-s3-over-storage-network.html" class="pagination--pager" title="SolidFire Backup to S3 over Storage Network">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/12/22/kinetica-with-netapp-eseries.html" rel="permalink">Kinetica with NetApp E-Series
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-12-22T00:00:00+08:00">2025-12-22 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Why put Kinetic disk and persist tier on EF storage arrays
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/12/17/eseries-santricity-resource-provisioned-vols-groups-pools.html" rel="permalink">Resource Provisioning on E-Series SANtricity
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-12-17T00:00:00+08:00">2025-12-17 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">About resource provsioned volumes and groups/pools
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/12/05/eseries-santricity-lockout.html" rel="permalink">E-Series SANtricity Web UI lockout
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-12-05T00:00:00+08:00">2025-12-05 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">How to use (or not) lockout feature in E-Series SANtricity
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/15/mcp-tapout.html" rel="permalink">TAPOUT - MCP server for ONTAP to E-Series migration
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-15T00:00:00+08:00">2025-10-15 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Migrate to NetApp E-Series arrays with MCP
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
