<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            New Dynamic Disk Pool configuration and E-Series SANtricity | Acting Technologist
      
    </title>
    <meta name="description" content="
     Smaller and more flexible Dynamic Disk Pools on NetApp E-Series, including RAID 1
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>New Dynamic Disk Pool configuration and E-Series SANtricity | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="New Dynamic Disk Pool configuration and E-Series SANtricity" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Smaller and more flexible Dynamic Disk Pools on NetApp E-Series, including RAID 1" />
<meta property="og:description" content="Smaller and more flexible Dynamic Disk Pools on NetApp E-Series, including RAID 1" />
<link rel="canonical" href="https://scaleoutsean.github.io/2022/09/12/new-ddp-and-e-series-santricity-web-restful-api.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2022/09/12/new-ddp-and-e-series-santricity-web-restful-api.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-12T00:00:00+08:00" />
<script type="application/ld+json">
{"headline":"New Dynamic Disk Pool configuration and E-Series SANtricity","dateModified":"2022-09-12T00:00:00+08:00","datePublished":"2022-09-12T00:00:00+08:00","url":"https://scaleoutsean.github.io/2022/09/12/new-ddp-and-e-series-santricity-web-restful-api.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2022/09/12/new-ddp-and-e-series-santricity-web-restful-api.html"},"description":"Smaller and more flexible Dynamic Disk Pools on NetApp E-Series, including RAID 1","author":{"@type":"Person","name":"scaleoutSean"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">New Dynamic Disk Pool configuration and E-Series SANtricity</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>12 Sep 2022</span> - <i class="far fa-clock"></i> 


  
  
    19 minute read
  

    </span>
  </div>
  
        <ul>
  <li><a href="#dynamic-disk-pools-vs-disk-groups">Dynamic Disk Pools vs. Disk Groups</a></li>
  <li><a href="#new-ddp-configuration">New DDP configuration</a></li>
  <li><a href="#what-does-that-mean">What does that mean?</a></li>
  <li><a href="#things-to-note">Things to note</a></li>
  <li><a href="#santricity-web-services-proxy">SANtricity Web Services Proxy</a></li>
  <li><a href="#web-proxy-container">Web Proxy Container</a></li>
  <li><a href="#docs">Docs</a></li>
  <li><a href="#ddp">DDP</a></li>
  <li><a href="#ddp-and-thin-volumes">DDP and Thin Volumes</a></li>
  <li><a href="#examples-of-automation-with-python">Examples of automation with Python</a></li>
  <li><a href="#summary">Summary</a></li>
  <li><a href="#appendix-a---get-pools">Appendix A - GET pools</a></li>
  <li><a href="#appendix-b---post-volumes">Appendix B - POST volumes</a></li>
  <li><a href="#appendix-c---get-volumes">Appendix C - GET volumes</a></li>
  <li><a href="#appendix-d---post-thin-volumes">Appendix D - POST thin-volumes</a></li>
  <li><a href="#appendix-e---get-thin-volumes">Appendix E - GET thin-volumes</a></li>
  <li><a href="#appendix-f---selected-screenshots-from-santricity-web-ui">Appendix F - selected screenshots from SANtricity Web UI</a></li>
</ul>

<h2 id="dynamic-disk-pools-vs-disk-groups">Dynamic Disk Pools vs. Disk Groups</h2>

<p>On E-Series or EF-Series drives, there are traditional disk groups where you configure traditional RAID. For example you can take two disk drives and configure RAID 1.</p>

<p>There’s also DDP about which <a href="/2021/07/06/e-series-ddp-expansion-and-rebalancing.html">I wrote before</a>, where data protection is always RAID 6-like, meaning 8 strips of data, and 2 strips of parity. The difference vs. a RAID 6 Disk Group is that this allocation is fixed no matter how large a DDP gets. So whether you have 11 or 51 disks in a DDP, writes will be 8D2P in 128 KiB chunks.</p>

<h2 id="new-ddp-configuration">New DDP configuration</h2>

<p>Apparently, this has changed and “DDP containers for RAID 1- and RAID6-like volumes” are a thing since SANtricity version 11.70.1. From <a href="https://www.netapp.com/media/12421-tr4652.pdf">TR-4652</a>:</p>

<p><img src="/assets/images/santricity-web-services-proxy-00.png" alt="New DDP configuration" /></p>

<p>If you can’t see the image clearly:</p>

<ul>
  <li>The minimum number of drives in a DDP is 8 when configured through the API and comprised of <strong>SSDs</strong>. It used to be, and still is, 11 when configured through the SANtricity Web management interface</li>
  <li>Now we can use the API to create RAID 1-style volumes on DDPs, and these RAID 1-style volumes can coexist with RAID 6-style volumes in the same DDP (assuming DDP size is 11 or more)</li>
  <li>DDP with 8-10 drives lets you create RAID 1-style volumes in 3+3 configuration (very similar to 6-drive RAID 10 in a “classic” E-Series Disk Group)</li>
  <li>DDP with 11 or more drives creates RAID 1-style volumes as 5+5 configuration, so a DDP with less 11 disk drives that was expanded to 11 (or more) disk drives may have RAID 1 volumes of differing sizes and striping patterns</li>
</ul>

<h2 id="what-does-that-mean">What does that mean?</h2>

<p>It means several things:</p>

<ul>
  <li>we no longer have to configure a separate Disk Group just to get RAID 1 or 10 protection for some volumes (we also don’t need to provide a separate hot spare as DDPs don’t use hot spares)</li>
  <li>if all we want is RAID 6 and RAID 1, this heterogeneous RAID type can make it easier from a sizing perspective as we can just create a big DDP out of all disks and call it a day</li>
  <li>DDP has 1 or 2 disks worth of spare capacity which means we no longer have to quote a separate hot spare for “classic” RAID groups when DDP is already available</li>
</ul>

<p>Practical examples:</p>

<ul>
  <li>EF600 has 24 disk slots in controller shelf. If you need RAID 6 and RAID 1 volumes, we’d do something like 2 x RAID 6 (8D2P) and 2 x RAID 1 to use up all 24 slots, but if we needed less capacity, it could be harder to lay them out nicely. Maybe we’d do 1 x DDP for 11-20 drives instead of RAID 6, but we’d still have separate RAID 1 disk groups</li>
  <li>Now we can use (for example) 1 x DDP with 15 drives, have RAID 10-like and RAID 6-like data in this one pool, and be able to grow it by one or more disks at a time while not having an idle Hot Spare or Cold Spare sitting there doing nothing</li>
</ul>

<p>Before vs now:</p>

<ul>
  <li>Before: 2 x RAID 6 + 2 x RAID 1 = 24 disks, and one Cold Spare on the side</li>
  <li>Now: 1 x DDP with RAID 6- and RAID 1-like volumes (11-24 drives, with 2 drives of spare capacity)</li>
</ul>

<p>A simplified version of “before” below shows two RAID 1 (1+1) groups and a DDP. There’s also a global hot spare for either of the RAID 1 groups.</p>

<p><img src="/assets/images/eseries-raid1-ddp-hs.png" alt="Spare resources with DDP and RAID 1" /></p>

<p>Recall - as it is not visible in the image - DDP doesn’t use Hot Spares. It has two drives worth of spare capacity spread among all pool members.</p>

<p>While this configuration style has its advantages, sometimes requirements work against it. In such cases we could “merge” two RAID 1 groups into DDP, eliminate that Hot Spare, and still enjoy a better level of protection for RAID 1 (not in the sense that it can withstand more than 1 concurrent failure, but that instead of having the usual 1 hot spare, it can lose several disks (up to DDP protection level) as long as critical reconstruction completes before next disk fails).</p>

<p>DDP in the picture has more than 11 disks so RAID 10 would be written in 5+5 strips. Two <em>concurrent</em> disk failures in this DDP can still lose RAID 10 data, but two failures over two days of one weekend would not, because DDP would very likely reconstruct critical strips between disk failures.</p>

<h2 id="things-to-note">Things to note</h2>

<p>If you start with a 9 drive DDP configured via the REST API, you won’t be able to create RAID 6-like volumes until you grow the DDP by two additional disk drives. But you can start with RAID 10-like volumes and migrate data to RAID 6-like volume later, if you don’t mind the extra work. Generally I wouldn’t recommend this, but there may be workloads (scale-out, etc.) where migration can be painless - add a new worker with new RAID 6 configuration, remove an old worker with old RAID 1 configuration, etc. until you’ve moved all data from RAID 1 to RAID 6 volumes on DDP.</p>

<p>If you start with a 10 drive DDP and RAID 10-like volumes, and later grow the DDP to 11 and beyond, new and old RAID 10 “containers” won’t be the same size (3+3 vs 5+5). Same as above, this may or may not be annoying. If you run scale-out services or can afford some downtime, this may be easy to address by draining old and adding new nodes.</p>

<p>All disks in a DDP must have the same disk size.</p>

<p>Unlike “classic” disk groups, IO workload from RAID 10 and RAID 6 “volume containers” in a DDP is co-mingled, so it’s not possible to separate the workloads as clearly. So a little bit more caution is required when combining workloads on the same DDP group - unlike with “classic” RAID 1 and RAID 6 which share the controllers, here R1 and R6 volumes share physical media as well.</p>

<p>On the one hand, we lose the benefit of workload segregation on disk level and (for R6 migrated into DDP) Full Stripe Write Acceleration (possible with “classic” RAID 6), but on the other we spread workloads across more disks and on the whole we may also gain from not over-sizing one RAID type with classic RAID, for example.</p>

<p>We should also think of mixed workload situations where we do not have or can’t know the details while sizing. In such situations hard segregation of disks into “classic” volume groups can be risky. In those cases using DDP may be more appropriate - it loses some performance up-front (compared to “classic” RAID), but it can deliver both RAID 1- and RAID 6-like performance, so it lowers the risk of mis-sizing. DDP has been around for a while, but this approach wasn’t possible because it accommodated only RAID 6-like volumes - if you gave up RAID 1 in favor of DDP, that was much more risky than giving up RAID 1 volume group in favor of RAID 1-like volumes in a DDP.</p>

<h2 id="santricity-web-services-proxy">SANtricity Web Services Proxy</h2>

<p>The “small DDP” feature is not yet available in the Web UI - we must set it via the API. Let’s take a look at that. First we need a SANtricity Web Services Proxy.</p>

<p>It’s a reverse proxy for one or more stand-alone or embedded (i.e. into E-Series or EF-Series controllers) SANtricty management interfaces.</p>

<p>You can run this thing locally on your “management workstation”, for example.</p>

<p>You can learn more about it <a href="https://docs.netapp.com/us-en/e-series/web-services-proxy/index.html">here</a>. One thing I’ve learned by randomly browsing TFM is that pre-REST SYMbol is exposed through Web Services proxy and you may want to disable it for additional security.</p>

<h2 id="web-proxy-container">Web Proxy Container</h2>

<p>Okay, so how do we use this thing if we don’t have it in our lab?</p>

<p>After some RTFM I found there’s no need to download anything by logging in anywhere - there’s a freely downloadable container image on the Web.</p>

<p>Adjust this Docker command to use 127.0.0.1 or a port inaccessible to external network. I’ll use port 8443 as per the example from Docker Hub.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">-p8443</span>:8443 <span class="nt">-e</span> <span class="nv">ACCEPT_EULA</span><span class="o">=</span><span class="nb">true </span>netapp/eseries-webservices
Unable to find image <span class="s1">'netapp/eseries-webservices:latest'</span> locally
latest: Pulling from netapp/eseries-webservices
8663204ce13b: Already exists 
bee9030860e0: Pull <span class="nb">complete 
</span>a16c61869286: Pull <span class="nb">complete 
</span>a790ba5de190: Pull <span class="nb">complete 
</span>Digest: sha256:df9d3265c13274606dfb7aa701bb006f81fb6d5bd2941bf4abd147494cb7d559
Status: Downloaded newer image <span class="k">for </span>netapp/eseries-webservices:latest
...
</code></pre></div></div>

<p>Leave that console window open and elsewhere check the IP address and port.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker ps <span class="nt">-a</span>                          
CONTAINER ID   IMAGE                       PORTS
92dd54394678   netapp/eseries-webservices  0.0.0.0:8443-&gt;8443/tcp, :::8443-&gt;8443/tcp
</code></pre></div></div>

<p>You know where to go…</p>

<p><img src="/assets/images/santricity-web-services-proxy-01.png" alt="SANtricity Web Services proxy" /></p>

<h2 id="docs">Docs</h2>

<p>If you prefer to consume the docs offline, download them and shut down the container (assuming localhost:8443):</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://localhost:8443/docs/static_docs.zip
</code></pre></div></div>

<p>Or you can browse ‘em live at <a href="https://localhost:8443/um/en-US/root.html">https://localhost:8443/um/en-US/root.html</a>.</p>

<p><img src="/assets/images/santricity-web-services-proxy-02.png" alt="Web Services API with Swagger" /></p>

<p>Get to Swagger at <a href="https://localhost:8443/devmgr/docs/">https://localhost:8443/devmgr/docs/</a> (assuming localhost:8443).</p>

<h2 id="ddp">DDP</h2>

<p>Interestingly there’s nothing about Volume Groups or Pools. I guess that means Volumes is the section to look at.</p>

<p><img src="/assets/images/santricity-web-services-proxy-03.png" alt="Volumes section in SANtricity Swagger" /></p>

<p>I assume the right method is <a href="https://localhost:8443/devmgr/docs/#/Volumes/new-StoragePool">https://localhost:8443/devmgr/docs/#/Volumes/new-StoragePool</a>. Default JSON in Swagger:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"raidLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raidUnsupported"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"diskDriveIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"string"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"eraseSecuredDrives"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>We may want to do something like:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"raidLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"diskDriveIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"1,2,3,4,5,6,7,8"</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nl">"eraseSecuredDrives"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ddp1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>According to Cloud Insights <a href="https://docs.netapp.com/us-en/cloudinsights/task_dc_na_eseries.html#storage">documentation</a> it’s how SANtricity reports DDPs.</p>

<blockquote>
  <p>Redundancy – RAID level or protection scheme. E-Series reports “RAID 7” for DDP pools</p>
</blockquote>

<p>As best I can tell, that’s simply wrong. See examples in Appendices below.</p>

<p>After we have a DDP, we can create RAID1-style volumes on it. For that use <code class="language-plaintext highlighter-rouge">POST /storage-systems/{system-id}/volumes</code> to create a RAID 1 or 6 volume, which would look something like this:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"poolId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ddp1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid10logdisk"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sizeUnit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gb"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"segSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dataAssuranceEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"owningControllerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"raidLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metaTags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"workload"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"database"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"blockSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>For completely correct examples, please refer to the JSONs from Appendices below as it was obtained from a real SANtricity OS 11.80.</p>

<p>After that we’d use methods from Mapping section to create a host group, add a host or hosts to it, and map the volume to that host or host group.</p>

<h2 id="ddp-and-thin-volumes">DDP and Thin Volumes</h2>

<p><strong>NOTE</strong>: the E-Series NVMe arrays (EF300 and EF600, presently) do not support thin provisioning (on DDP, as that’s the only protection level that supports DDP, just not on NVMe arrays). This is as of SANtricity 11.80 (written in September 2023).</p>

<p>SAS-based E-Series arrays do support thin provisioning (pn DDPs). This includes all E2800, E5700 models.</p>

<p>Thin provisioning thresholds are surfaced to hosts which use them. I noticed this on a client which had a thin LUN presented to it.</p>

<pre><code class="language-raw">Oct  4 04:59:43 icxxxxxxxx kernel: [ 2932.137283] sd 15:0:0:24: Mode parameters changed
Oct  4 04:59:43 icxxxxxxxx kernel: [ 2932.152894] sd 15:0:0:24: Warning! Received an indication that the LUN reached a thin provisioning soft threshold.
</code></pre>

<h2 id="examples-of-automation-with-python">Examples of automation with Python</h2>

<p>TFM says there are samples of automation scripts in the samples directory. Enter your docker container to see them.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/opt/netapp/webservices_proxy <span class="c"># cd /opt/netapp/webservices_proxy/samples/restapi/python</span>

/opt/netapp/webservices_proxy <span class="c"># ls -la</span>
total 80
drwxr-xr-x    2 root     root          4096 May 16 23:54 <span class="nb">.</span>
drwxr-xr-x    3 root     root          4096 May 16 23:54 ..
<span class="nt">-rwxr-xr-x</span>    1 root     root          2773 May 16 23:54 async_mirroring.py
<span class="nt">-rwxr-xr-x</span>    1 root     root          5055 May 16 23:54 configuration.py
<span class="nt">-rwxr-xr-x</span>    1 root     root          2448 May 16 23:54 consistency_groups.py
<span class="nt">-rwxr-xr-x</span>    1 root     root          1963 May 16 23:54 copies.py
<span class="nt">-rwxr-xr-x</span>    1 root     root          1094 May 16 23:54 device_alerts.py
<span class="nt">-rwxr-xr-x</span>    1 root     root           329 May 16 23:54 device_alerts_email.py
<span class="nt">-rwxr-xr-x</span>    1 root     root          1634 May 16 23:54 device_asup.py
<span class="nt">-rwxr-xr-x</span>    1 root     root           418 May 16 23:54 device_asup_logs.py
<span class="nt">-rwxr-xr-x</span>    1 root     root           793 May 16 23:54 event_monitoring.py
<span class="nt">-rwxr-xr-x</span>    1 root     root          1021 May 16 23:54 hardware_inventory.py
<span class="nt">-rwxr-xr-x</span>    1 root     root          1498 May 16 23:54 pools.py
<span class="nt">-rwxr-xr-x</span>    1 root     root            17 May 16 23:54 requirements.txt
<span class="nt">-rwxr-xr-x</span>    1 root     root          4243 May 16 23:54 restlibs.py
<span class="nt">-rwxr-xr-x</span>    1 root     root          1928 May 16 23:54 snapshots.py
<span class="nt">-rwxr-xr-x</span>    1 root     root           955 May 16 23:54 symbol.py
<span class="nt">-rwxr-xr-x</span>    1 root     root          1120 May 16 23:54 volumes.py

/opt/netapp/webservices_proxy <span class="c"># less pools.py</span>
</code></pre></div></div>

<p>There is nothing too revealing in there, but fine - we know we need to get drives or just name drive IDs if we can view them in the Web UI, and <code class="language-plaintext highlighter-rouge">POST</code> this to target.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">drives_req</span> <span class="o">=</span> <span class="p">{</span>
          <span class="s">"driveCount"</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
          <span class="s">"interfaceType"</span><span class="p">:</span> <span class="s">"fibre"</span>
<span class="n">driveSet</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s">'driveRef'</span><span class="p">],</span> <span class="n">drives</span><span class="p">)</span>
<span class="n">generic_post</span><span class="p">(</span><span class="s">'pools'</span><span class="p">,</span> <span class="p">{</span><span class="s">'diskDriveIds'</span> <span class="p">:</span> <span class="n">driveSet</span><span class="p">,</span>
    <span class="s">'name'</span> <span class="p">:</span> <span class="s">'pool1'</span><span class="p">,</span>
    <span class="s">'raidLevel'</span> <span class="p">:</span> <span class="s">"raidDiskPool"</span><span class="p">},</span> <span class="n">array_id</span><span class="o">=</span><span class="n">array</span><span class="p">[</span><span class="s">'id'</span><span class="p">])</span>
</code></pre></div></div>

<p>Unfortunately, there’s nothing about valid inputs or DDP-related examples so we should refer to the JSON example from Swagger.</p>

<p>If you’re starting with Python you can first try the <a href="https://hub.docker.com/r/netapp/eseries-webservices/">example</a> from Docker Hub:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="s">"""Issue a simple request to list the monitored systems"""</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://dot.org.com:443/devmgr/v2/storage-systems'</span><span class="p">,</span>
                          <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">},</span>
                          <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s">'rw'</span><span class="p">,</span> <span class="s">'myp@ass'</span><span class="p">))</span>
    <span class="n">pprint</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div></div>

<p>PowerShell users: it seem E-Series PowerShell Toolkit has been discontinued (at least I can no longer find it), but since it wasn’t very advanced, it’s not hard to create your own cmdlets for these 2-3 methods.</p>

<h2 id="summary">Summary</h2>

<p>The new DDP features are smaller minimum pool size (8, limited to RAID 1-only volumes) and the ability to provision RAID 1 and RAID 6 in same DDP (with 11 or more drives).</p>

<p>These provide additional flexibility and improve the economics of E-Series:</p>

<ul>
  <li>Create RAID 1-style volumes in DDP for easier capacity management</li>
  <li>Grow RAID 1-style volumes in DDP by growing DDP by as little as one drive at a time</li>
  <li>Avoid Hot or Cold Spares for configurations that have RAID 1 (now on DDP) compared to before where a Hot or Cold Spare had to be allocated even for the smallest RAID 1 Disk Group -  especially convenient and economical for single-shelf SSD configurations</li>
</ul>

<h2 id="appendix-a---get-pools">Appendix A - GET pools</h2>

<pre><code class="language-raw">curl -X GET "https://san.trici.ty:8443/devmgr/v2/storage-systems/$WWID/storage-pools"
</code></pre>

<p>Example of an array with just one pool (actually there was more than one, but other entries (RAID6 Disk Groups) were removed to shorten the output). You can see that it’s <code class="language-plaintext highlighter-rouge">raidDiskPool</code> and not <code class="language-plaintext highlighter-rouge">raid7</code>.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"sequenceNum"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"offline"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"raidLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raidDiskPool"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"worldWideName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"600A098000E3C1B000002CED62CF874D"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volumeGroupRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04000000600A098000E3C1B000002CED62CF874D"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reserved1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reserved2"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trayLossProtection"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sean_pool"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"spindleSpeedMatch"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"spindleSpeed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"isInaccessible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"securityType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"drawerLossProtection"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"protectionInformationCapable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"protectionInformationCapabilities"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protectionInformationCapable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protectionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type2Protection"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"volumeGroupData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"diskPool"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"diskPoolData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"reconstructionReservedDriveCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reconstructionReservedAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"791884595200"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reconstructionReservedDriveCountCurrent"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nl">"poolUtilizationWarningThreshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"poolUtilizationCriticalThreshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">85</span><span class="p">,</span><span class="w">
        </span><span class="nl">"poolUtilizationState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"utilizationOptimal"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unusableCapacity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"degradedReconstructPriority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"high"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"criticalReconstructPriority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"highest"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"backgroundOperationPriority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"low"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"allocGranularity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4294967296"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"minimumDriveCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
        </span><span class="nl">"poolVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"usage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"driveBlockFormat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"allEmulated"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reservedSpaceAllocated"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"securityLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dulbeEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blkSizeSupported"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mi">512</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"blkSizeRecommended"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usedSpace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3620657430528"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalRaidedSpace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13039520710656"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"sectorOffset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"rawCapacity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9418863280128"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"raidLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raidDiskPool"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeGroupRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04000000600A098000E3C1B000002CED62CF874D"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"freeExtentRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03010000600A098000E3C1B000002CED62CF874D"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reserved1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000000000000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reserved2"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ddpRAIDCapacities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"ddpVolRAIDLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid6"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"usableCapacity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9418863280128"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allocGranularity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4294967296"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"ddpVolRAIDLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"usableCapacity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5886789550080"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allocGranularity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2684354560"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"largestFreeExtentSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9418863280128"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"raidStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optimal"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"freeSpace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9418863280128"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"drivePhysicalType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sas"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"driveMediaType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssd"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"normalizedSpindleSpeed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"spindleSpeedSSD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"diskPool"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04000000600A098000E3C1B000002CED62CF874D"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sean_pool"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div></div>

<h2 id="appendix-b---post-volumes">Appendix B - POST volumes</h2>

<pre><code class="language-raw">curl -X POST "https://san.trici.ty:8443/devmgr/v2/storage-systems/$WWID/volumes"  
</code></pre>

<p>A minimal example of a JSON file that needs to be passed with this call:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"poolId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04000000600A098000E3C1B000002CED62CF874D"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sizeUnit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bytes"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10737418240"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"segSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">131072</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dataAssuranceEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"raidLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metaTags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"createdBy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scaleoutSeanApiCall"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"blockSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<p>That <code class="language-plaintext highlighter-rouge">poolId</code> value was obtained with <code class="language-plaintext highlighter-rouge">GET pools</code> in Appendix A.</p>

<h2 id="appendix-c---get-volumes">Appendix C - GET volumes</h2>

<pre><code class="language-raw">curl -X GET "https://san.trici.ty:8443/devmgr/v2/storage-systems/$WWID/volumes"
</code></pre>

<p>An example for the volume created above after host presentation was finished in the Web UI (which we can tell by the fact that my original meta tags were rudely overwritten by SANtricity UI (as far as I can tell)).</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"offline"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"extremeProtection"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeHandle"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
        </span><span class="nl">"raidLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid6"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sectorOffset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"worldWideName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"600A098000E3C1B000002F12650EC6BC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poolbased"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"blkSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
        </span><span class="nl">"capacity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10737418240"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reconPriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"segmentSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">131072</span><span class="p">,</span><span class="w">
        </span><span class="nl">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cache"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"cwob"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"enterpriseCacheDump"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readCacheActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readCacheEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writeCacheActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writeCacheEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cacheFlushModifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flush10Sec"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readAheadMultiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"mediaScan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"enable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"parityValidationEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"volumeRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02000000600A098000E3C1B000002F12650EC6BC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optimal"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeGroupRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04000000600A098000E3C1B000002CED62CF874D"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currentManager"</span><span class="p">:</span><span class="w"> </span><span class="s2">"070000000000000000000002"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"preferredManager"</span><span class="p">:</span><span class="w"> </span><span class="s2">"070000000000000000000002"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"perms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"mapToLUN"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"snapShot"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reconfigure"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorPrimary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorSecondary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"copySource"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"copyTarget"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"rollback"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorSync"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"newImage"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allowDVE"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allowDSS"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"concatVolumeMember"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"flashReadCache"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"asyncMirrorPrimary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"asyncMirrorSecondary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pitGroup"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cacheParametersChangeable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allowThinManualExpansion"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allowThinGrowthParametersChange"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allowImportTarget"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"mgmtClientAttribute"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"dssPreallocEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"dssMaxSegmentSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">131072</span><span class="p">,</span><span class="w">
        </span><span class="nl">"preReadRedundancyCheckEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"protectionInformationCapable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"protectionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type1Protection"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"applicationTagOwned"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"repairedBlockCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"extendedUniqueIdentifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00002F12650EC6BC00A0980000E3C1B0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cacheMirroringValidateProtectionInformation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"expectedProtectionInformationAppTag"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hostUnmapEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cachePoolID"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"blkSizePhysical"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
        </span><span class="nl">"dataDriveCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"parityDriveCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"allocGranularity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4294967296"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeUse"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standardVolume"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeFull"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeCopyTarget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeCopySource"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pitBaseVolume"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"asyncMirrorTarget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"asyncMirrorSource"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"remoteMirrorSource"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"remoteMirrorTarget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"diskPool"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"flashCached"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"increasingBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"createdBy"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SANtricity System Manager"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"createdUTC"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1695489982"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"workloadId"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4200000009000000000000000000000000000000"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"dataAssurance"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"volume"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"wwn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"600A098000E3C1B000002F12650EC6BC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"preferredControllerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"070000000000000000000002"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"totalSizeInBytes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10737418240"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"onlineVolumeCopy"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"listOfMappings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"lunMappingRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8800000062000000000000000000000000000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"lun"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
                </span><span class="nl">"ssid"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
                </span><span class="nl">"perms"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
                </span><span class="nl">"volumeRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02000000600A098000E3C1B000002F12650EC6BC"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"host"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mapRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84000000600A098000E3C1B000302F0C650C2668"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8800000062000000000000000000000000000000"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"mapped"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currentControllerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"070000000000000000000002"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cacheSettings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"cwob"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"enterpriseCacheDump"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readCacheActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readCacheEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writeCacheActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writeCacheEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cacheFlushModifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flush10Sec"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readAheadMultiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"thinProvisioned"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poolbased"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02000000600A098000E3C1B000002F12650EC6BC"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div></div>

<h2 id="appendix-d---post-thin-volumes">Appendix D - POST thin-volumes</h2>

<p>This goes to thin-volumes (not volumes) path!</p>

<pre><code class="language-raw">curl -X POST "https://san.trici.ty:8443/devmgr/v2/storage-systems/$WWID/thin-volumes"
</code></pre>

<p>A minimal example of a JSON file that need to be passed with this call:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"poolId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04000000600A098000E3C1B000002CED62CF874D"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expansionPolicy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"automatic"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid1thinn"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sizeUnit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bytes"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"virtualSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1047483648"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maximumRepositorySize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32212254720"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"repositorySize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25474836480"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"growthAlertThreshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"segSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">131072</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dataAssuranceEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"raidLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blockSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<h2 id="appendix-e---get-thin-volumes">Appendix E - GET thin-volumes</h2>

<p>This also goes to thin-volumes (not volumes) path!</p>

<pre><code class="language-raw">curl -X GET https://san.trici.ty:8443/devmgr/v2/storage-systems/$WWID/thin-volumes
</code></pre>

<p>Example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"volumeHandle"</span><span class="p">:</span><span class="w"> </span><span class="mi">16385</span><span class="p">,</span><span class="w">
        </span><span class="nl">"worldWideName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"600A098000F6371400002A50650ED517"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid1thinn"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"allocationGranularity"</span><span class="p">:</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span><span class="w">
        </span><span class="nl">"capacity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6416192512"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reconPriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3A000000600A098000F6371400002A50650ED517"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optimal"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"repositoryRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36000000600A098000F6371400002A4E650ED517"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currentManager"</span><span class="p">:</span><span class="w"> </span><span class="s2">"070000000000000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"preferredManager"</span><span class="p">:</span><span class="w"> </span><span class="s2">"070000000000000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"perms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"mapToLUN"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"snapShot"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reconfigure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorPrimary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorSecondary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"copySource"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"copyTarget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"rollback"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorSync"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"newImage"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allowDVE"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allowDSS"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"concatVolumeMember"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"flashReadCache"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"asyncMirrorPrimary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"asyncMirrorSecondary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pitGroup"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cacheParametersChangeable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allowThinManualExpansion"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allowThinGrowthParametersChange"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"allowImportTarget"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"mgmtClientAttribute"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"preReadRedundancyCheckEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"protectionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type1Protection"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"applicationTagOwned"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxVirtualCapacity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"281474976710656"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"initialProvisionedCapacity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25769803776"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currentProvisionedCapacity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25769803776"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"provisionedCapacityQuota"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25769803776"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"growthAlertThreshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="nl">"expansionPolicy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"automatic"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeCache"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"cwob"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"enterpriseCacheDump"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readCacheActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readCacheEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writeCacheActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writeCacheEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cacheFlushModifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flush10Sec"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readAheadMultiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"offline"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reportingPolicy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asThin"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"extendedUniqueIdentifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00002A50650ED51700A0980000F63714"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeFull"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeGroupRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04000000600A098000E3C1B000002CED62CF874D"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"blkSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
        </span><span class="nl">"storageVolumeRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02000000600A098000F6371400002A4D650ED517"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeCopyTarget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volumeCopySource"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pitBaseVolume"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"asyncMirrorTarget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"asyncMirrorSource"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"remoteMirrorSource"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"remoteMirrorTarget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"flashCached"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mediaScan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"enable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"parityValidationEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="nl">"dataAssurance"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thinVolume"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"wwn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"600A098000F6371400002A50650ED517"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"preferredControllerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"070000000000000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"totalSizeInBytes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6416192512"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"onlineVolumeCopy"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"diskPool"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"segmentSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">131072</span><span class="p">,</span><span class="w">
        </span><span class="nl">"listOfMappings"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="nl">"mapped"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currentControllerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"070000000000000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cacheSettings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"cwob"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"enterpriseCacheDump"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mirrorEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readCacheActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readCacheEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writeCacheActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writeCacheEnable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cacheFlushModifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flush10Sec"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"readAheadMultiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"thinProvisioned"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raid1thinn"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3A000000600A098000F6371400002A50650ED517"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div></div>

<h2 id="appendix-f---selected-screenshots-from-santricity-web-ui">Appendix F - selected screenshots from SANtricity Web UI</h2>

<p>Using that simplest JSON to create a RAID1 DDP volume, we miss some details (as expected). Our new RAID volume is <code class="language-plaintext highlighter-rouge">raid1</code> and it’s not presented to a host yet.</p>

<p><img src="/assets/images/eseries-ddp-raid1-01-post-result.png" alt="" /></p>

<p>Finish host assignment and other configuration details in the Web UI or provide a more complete JSON to complete everything in one go.</p>

<p>As soon as a thin DDP volume is created, you’re likely to get a SANtricity alert. That’s because the threshold is set to just 1%.</p>

<p>I guess the idea is this is dangerous stuff, so everyone should be forced to set their own alert threshold. For the same reason, thin volumes can be created only through the API (if at all).</p>

<p>Anyway, go to Thin Volume Monitoring tab to increase the threshold.</p>

<p><img src="/assets/images/eseries-ddp-raid1-02-thin-volume-monitoring.png" alt="" /></p>

<p>You may want a bigger number, such as 70% or whatever works for you (calculate carefully!). You need to have enough spare capacity even if all thin volumes grow to this alert level at the same time.</p>

<p><img src="/assets/images/eseries-ddp-raid1-03-thin-volume-settings.png" alt="" /></p>

<p>Say you have 10TB of spare capacity in a pool and 10 thin volumes that are currently using 0.2 TB each, but can grow to 4 TB.</p>

<p>If each went from 0.2 to 1 TB used, the pool would run out of free capacity. In that case setting all of them to 22% may be appropriate (22% of 4TB over 10 volumes is 8.8 TB). Or use per-volume settings. In any case, this example shows that sometimes setting a low threshold alert isn’t unreasonable.</p>

<p>Thin volumes can be enlarged from the main Volumes pane. Here it’s being increased from 0.97 Gi to 10 Gi.</p>

<p><img src="/assets/images/eseries-ddp-raid1-04-thin-volume-increase-capacity.png" alt="" /></p>


      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#storage">storage</a>
       
    
  </span>
</div>
    

  
    <div>
      <h3>Related Posts</h3>
      <ul>
      
        <li><a href="/2023/10/05/snapshots-and-consistency-groups-with-netapp-e-series.html">Stand-alone and Consistency Group snapshots on NetApp E-Series</a></li>
      
        <li><a href="/2022/12/07/eseries-password-change-powershell.html">PowerShell password change script for local user account on E-Series SANtricity OS</a></li>
      
        <li><a href="/2023/08/30/monitoring-solidfire-clone-and-backup-jobs.html">Use SolidFire API to monitor clone and backup jobs for profit and pleasure</a></li>
      
        <li><a href="/2022/01/01/getting-solidfire-volume-details-python-powershell-api-cli.html">Getting SolidFire volume details with Powershell and Python</a></li>
      
        <li><a href="/2020/12/08/get-bearer-token-for-netapp-hci-hybrid-cloud-control-logs.html">Get NetApp Hybrid Cloud Control logs via the HCC API</a></li>
      
      </ul>
    </div>
  

    
  </div><footer class= "footer">
    <p>2024-05-30 09:15 </p>
    <p>Copyright © 2024 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
