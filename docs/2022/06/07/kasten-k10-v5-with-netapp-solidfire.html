<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>The new Kasten K10 v5.0 with NetApp SolidFire | Acting Technologist</title>
<meta name="description" content="What's new in Kasten K10 5.0.0 and how to use it with SolidFire">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="The new Kasten K10 v5.0 with NetApp SolidFire">
<meta property="og:url" content="https://scaleoutsean.github.io/2022/06/07/kasten-k10-v5-with-netapp-solidfire.html">


  <meta property="og:description" content="What's new in Kasten K10 5.0.0 and how to use it with SolidFire">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="The new Kasten K10 v5.0 with NetApp SolidFire">
  <meta name="twitter:description" content="What's new in Kasten K10 5.0.0 and how to use it with SolidFire">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2022/06/07/kasten-k10-v5-with-netapp-solidfire.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2022-06-07T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2022/06/07/kasten-k10-v5-with-netapp-solidfire.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="The new Kasten K10 v5.0 with NetApp SolidFire">
    <meta itemprop="description" content="What's new in Kasten K10 5.0.0 and how to use it with SolidFire">
    <meta itemprop="datePublished" content="2022-06-07T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2022/06/07/kasten-k10-v5-with-netapp-solidfire.html" itemprop="url">The new Kasten K10 v5.0 with NetApp SolidFire
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-06-07T00:00:00+08:00">2022-06-07 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <ul>
  <li><a href="#kubernetes-native-rbac">Kubernetes-native RBAC</a></li>
  <li><a href="#s3-object-lock-support">S3 Object Lock support</a></li>
  <li><a href="#officialized-kanister-blueprints-for-sql-server-and-postgresql-operator-aka-pgo">"Officialized" (Kanister) blueprints for SQL Server and PostgreSQL Operator aka PGO</a></li>
  <li><a href="#openstack-and-vsphere-in-infrastructure-profiles">OpenStack and vSphere in Infrastructure Profiles</a></li>
  <li><a href="#officialized-veeam-backup-server-in-location-profiles">"Officialized" Veeam Backup Server in Location Profiles</a></li>
  <li><a href="#k10-v500-with-netapp-solidfire-12-and-netapp-trident-2204">K10 v5.0.0 with NetApp SolidFire 12 and NetApp Trident 22.04</a>
    <ul>
      <li><a href="#the-snapshot-stuff">The snapshot stuff</a></li>
      <li><a href="#selected-screenshots">Selected screenshots</a></li>
    </ul>
  </li>
  <li><a href="#conclusion">Conclusion</a></li>
  <li><a href="#appendix-a---netapp-solidfire-kasten-k10-and-wasabi-s3-object-lock">Appendix A - NetApp SolidFire, Kasten K10 and Wasabi S3 Object Lock</a></li>
</ul>

<p>Kasten K10 5.0.0 was released last night, which means it's time to try it out.</p>

<p>There's a lot of new features so I'll mention those that I find interesting:</p>

<h2 id="kubernetes-native-rbac">Kubernetes-native RBAC</h2>

<p>Better security, obviously!</p>

<h2 id="s3-object-lock-support">S3 Object Lock support</h2>

<p>This likely works with NetApp StorageGRID, which Veeam supports as well.</p>

<p>For direct use by K10, the bucket for Object Lock data must be in compliance mode (which StorageGRID supports) with the <a href="https://docs.kasten.io/latest/usage/configuration.html#immutable-backups">minimum</a> default retention of 21 days.</p>

<p>I think this should work with Veeam-proxied StorageGRID (although I should RTFM to be sure): backup to Veeam BR repo, tier to a StorageGRID bucket with Object Lock enabled.</p>

<p>NOTE: if you decide to experiment with S3 Object Lock, be very careful with default retention period you set on the bucket. And with StorageGRID, do not enable S3 Object Lock on the entire cluster unless you know what that means.</p>

<h2 id="officialized-kanister-blueprints-for-sql-server-and-postgresql-operator-aka-pgo">"Officialized" (Kanister) blueprints for SQL Server and PostgreSQL Operator aka PGO</h2>

<p>These are now easy to manage (create, view, edit).</p>

<p>SQL Server for Linux is extremely easy to use and automate with SolidFire (years ago I did <a href="https://www.youtube.com/watch?v=qgHuWYQwhUA">this short demo with  data masking using SQL Server for Linux and SolidFire</a>), so I'll likely do a post dedicated to this.</p>

<p>Both SQL Server and PGO leverage Kanister. I blogged about <a href="https://scaleoutsean.github.io/2022/04/13/backup-restore-beegfs-csi-pv-with-kanister-kasten.html">Kanister</a> recently, if you're curious about that <a href="https://docs.kasten.io/5.0.0/install/generic.html">part of K10</a>.</p>

<h2 id="openstack-and-vsphere-in-infrastructure-profiles">OpenStack and vSphere in Infrastructure Profiles</h2>

<p>Most folks (especially the readers of this blog) know that Trident CSI isn't the only provisioner that can be used with SolidFire.</p>

<p>If you run Kubernetes on OpenStack with SolidFire, you likely use Cinder CSI, which means you can now use K10 to snapshot, back up and restore PVs on SolidFire. Woo-hoo!</p>

<p>When I blogged about Cinder CSI (see the second link below), backup and restore was lacking. Not that it can't be done without Veeam, but it would have involved using freeware or DIY approaches, which isn't something all customers like when it comes to data protection.</p>

<p>Similarly, Tanzu clusters on vSphere can use Sphere CSI plugin with SolidFire or E-Series SANs. One of the related improvements is block mode export, which allows Change Block Tracking to export (and K10 to backup/restore) only incremental changes. This is good for any user, but especially those with large volumes (such as Big Data users with large volumes on E-Series).</p>

<p>Related posts:</p>

<ul>
  <li><a href="https://scaleoutsean.github.io/2022/05/18/vmware-tanzu-netapp-eseries.html">Tanzu with vSphere CSI and E-Series</a></li>
  <li><a href="https://scaleoutsean.github.io/2022/03/02/openstack-solidfire-part-2.html">Kubernetes on OpenStack with Cinder CSI and SolidFire</a></li>
</ul>

<h2 id="officialized-veeam-backup-server-in-location-profiles">"Officialized" Veeam Backup Server in Location Profiles</h2>

<p>If you already use Veeam to backup your vSphere VMs to E-Series, now you can use the same Veeam back-end storage to backup Tanzu (vSphere CSI) or other Kubernetes (Trident CSI, Cinder CSI).</p>

<p>You can see the complete list of all new features at kasten.io.</p>

<p>Now let's see what these updates mean for SolidFire and E-Series users.</p>

<h2 id="k10-v500-with-netapp-solidfire-12-and-netapp-trident-2204">K10 v5.0.0 with NetApp SolidFire 12 and NetApp Trident 22.04</h2>

<p>I've blogged about Kasten with SolidFire before (see <a href="https://scaleoutsean.github.io/archive.html">Archive</a>), so I will skip the routine installation and features that existed in v4.</p>

<p>The other reeason is I had Kasten v4 up and running, so I simply upgraded by copy-pasting a Helm-based Kasten upgrade command from TFM.</p>

<p>Upgrade worked fine and within a minute or so K10 5.0.0 was up and running.</p>

<p>I had used this cluster (Kubernetes v1.23) for BeeGFS CSI-related posts so although it had Trident CSI installed, it didn't have <a href="https://docs.netapp.com/us-en/trident-2201/trident-use/vol-snapshots.html">the snapshots-related stuff</a> (notice this link is for v22.01) deployed.</p>

<h3 id="the-snapshot-stuff">The snapshot stuff</h3>

<p>I metioned this in previous Kasten-related posts, but it's easy to get wrong so I'll mention it again:</p>

<ul>
  <li>The Kasten docs for 5.0.0 <a href="https://docs.kasten.io/5.0.0/install/storage.html#volumesnapshotclass-configuration">mention</a> only Alpha and Beta Snapshot API (i.e.<code class="language-plaintext highlighter-rouge">v1beta1</code>)</li>
  <li>The Trident docs for v22.01 (link above) mention external snapshotter v3 (which is/was classic <code class="language-plaintext highlighter-rouge">v1beta1</code> snapshotter), but v22.04 mentions both v3 and v5 (the latter has deprecated <code class="language-plaintext highlighter-rouge">v1beta1</code>). Meanwhile there's already <a href="https://github.com/kubernetes-csi/external-snapshotter">v6</a> available.</li>
</ul>

<p>I used latest "classic" version (v3), which is v3.1, but struggled to get it to work well. Then I used v3.0 (which is what Trident v22.01 recommends) with no difference. Specifically, Kasten sometimes (but not always) reported that it couldn't find a VSC annotated with <code class="language-plaintext highlighter-rouge">k10.kasten.io/is-snapshot-class: "true"</code> (which I had).</p>

<p>I then upgraded Trident from v22.01 to v22.04 and when that didn't change anything, I just ignored those problems. Perhaps I should have ignored Kasten's recommendation to use external snapshotter API v1beta1 and just use latest and greatest, but the problem didn't bother me much as I could simply retry.</p>

<p>I settled with a VSC using snapshot API version <code class="language-plaintext highlighter-rouge">v1beta1</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">snapshot.storage.k8s.io/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">VolumeSnapshotClass</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">csi-snapclass</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="na">k10.kasten.io/is-snapshot-class</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
<span class="na">driver</span><span class="pi">:</span> <span class="s">csi.trident.netapp.io</span>
<span class="na">deletionPolicy</span><span class="pi">:</span> <span class="s">Delete</span>
</code></pre></div></div>

<p>In any case, the point here is you need to find a setup that works with Kasten, CSI provisioner, and Kubernetes.</p>

<p>If I had a chance to do this again, I'd try latest external snapshotter supported by Trident. Maybe there was no problem at all and my little cluster simply occasionally timed out on some (g)RPC requests due to memory and CPU pressures.</p>

<p>Once Kasten finds this Volume Snapshot Class (VSC), it creates a "shadow" VSC that retains Trident's backed-up snapshots (meaning, those snapshots exported to S3 as backups, for example) so you'd see at least two VSCs - like this:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get volumesnapshotclass
NAME                      DRIVER                  DELETIONPOLICY   AGE
csi-snapclass             csi.trident.netapp.io   Delete           37m
k10-clone-csi-snapclass   csi.trident.netapp.io   Retain           22m
</code></pre></div></div>

<p>Why? From TFM:</p>

<blockquote>
  <p>K10 creates a clone of the original VolumeSnapshotClass with the DeletionPolicy set to 'Retain'. When restoring a CSI VolumeSnapshot, an independent replica is created using this cloned class to avoid any accidental deletions of the underlying VolumeSnapshotContent.</p>
</blockquote>

<p>And while snapshots taken via Trident are "real" and can be seen in the SolidFire UI, with K10 you'll see something like this:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get volumesnapshots <span class="nt">-n</span> trident
NAME                            READYTOUSE   SOURCEPVC                SOURCESNAPSHOTCONTENT
k10-csi-snap-74sgfk9ljxvszjp2   <span class="nb">true         </span>pvc-volume-in-default
k10-csi-snap-bj7l6kh2c8zntc8k   <span class="nb">true         </span>task-pvc-volume
k10-csi-snap-fq5424q66wzpql9n   <span class="nb">true                                  </span>k10-csi-snap-fq5424q66wzpql9n-content-c2cf092d-ac19-4dd4-a3e8-4e0064d245a8   
</code></pre></div></div>

<p>This, by the way, shows snapshots of PVCs in the Trident namespace. We probably wouldn't try to back up Trident with K10 snapshots (how would we restore them if Trident isn't up and running?), but it could be done with some effort. (I had only two apps which used Trident (the rest of them use BeeGFS CSI, which doesn't support snapshots) - that's why I tried to backup the Trident namespace - it was the one with more (2) Trident PVCs).</p>

<h3 id="selected-screenshots">Selected screenshots</h3>

<p>You may open these images in new tab/window to view them in higher resolution.</p>

<p>This was a test backup run that took Trident snapshots of Trident PVCs. Because provisioning of new volumes relies on Trident, I knew that restore would fail (it did fail). We could backup and restore Trident with K10 or manually, but I wasn't trying to do that.</p>

<p><img src="/assets/images/kasten-5.0-with-netapp-solidfire-trident-01.png" alt="Backup Policy Run with SolidFire" /></p>

<p>Snapshots taken by Kasten viewed in the SolidFire UI:</p>

<p><img src="/assets/images/kasten-5.0-with-netapp-solidfire-trident-02.png" alt="Volume Snapshots in SolidFire UI" /></p>

<p>The Backup Policy I created for Trident wasn't scheduled, but On Demand. I don't remember if Kasten 4 had that or not, but it is a very convenient (non) schedule for testing - you don't have to edit a schedule every time you want to fire a backup job.</p>

<p>It's easy to take on-demand snapshots without any Backup Policy and - if you don't want to snapshot all the application stuff - just add the stuff you want (or just exclude the stuff you do <em>not</em> want). In this screenshot I just included the PVCs from an app, so it's the "classic" storage backup approach.</p>

<p><img src="/assets/images/kasten-5.0-with-netapp-solidfire-trident-03.png" alt="On-demand snapshots" /></p>

<p>At the bottom you can see that Kanister options could be used, if you wanted to build a customized blueprint.</p>

<p>If you're not sure what's there to be protected, you can click on an application's details to examine them. (This <code class="language-plaintext highlighter-rouge">sfc</code> container is my SolidFire Collector, which gathers SolidFire metricis and stuffs them into Graphite for visualization in Grafana - last month I finally <a href="https://scaleoutsean.github.io/2022/05/02/solidfire-collector-in-kubernetes.html">documented</a> how to run the sucker in Kubernetes.)</p>

<p><img src="/assets/images/kasten-5.0-with-netapp-solidfire-trident-04.png" alt="Identify application resources" /></p>

<p>Then we can create a one-off snapshot of resource(s) we want - whether it's storage-only, application-level settings or something in between.</p>

<p><img src="/assets/images/kasten-5.0-with-netapp-solidfire-trident-05.png" alt="Taking on-demand snapshot" /></p>

<p>By the way, the <code class="language-plaintext highlighter-rouge">kanister</code> application you see above is a manually installed Kanister that I used for BeeGFS CSI demos (see blog Archive). That is, <em>that</em> Kanister wasn't installed by Kasten, which (by default) installs its components in its own namespace, by default <code class="language-plaintext highlighter-rouge">kasten-io</code>.</p>

<p>Two of the more exciting news in version 5 are in Infrastructure Profiles: Kasten can now protect Kubernetes clusters on OpenStack and vSphere.</p>

<p>As mentioned earlier, users of Kubernetes on OpenStack with SolidFire would use Cinder CSI rather than Trident CSI. Kasten doesn't need to know anything about SolidFire here - it talks to OpenStack which uses Cinder to handle everything, and in SolidFire-backed OpenStack clusters Cinder uses SolidFire.</p>

<p><img src="/assets/images/kasten-5.0-with-netapp-solidfire-trident-06.png" alt="K10, SolidFire, OpenStack, vSphere" /></p>

<p>It's similar for Tanzu clusters that use vSphere CSI - Kasten just talks to vSphere CSI, which takes care of interacting with vSphere-compatible back-ends, whether it's E-Series or SolidFire or something else.</p>

<p>Speaking of vSphere, many NetApp customers use Veeam to protect their vSphere environments, and plenty of them store backups on StorageGRID, E-Series, or ONTAP.</p>

<p>In version 5 Kasten brings K10 and Veem BR closer and users who use it with NetApp back-end storage (ONTAP, StorageGRID, E-Series) can easily take advantage of Veeam BR infrastructure from within Kasten.</p>

<p><img src="/assets/images/kasten-5.0-with-netapp-solidfire-trident-07.png" alt="Location Profiles for S3, NFS, Veeam" /></p>

<p>I used only StorageGRID here, but NFS should be easy to visualize while Veeam Backup Server with E-Series can be <a href="https://www.youtube.com/watch?v=SCzk3ZpfT-Y">seen in this video demo</a> where I used it with Veeam's Scale-Out Backup mode and there's also a nice <a href="https://www.netapp.com/pdf.html?item=/media/17159-tr4471pdf.pdf">Technical Report</a> with best practices for Veeam BR and NetApp E-Series.</p>

<p>At the beginning of this post I mentioned how the Kanister stuff seems to be progressing from "Tier 2" to "Tier 1". This screnshot shows where Kanister Blueprints are.</p>

<p><img src="/assets/images/kasten-5.0-with-netapp-solidfire-trident-10.png" alt="Location Profiles for S3, NFS, Veeam" /></p>

<p>If you're curious about Kanister, RTFM and check the Kasten and Kanister posts in Archives - specifically the one on stand-alone Kanister with BeeGFS CSI as well as <a href="https://scaleoutsean.github.io/2021/09/09/kasten-v4-with-solidfire-logical-and-snapshot-assisted-data-protection.html">this post on Kasten's logical backup</a> feature).</p>

<p>And finally, some eye candy! Kasten 5 lets you get its metrics into Prometheus, but it also comes with a built-in Grafana instance that can be opened from the main K10 Web UI.</p>

<p><img src="/assets/images/kasten-5.0-with-netapp-solidfire-trident-08.png" alt="Grafana dashboards by Kasten" /></p>

<h2 id="conclusion">Conclusion</h2>

<p>Kasten K10 5.0.0 contains improvements related to security, increased ecosystem reach (OpenStack Cinder CSI, vSphere CSI, with similar progress in the public cloud) as well as integration with Veeam BR.</p>

<p>From a SolidFire and E-Series perspective there are no new features, but Kasten 5 opens up new possibilities in vSphere (vSphere CSI + both E-Series and SolidFire) and OpenStack (Cinder CSI + SolidFire) environments.</p>

<p>Additionally, improved Kanister integration means that even BeeGFS CSI clusters with E-Series <a href="https://scaleoutsean.github.io/2022/04/13/backup-restore-beegfs-csi-pv-with-kanister-kasten.html">may be able</a> to use Kasten's Kanister plugin to take large backups of multi-TB BeeGFS volumes and protect them in S3 Objet Lock-compatible buckets.</p>

<p>Why is this a big deal? Because users with <a href="https://scaleoutsean.github.io/2022/04/09/beegfs-csi-introduction.html">BeeGFS CSI</a> on E-Series can now buy an extra E-Series array, configure S3 Object Lock compatible StorageGRID cluster running on 1U bare metal servers, and get a reliable and secure backup destination for BeeGFS data. It's not something that works out of the box, but the Kanister post shows that it can work and it should behave the same way with Kasten.</p>

<p>The new Microsoft SQL Server and PostgreSQL (PGO) integrations remains to be covered in another post, maybe after first minor update for Kasten K10 comes out.</p>

<h2 id="appendix-a---netapp-solidfire-kasten-k10-and-wasabi-s3-object-lock">Appendix A - NetApp SolidFire, Kasten K10 and Wasabi S3 Object Lock</h2>

<p><a href="/2022/05/06/solidire-backup-to-s3-with-object-lock.html#practical-observations">Yesterday I tested</a> built-in SolidFire Backup to S3, so I used the opportunity to also check Kasten K10 in the same context. Meanwhile K10 has been updated from 5.0.0 to 5.0.1 and I performed an upgrade before trying this out. I still haven't cleaned up this cluster, but it was good enough as-is for this walk-through.</p>

<p>Create a bucket in a region of your choosing.</p>

<p><img src="/assets/images/solidfire-kasten-wasabi-object-lock-01-create-bucket.png" alt="Create a bucket using S3 Compatible storage type" /></p>

<p>Make sure Versioning and Object Lock are enabled. Use the opportunity to validate that the bucket is usable by K10. Kasten K10 5.0 needs at least 21 days of Object Lock retention.</p>

<p><img src="/assets/images/solidfire-kasten-wasabi-object-lock-02-create-bucket-second.png" alt="Enable Versioning and S3 Object Lock" /></p>

<p>Create an API account for Kasten's use and apply appropriate access policies for the bucket to only permit this account access to</p>

<p>Then create a new Location Profile to use this bucket.</p>

<p><img src="/assets/images/solidfire-kasten-wasabi-object-lock-03-create-location-profile.png" alt="Create Location Profile in Wasabi" /></p>

<p>Now when we create protection policies, we can enable snapshot exports (i.e. backup to this S3 bucket).</p>

<p><img src="/assets/images/solidfire-kasten-wasabi-object-lock-04-enable-snapshot-exports.png" alt="Enable snapshot exports in Kasten protection policies" /></p>

<p>When we run backup jobs, data should be exported to this bucket.</p>

<p><img src="/assets/images/solidfire-kasten-wasabi-object-lock-05-run-backup-job.png" alt="Backup job" /></p>

<p>If you create DR backups that let you failover Kubernetes to another site, don't forget to disable old, and enable new DR destination (which is the Wasabi bucket with Object Lock enabled).</p>

<p><img src="/assets/images/solidfire-kasten-wasabi-object-lock-06-modify-dr-destination.png" alt="Enable Object Lock-enabled DR for Kubernetes" /></p>

<p>If Show Versions is enabled in the Wasabi UI, you can see which objects have multiple versions.</p>

<p><img src="/assets/images/solidfire-kasten-wasabi-object-lock-07-view-bucket-object-versions.png" alt="Show Versions in Wasabi Web UI" /></p>

<p>The same can be observed in other clients, just look for objects with version &gt; <code class="language-plaintext highlighter-rouge">V1</code> to see what K10 did between consecutive runs.</p>

<p><img src="/assets/images/solidfire-kasten-wasabi-object-lock-08-view-cli-object-versions.png" alt="Show object versions with generic S3 CLI or API" /></p>

<p>We don't need to care about object versions and mustn't tamper with objects and versions by bypassing K10: K10 will create new, overwrite existing and expire unnecessary objects according to policies we create and actions we perform. This is no different from other backup software - while Object Lock prevents deletion with versioning and locking, backup software controls versioning and deletion. I haven't tried, but I think messed up object versions would confuse K10 and we'd have to restore objects by copying older version in place of corrupted or deleted version to fix that.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/backup" class="page__taxonomy-item p-category" rel="tag">backup</a><span class="sep">, </span>
    
      <a href="/tags/data-management" class="page__taxonomy-item p-category" rel="tag">data management</a><span class="sep">, </span>
    
      <a href="/tags/kanister" class="page__taxonomy-item p-category" rel="tag">kanister</a><span class="sep">, </span>
    
      <a href="/tags/kasten" class="page__taxonomy-item p-category" rel="tag">kasten</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a><span class="sep">, </span>
    
      <a href="/tags/trident" class="page__taxonomy-item p-category" rel="tag">trident</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/kubernetes" class="page__taxonomy-item p-category" rel="tag">kubernetes</a><span class="sep">, </span>
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2022-06-07T00:00:00+08:00">2022-06-07 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=The+new+Kasten+K10+v5.0+with+NetApp+SolidFire%20https%3A%2F%2Fscaleoutsean.github.io%2F2022%2F06%2F07%2Fkasten-k10-v5-with-netapp-solidfire.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2022/06/07/kasten-k10-v5-with-netapp-solidfire.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2022/05/30/rightsizing-in-the-cloud.html" class="pagination--pager" title="Rightsizing compute resources in the cloud with Spot.io">Previous</a>
    
    
      <a href="/2022/06/14/batch-copy-files-beegfs.html" class="pagination--pager" title="Copy files to/from BeeGFS before or after scheduled jobs">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/01/10/minio-aistor-eseries-patterns.html" rel="permalink">E-Series and MinIO AIStor Enterprise Lite patterns
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-01-10T00:00:00+08:00">2026-01-10 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          7 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Why single node clusters are now an Enterprise approach and earlier E-Series patterns stil relevant
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/01/10/eseries-santricity-odx-vaai.html" rel="permalink">Windows ODX with E-Series SANtricity
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-01-10T00:00:00+08:00">2026-01-10 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Windows Offloaded Data Transfer (ODX) with NetApp E-Series SANtricity
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/01/06/eseries-santricity-powershell.html" rel="permalink">santricity-powershell for Day 1+ E-Series automation
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-01-06T00:00:00+08:00">2026-01-06 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Replace SMcli for most Day 1+ operations
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/01/05/eseries-santricity-smcli-client.html" rel="permalink">How to actually get started with E-Series SANtricity SMcli
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-01-05T00:00:00+08:00">2026-01-05 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">How to use SMcli and why you should not
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
