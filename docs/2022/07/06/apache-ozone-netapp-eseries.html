<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Apache Ozone S3 and NetApp E-Series | Acting Technologist</title>
<meta name="description" content="When to use Apache Ozone with E-Series">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Apache Ozone S3 and NetApp E-Series">
<meta property="og:url" content="https://scaleoutsean.github.io/2022/07/06/apache-ozone-netapp-eseries.html">


  <meta property="og:description" content="When to use Apache Ozone with E-Series">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Apache Ozone S3 and NetApp E-Series">
  <meta name="twitter:description" content="When to use Apache Ozone with E-Series">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2022/07/06/apache-ozone-netapp-eseries.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2022-07-06T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2022/07/06/apache-ozone-netapp-eseries.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Apache Ozone S3 and NetApp E-Series">
    <meta itemprop="description" content="When to use Apache Ozone with E-Series">
    <meta itemprop="datePublished" content="2022-07-06T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2022/07/06/apache-ozone-netapp-eseries.html" itemprop="url">Apache Ozone S3 and NetApp E-Series
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-07-06T00:00:00+08:00">2022-07-06 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>I'm supposed to be resting this week and that hasn't been working out… Still, I'll try to keep this one shorter than the previous two posts from this week.</p>

<ul>
  <li><a href="#wtf-is-apache-ozone">WTF is Apache Ozone</a></li>
  <li><a href="#why-should-we-use-apache-ozone">Why should we use Apache Ozone</a></li>
  <li><a href="#what-does-ozone-look-like">What does Ozone look like</a></li>
  <li><a href="#s3-gateway">S3 gateway</a></li>
  <li><a href="#ozone-with-e-series">Ozone with E-Series</a></li>
  <li><a href="#to-do-items">To-Do items</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="wtf-is-apache-ozone">WTF is Apache Ozone</h2>

<p>Let me get creative and pilfer their <a href="https://ozone.apache.org/">own explanation</a>:</p>

<blockquote>
  <p>Apache Ozone is a highly scale-able, distributed storage for Analytics, Big data and Cloud Native applications. Ozone supports S3 compatible object APIs as well as a Hadoop Compatible File System implementation. It is optimized for both efficient object store and file system operations.</p>
</blockquote>

<h2 id="why-should-we-use-apache-ozone">Why should we use Apache Ozone</h2>

<p>Clearly - I mean based on the introduction above - some Hadoop fans love the fact that they can get a modernized HDFS-compatible storage with S3 gateway built right in. Ozone also features an HDFS-compatible OzoneFS and S3A.</p>

<p>If you're one of such folks <em>and</em> at the same time realize converged HDFS and compute hasn't worked that well for you, maybe you'd want to both dis-aggregate <em>and</em> modernize, which is what you can get from Ozone, but also from E-Series (I wrote about enhancing HDFS-compatible storage with E-Series in <a href="/2022/06/22/e-series-hdfs.html">this post</a>).</p>

<h2 id="what-does-ozone-look-like">What does Ozone look like</h2>

<p>Ozone runs on bare metal, VMs or in containers (Docker, K8s, Nomad, etc.). It seems there's a CSI plugin as well.</p>

<p>There are several services involved, but I don't want to rehash the official documentation (look it up if you're interested) so I'll just talk about it from a high-level practical perspective.</p>

<p>First, there's a built-in Web UI which is nice and responsive. I built Ozone from the source and started it with Docker Compose.</p>

<p><img src="/assets/images/apache-ozone-s3-e-series-01.png" alt="Azure Ozone Web UI" /></p>

<p>Once you're in and see that everything's working, you can run some workloads to test it out. There are many different metrics exposed, but they can be scraped from outside of the cluster for centralized monitoring - you are not limited by what you can see in the Web UI (which is 20-30 metrics).</p>

<p><img src="/assets/images/apache-ozone-s3-e-series-02.png" alt="Azure Ozone metrics dashboard" /></p>

<p>RPC metrics are available on its own page, I suppose because that helps you see if you have any network-related issues. I've had no RPC failures, which was expected (given that I ran this cluster in Docker Compose).</p>

<p><img src="/assets/images/apache-ozone-s3-e-series-03.png" alt="Azure Ozone RPC metrics" /></p>

<h2 id="s3-gateway">S3 gateway</h2>

<p>Ozone's S3 gateway aims for AWS S3-compatibility. I installed AWS CLI and was able to create a bucket using AWS S3API.</p>

<p>The way S3 on Ozone works is /s3v is the Ozone volume that's available via S3 (if you enable Ozone S3 gateway). If you don't want the Hadoop stuff but just want S3, that would be the only <em>volume</em> you'd create, and then buckets within it.</p>

<p>The second noteworthy detail is by default it's HTTP-only. I expected at least a self-signed snake-oil TLS option, but nope… It seems they're still working on it and meanwhile you could add a TLS-terminating reverse proxy in front of Ozone, to get around that.</p>

<p><img src="/assets/images/apache-ozone-s3-e-series-05.png" alt="Azure Ozone S3 gateway" /></p>

<h2 id="ozone-with-e-series">Ozone with E-Series</h2>

<p>In that <a href="/2022/06/22/e-series-hdfs.html">post</a> linked earlier I wrote why I think it makes sense to use Hadoop with external storage - basically the idea is no matter how fancy the software is, it's always easier to manage and maintain storage by using RAID-protected building blocks. The same applies to Ozone so take a look at that link to see what I meant.</p>

<p>Here we see Ozone's data protection schemes: RF1, RF2, RF3, and various EC schemes.</p>

<p><img src="/assets/images/apache-ozone-s3-e-series-06.png" alt="Azure Ozone settings" /></p>

<p>How would we use those with E-Series? Some examples:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Use case</th>
      <th style="text-align: center">Ozone S3</th>
      <th style="text-align: center">E-Series</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Value S3 buckets (bulk)</td>
      <td style="text-align: center">RF1</td>
      <td style="text-align: center">Wide DDP</td>
    </tr>
    <tr>
      <td style="text-align: left">Fast S3 Big Data/Analytics</td>
      <td style="text-align: center">RF2</td>
      <td style="text-align: center">RAID6 or DDP</td>
    </tr>
    <tr>
      <td style="text-align: left">Value S3 Big Data/Analytics</td>
      <td style="text-align: center">EC</td>
      <td style="text-align: center">Wide DDP</td>
    </tr>
    <tr>
      <td style="text-align: left">HDFS/S3 Big Data/Analytics</td>
      <td style="text-align: center">any</td>
      <td style="text-align: center">RAID6 or DDP</td>
    </tr>
  </tbody>
</table>

<p>Ozone RF1 makes sense only with protected storage, which is how you can get lowest cost with excellent durability due to E-Series's HA architecture and Dynamic Disk Pools (see that Hadoop on E-Series post for more on that) Ozone data is protected from controller failures, dual concurrent disk failures, and even shelf failures (you need to have a handful of shelves) and protection overhead is very low (~10%).</p>

<p>If you need highest performance with Ozone and E-Series, Ozone should use RF2 on top of E-Series volumes protected with RAID6 (better for sequential performance, but higher overhead than DDP) or DDP (better for mixed workloads). As indicated in the post about Hadoop with E-Series, RF3 is unnecessary due to there already being enough redundancy in E-Series, and it doesn't even help with the performance.</p>

<p>If you have enough capacity and performance to require several E-Series arrays, Ozone can use EC to stripe data across multiple E-Series arrays.</p>

<p>Now, what do we need to do to "tune" Ozone for E-Series? Ozone is already tuned for sequential workloads that one would expect to see in Big Data environments, and so is E-Series. You could surely fine-tune both further, but you'd need to know for what workload(s).</p>

<p>Ozone has a ton of settings that can impact performance and can be easily changed.</p>

<p><img src="/assets/images/apache-ozone-s3-e-series-04.png" alt="Azure Ozone settings" /></p>

<p>On E-Series it's simpler - there's just two-three things to consider - RAID segment size, RAID/DDP configuration, shelf/controller type and connectivity (FC, IB, etc.).</p>

<h2 id="to-do-items">To-Do items</h2>

<p>Some things that I might do with Ozone and E-Series later this year (if I find a reason):</p>

<ul>
  <li>I haven't investigated how Ozone S3 scales <em>out</em> (that is, I haven't checked if localhost:9878 service runs on all nodes, or just one) and whether S3 autoscaling is possible</li>
  <li>I'd like to evaluate HTTPS integration (with NGINX or something like that)</li>
  <li>I'd like to do basic performance testing with Ozone S3 and E-Series to see if Ozone S3 can effectively use storage performance that E-Series can deliver</li>
  <li>Understand how Ozone S3 ACLs compare to AWS S3 ACLs</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>There are many ways for S3 SDS to leverage E-Series. Many NetApp customers use StorageGRID because StorageGRID appliances minimize risk, work with a variety of workloads, and are validated for many enterprise applications.</p>

<p>Ozone S3 is a relative newcomer and still very young (current version 1.2.1) and focused on Big Data workloads, so it must be appealing to users with that background. It doesn't provide fancy enterprise features and certifications, it requires more effort to plan, implement and maintain, but it should be very effective in use cases similar to those I outlined above. I wouldn't use it for many small objects, or from S3 clients that make use of many S3 API features.</p>

<p>It seems some ISVs (at least Cloudera, maybe there are others) provide paid support for Ozone, so E-Series users looking for supported Ozone S3 could get support for Ozone from their Big Data or Kubernetes stack provider, and deploy it with E-Series by simply presenting E-Series volumes (or host-path (static) volumes in the case of Kubernetes) to their Ozone servers/VMs/containers.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/apache" class="page__taxonomy-item p-category" rel="tag">apache</a><span class="sep">, </span>
    
      <a href="/tags/e-series" class="page__taxonomy-item p-category" rel="tag">e-series</a><span class="sep">, </span>
    
      <a href="/tags/eseries" class="page__taxonomy-item p-category" rel="tag">eseries</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/ozone" class="page__taxonomy-item p-category" rel="tag">ozone</a><span class="sep">, </span>
    
      <a href="/tags/s3" class="page__taxonomy-item p-category" rel="tag">s3</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/analytics" class="page__taxonomy-item p-category" rel="tag">analytics</a><span class="sep">, </span>
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2022-07-06T00:00:00+08:00">2022-07-06 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Apache+Ozone+S3+and+NetApp+E-Series%20https%3A%2F%2Fscaleoutsean.github.io%2F2022%2F07%2F06%2Fapache-ozone-netapp-eseries.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2022/07/06/apache-ozone-netapp-eseries.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2022/07/05/kafka-solidfire-efficiency.html" class="pagination--pager" title="Storage efficiency with Kafka 3.2 and NetApp SolidFire 12">Previous</a>
    
    
      <a href="/2022/07/07/milvus-with-solidfire-e-series.html" class="pagination--pager" title="Milvus with SolidFire and E-Series">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/10/post-quantum-crypto-proxy-for-solidfire-eseries-api.html" rel="permalink">Post-Quantum API proxy for E-Series and SolidFire
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-10T00:00:00+08:00">2025-10-10 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Enterprise-grade PQC TLS encryption for E-Series and SolidFire API endpoints
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/09/storagegrid-s3-cache-branch-buckets.html" rel="permalink">StorageGRID Branch Buckets and Read Cache
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-09T00:00:00+08:00">2025-10-09 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Some ways to take better advantage of the new features in StorageGRID 12
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/08/epa-3.5.1.html" rel="permalink">E-Series Performance Analyzer v3.5.1
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-08T00:00:00+08:00">2025-10-08 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">E-Series Performance Analyzer v3.5.1 has been released with minor improvements
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/07/ecp-eseries-performance-analyzer-aka-collector.html" rel="permalink">E-Series SANtricity Collector (ESC 4)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-07T00:00:00+08:00">2025-10-07 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">About EPA 4 (aka ESC 4) and how to pick the right one for you
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
