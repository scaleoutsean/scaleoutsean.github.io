<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Evaluating ONTAP S3 performance with s3tester | Acting Technologist</title>
<meta name="description" content="Finding viable ONTAP configuration for specific S3 use case">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Evaluating ONTAP S3 performance with s3tester">
<meta property="og:url" content="https://scaleoutsean.github.io/2022/03/17/ontap-s3-performance-test.html">


  <meta property="og:description" content="Finding viable ONTAP configuration for specific S3 use case">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Evaluating ONTAP S3 performance with s3tester">
  <meta name="twitter:description" content="Finding viable ONTAP configuration for specific S3 use case">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2022/03/17/ontap-s3-performance-test.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2022-03-17T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2022/03/17/ontap-s3-performance-test.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Evaluating ONTAP S3 performance with s3tester">
    <meta itemprop="description" content="Finding viable ONTAP configuration for specific S3 use case">
    <meta itemprop="datePublished" content="2022-03-17T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2022/03/17/ontap-s3-performance-test.html" itemprop="url">Evaluating ONTAP S3 performance with s3tester
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-03-17T00:00:00+08:00">2022-03-17 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>ONTAP has had S3 service for a while now. While ONTAP S3 isn't meant to take over large and complex S3 workloads in which NetApp StorageGRID excels, it is more than capable of servicing many S3 requirements.</p>

<p>People use ONTAP S3 for various purposes, from container registry (Red Hat <a href="/2022/01/17/redhat-quay-with-ontap-s3.html">Quay</a>) to generic small to medium S3 workloads.</p>

<h2 id="requirements">Requirements</h2>

<p>Recently I got a question about the viability of ONTAP S3 for the hosting of JavaScript libraries and similar static files for internal Web applications.</p>

<p>This customer has a few thousand users and one of existing all-flash ONTAP appliances would be used to provide S3 service.</p>

<p>This sounded like a relatively simple question. I figured we'd need about few hundred requests per second and probably even less if a caching layer is in place. Should be easy!</p>

<h2 id="tests">Tests</h2>

<p>Despite these guesstimates, I wanted to run some tests to see if those assumptions sounded about right.</p>

<p>I used <a href="https://github.com/s3tester/s3tester">s3tester</a> to evaluate GET (which I figure could be 90% of the workload) and HEAD performance on ONTAP 9.10.1.</p>

<p>I ran the usual test (PUT, GET, HEAD, DELETE) to evaluate requests per second, focusing on GET.</p>

<p>I was relying on ONTAP System Manager performance charts here, and quickly concluded that with 50 concurrent requests (see the second run in green rectangle) I could get IOPS similar to what I get with 100 concurrent requests (the first two Latency bumps in green rectangle), but with a much better latency.</p>

<p><img src="/assets/images/ontap-s3-s3tester-00-concurrency-adjustment.png" alt="s3tester concurrency impact on latency and performance" /></p>

<p>Why there are two latency bumps in each run?</p>

<ul>
  <li>PUT - 100% writes, latency goes up</li>
  <li>GET - 100% read, latency drops to almost zero, but IOPS go to maximum</li>
  <li>HEAD - 100% small read, latency very low, very little network traffic</li>
  <li>DELETE - 100% delete, latency goes up again, very little network traffic</li>
</ul>

<p>s3tester spits out a result for each test and GET got me around 9,000 requests per second with 10ms latency. I used a consistent 8KB object size in all tests.</p>

<p><img src="/assets/images/ontap-s3-s3tester-01-concurrency-adjustment-100rps-example.png" alt="s3tester at 100 requests per second with OTS S3" /></p>

<p>Later on I tried few more variants, and concurrency level (not "rps") 80 worked best in this environment. Although the chart lines hadn't been drawn yet, we can see the IOPS number shows 9.87k (GET) IOPS per second.</p>

<p><img src="/assets/images/ontap-s3-s3tester-02-concurrency-adjustment.png" alt="s3tester optimal result at 80 rps" /></p>

<p>I took a screenshot of the same period again to show that point drawn on the chart (orange circle). You can also see my annotations for stages of each run at the center.</p>

<p><img src="/assets/images/ontap-s3-s3tester-03-rps-rates.png" alt="s3tester various test results" /></p>

<p>I forgot to save the result with concurrency 80, but here's the GET result with concurrency 70:</p>

<pre><code class="language-raw">        --- Total Results ---
Operation: get
Endpoint: https://s3.com.org:443
Concurrency: 70
Total number of requests: 199990
Total number of unique objects: 199990
Failed requests: 0
Total elapsed time: 22.024509172s
Average request time: 7.592932ms
Minimum request time: 670Âµs
Maximum request time: 457.99ms
Nominal requests/s: 9219.1
Actual requests/s: 9080.3
Content throughput: 69.277485 MB/s
Average Object Size: 8000
Total Object Size: 1599920000
Response Time Percentiles
50     :   6.67 ms
75     :   10.24 ms
90     :   14.25 ms
95     :   16.52 ms
99     :   20.2 ms
99.9   :   26.56 ms
Latency(ms) : Operations
  0 - 1   : 18156 ||||||||||||||||||||||
  2 - 3   : 35321 ||||||||||||||||||||||||||||||||||||||||||
  4 - 7   : 67644 |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
  8 - 15  : 66855 ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
 16 - 31  : 11897 |||||||||||||||
 32 - 63  : 47    |
 64 - 127 : 2     |
128 - 255 : 27    |
256 - 458 : 41    |
</code></pre>

<p>Compared to results with 90 concurrent requests this result has a lower latency. In the both cases we had no failed GET requests.</p>

<p>I think less than 1,000 GET requests per second should enough for this customer, especially if a reverse proxy were to be added in front of ONTAP S3. But clearly ONTAP S3 is capable of much more.</p>

<p>This isn't to say it can handle anything. I did manage to hit some timeouts (not on <code class="language-plaintext highlighter-rouge">GET</code>s, though).</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2022/03/16 18:48:37 Failed delete on object bucket <span class="s1">'bucket/test-146604'</span>: ServiceUnavailable: Reduce your request rate.
        status code: 503, request <span class="nb">id</span>: , host <span class="nb">id</span>:
</code></pre></div></div>

<p>Is this concerning? And shouldn't latency on flash be lower? No and no.</p>

<p>First, I ran s3tester from a single VM which was a bottleneck itself.</p>

<p><img src="/assets/images/ontap-s3-s3tester-04-ots-vm-bottleneck.png" alt="s3tester with client bottleneck" /></p>

<p>Second, ONTAP S3 itself was just a VM. (VM label is misleading as VM was upgraded to 9.10.1 since it was deployed.)</p>

<p><img src="/assets/images/ontap-s3-s3tester-05-vm-bottleneck.png" alt="ONTAP Select with h/w bottleneck" /></p>

<p>And that was a small VM (4 vCPU, ESXi 7, Xeon Silver from 2018) with external storage on a single NetApp HCI (SolidFire iSCSI) volume, so one thing that we can safely conclude here is that s3tester and ONTAP Select managed to max out the modest VM resources allocated to S3 client and ONTAP Select S3 server. We could have increased these resources, but we were interested in meeting a specific requirement rather than achieving the maximum S3 server performance.</p>

<h2 id="take-aways">Take aways</h2>

<p>In conclusion, even this ONTAP Select can more than satisfy customer's requirements.</p>

<p>Any all-flash ONTAP appliance should be able to deliver S3 performance that's multiple times higher than what we observed in these s3tester runs.</p>

<p>Reverse proxies could be added to further improve GET and HEAD performance.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/benchmark" class="page__taxonomy-item p-category" rel="tag">benchmark</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/ontap" class="page__taxonomy-item p-category" rel="tag">ontap</a><span class="sep">, </span>
    
      <a href="/tags/ontap-s3" class="page__taxonomy-item p-category" rel="tag">ontap s3</a><span class="sep">, </span>
    
      <a href="/tags/performance" class="page__taxonomy-item p-category" rel="tag">performance</a><span class="sep">, </span>
    
      <a href="/tags/s3" class="page__taxonomy-item p-category" rel="tag">s3</a><span class="sep">, </span>
    
      <a href="/tags/s3tester" class="page__taxonomy-item p-category" rel="tag">s3tester</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2022-03-17T00:00:00+08:00">2022-03-17 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Evaluating+ONTAP+S3+performance+with+s3tester%20https%3A%2F%2Fscaleoutsean.github.io%2F2022%2F03%2F17%2Fontap-s3-performance-test.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2022/03/17/ontap-s3-performance-test.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2022/03/17/curl-json-solidfire-api.html" class="pagination--pager" title="curl with native JSON support and SolidFire API">Previous</a>
    
    
      <a href="/2022/03/22/solidfire-storagegrid-data-workflows-kestra.html" class="pagination--pager" title="Simplify data workflows with Kestra">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/15/updated-terraform-provider-solidfire.html" rel="permalink">Terraform provider for SolidFire update for Feb 2026
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-15T00:00:00+08:00">2026-02-15 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Latest and greatest Terraform provider for SolidFire status update (2026/02)
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/02/14/weak-security-ssh-client.html" rel="permalink">Overcome SSH invalid key length, SSH security annoyances
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-02-14T00:00:00+08:00">2026-02-14 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Fix for the annoying SSH invalid key error
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/01/30/storagegrid-branch-buckets-snapshots.html" rel="permalink">Using S3 bucket snapshots in StorageGRID 12
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-01-30T00:00:00+08:00">2026-01-30 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          7 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Branch buckets are bucket snapshots. Read how to create, use and delete them
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2026/01/26/santricity-glances-plugin.html" rel="permalink">Glances plugin for SANtricity in DAS environments
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2026-01-26T00:00:00+08:00">2026-01-26 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2026 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
