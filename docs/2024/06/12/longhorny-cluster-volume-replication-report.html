<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            Reporting multi-cluster and volume pairing relationships | Acting Technologist
      
    </title>
    <meta name="description" content="
     Creating report on SolidFire cluster pairs and volume replication pairs
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Reporting multi-cluster and volume pairing relationships | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Reporting multi-cluster and volume pairing relationships" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Creating report on SolidFire cluster pairs and volume replication pairs" />
<meta property="og:description" content="Creating report on SolidFire cluster pairs and volume replication pairs" />
<link rel="canonical" href="https://scaleoutsean.github.io/2024/06/12/longhorny-cluster-volume-replication-report.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2024/06/12/longhorny-cluster-volume-replication-report.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:image" content="https://scaleoutsean.github.io/assets/images/cluster_pairing_relationships_cluster_pair.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-06-12T00:00:00+08:00" />
<script type="application/ld+json">
{"headline":"Reporting multi-cluster and volume pairing relationships","dateModified":"2024-06-12T00:00:00+08:00","datePublished":"2024-06-12T00:00:00+08:00","author":{"@type":"Person","name":"scaleoutSean"},"@type":"BlogPosting","url":"https://scaleoutsean.github.io/2024/06/12/longhorny-cluster-volume-replication-report.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2024/06/12/longhorny-cluster-volume-replication-report.html"},"image":"https://scaleoutsean.github.io/assets/images/cluster_pairing_relationships_cluster_pair.png","description":"Creating report on SolidFire cluster pairs and volume replication pairs","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">Reporting multi-cluster and volume pairing relationships</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>12 Jun 2024</span> - <i class="far fa-clock"></i> 


  
  
    3 minute read
  

    </span>
  </div>
  
        <h2 id="introduction">Introduction</h2>

<p>This week I <a href="/2024/06/11/introducing-project-longhorny.html">released</a> Longhorny, my simple tool for SolidFire volume replication management and while there’s a “list” action for both cluster and volumes, I mentioned that these are meant to list relationships for a Longhorny-supported setup the user is working with, which is 1-to-1 exclusive pairing.</p>

<p>Longhorny can also find mismatched volumes, so given that Longhorny won’t even pair clusters with an existing relationship, the only problem that can happen is a mismatched volume or two.</p>

<p>I did notice two things, though: if a cluster is already paired, Longhornyh doesn’t particularly care why and who, it just exits. The second is that if there’s more than a handful of mismatched volumes, it may be hard to figure out what’s what.</p>

<p>That made me think about creating the report action that would report on anything it sees - for both cluster relationships and volume relationships - and potentially be useful to non-Longhorny users with multiple clusters as well.</p>

<h2 id="matrices">Matrices</h2>

<p>It took me a while to figure out what I’d like to see and how to display it.</p>

<p>For now I’m using a basic approach - 2D matrix with N elements where N = (number_of_clusters + 1). The one extra cluster is for unconfigured/pending relationships.</p>

<p>In the case of Longhorny, which supports two (1-to-1) clusters, that would be 3x3.</p>

<p>I examine relationships from each cluster and when it’s all good, I get a matrix like this.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CLUSTER CONNECTIONS

              PROD  DR  UNCONFIGURED
PROD             0   1             0
DR               1   0             0
UNCONFIGURED     0   0             0
</code></pre></div></div>

<p>If it’s not good, then UNCONFIGURED may have more than 0 relationships or one of the other clusters has more than 1. Example:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CLUSTER CONNECTIONS

              PROD  DR  UNCONFIGURED
PROD             0   1             0
DR               1   0             0
UNCONFIGURED     1   0             0

UNCONFIGURED CLUSTERS

PROD
</code></pre></div></div>

<p>In this case I figure out the source (PROD) and can determine where the problem is.</p>

<p>For volumes, it’s going to be same approach, but I’m still thinking if I should try a multi-dimensional matrix with each item being a collection of more properties (number of cluster pairing relationships, number of paired volumes, number of all volumes). That seems more useful, but also more difficult to deal with.</p>

<p>These simple 2D matrices are easy to work with, and easy export to CSV or visualize. Example for the bad case (PROD is paired with UNCONFIGURED):</p>

<p><img src="/assets/images/cluster_pairing_relationships_cluster_pair.png" alt="" /></p>

<p>Similar can be done for volumes, but I may need to do that in another matrix because that seems easier.</p>

<p>Because there may be hundreds of paired (and dozens of unilaterally paired) volumes, it seems HTML volume ID pairs linked to volume details in SolidFire management UI would be a nice way to show that, but also require more work.</p>

<p>For up to 10-20 unilaterally paired volumes it’d be nice to be able to see names and maybe even accounts, so it appears “what’s better” is relative and needs experimentation.</p>

<h2 id="conclusion">Conclusion</h2>

<p>I don’t know how many people have 2 clusters, let alone 3 or 4, but it’s an interesting problem in any case.</p>

<p>Unlike with one-to-many and any-to-any relationships that may be present on networks, these relationships seem easier to understand with matrices and especially so in 2-cluster situations.</p>

<p>The problem of “optimal” visualization requires some experimentation as I usually don’t deal with problems of this nature. For example, the image in this post would ideally use specific colors for anything that’s &gt;2 and for any non-0 value in UNCONFIGURED, but the software I used can’t do that. But at least now I know what I want!</p>

<p>If I complete this script I’ll post it to Awesome SolidFire, but I may also include a simple text-only version in Longhorny.</p>

      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#solidfire">solidfire</a>
      &nbsp; 
    
      <a href="
      /categories/#projects">projects</a>
       
    
  </span>
</div>
    

  
    <div>
      <h3>Related Posts</h3>
      <ul>
      
        <li><a href="/2024/06/11/introducing-project-longhorny.html">Project Longhorny</a></li>
      
        <li><a href="/2024/06/03/pvc-volume-relationships-in-solidfire-trident-part-2.html">Kubernetes, Trident and SolidFire configuration - part 2</a></li>
      
        <li><a href="/2024/06/01/pvc-volume-relationships-in-solidfire-trident-part-1.html">Kubernetes, Trident and SolidFire configuration visibility</a></li>
      
        <li><a href="/2024/05/04/netapp-solidfire-with-async-http.html">Access NetApp SolidFire API with Async IO</a></li>
      
        <li><a href="/2024/04/30/netapp-solidfire-account-attributes.html">Tenant (account) attributes on NetApp SolidFire</a></li>
      
      </ul>
    </div>
  

    
  </div><footer class= "footer">
    <p>2024-06-12 18:39 </p>
    <p>Copyright © 2024 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
