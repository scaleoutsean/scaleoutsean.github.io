<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            NetApp E-Series with containerized BeeGFS, NFS, S3 | Acting Technologist
      
    </title>
    <meta name="description" content="
     Get started in minutes: E-Series, BeeGFS, S3 and NFS 4
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>NetApp E-Series with containerized BeeGFS, NFS, S3 | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="NetApp E-Series with containerized BeeGFS, NFS, S3" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en" />
<meta name="description" content="Get started in minutes: E-Series, BeeGFS, S3 and NFS 4" />
<meta property="og:description" content="Get started in minutes: E-Series, BeeGFS, S3 and NFS 4" />
<link rel="canonical" href="https://scaleoutsean.github.io/2024/04/11/netapp-eseries-containerized-beegfs-nfs-s3-all-in-one.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2024/04/11/netapp-eseries-containerized-beegfs-nfs-s3-all-in-one.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-04-11T00:00:00+08:00" />
<script type="application/ld+json">
{"headline":"NetApp E-Series with containerized BeeGFS, NFS, S3","dateModified":"2024-04-11T00:00:00+08:00","datePublished":"2024-04-11T00:00:00+08:00","url":"https://scaleoutsean.github.io/2024/04/11/netapp-eseries-containerized-beegfs-nfs-s3-all-in-one.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2024/04/11/netapp-eseries-containerized-beegfs-nfs-s3-all-in-one.html"},"description":"Get started in minutes: E-Series, BeeGFS, S3 and NFS 4","author":{"@type":"Person","name":"scaleoutSean"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">NetApp E-Series with containerized BeeGFS, NFS, S3</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>11 Apr 2024</span> - <i class="far fa-clock"></i> 


  
  
    5 minute read
  

    </span>
  </div>
  
        <ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#reinventing-the-wheel">Reinventing the wheel</a></li>
  <li><a href="#components">Components</a></li>
  <li><a href="#workflow">Workflow</a></li>
  <li><a href="#expected-outcome">Expected outcome</a></li>
  <li><a href="#next-steps">Next steps</a></li>
  <li><a href="#security">Security</a>
    <ul>
      <li><a href="#quotas-and-acls">Quotas and ACLs</a></li>
    </ul>
  </li>
  <li><a href="#monitoring">Monitoring</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>Everyone likes to say their storage platform makes AI easy to automate, get started in no time, and so on.</p>

<p>Well, I am 100% sure that is the case with NetApp SolidFire. Related to (Gen)AI, I gave some examples in a post where I went beyond the usual “create disks” stuff and showed how easy it is to make SolidFire do exactly what you need such as, for example, keep a stash of 5 freshly cloned data volumes, so that users don’t even need to wait for a few seconds until their data volume is cloned.</p>

<p>On the other hand, E-Series has an API exists, but I’ll be the first to say - it isn’t a DevOps paradise.</p>

<p>But very recently I realized I don’t need a paradise. I just need to create a few of LUNs, and that has to be done once.</p>

<p>Why is that? Because when we use BeeGFS with E-Series, the rest of automation and workflows don’t involve E-Series.</p>

<p>We create (or remove) volumes when we make changes to BeeGFS, which is rare. That’s all. The rest is BeeGFS, BeeGFS CSI, and so on.</p>

<h2 id="reinventing-the-wheel">Reinventing the wheel</h2>

<p>I wouldn’t suggest what I recommend here is good for production use, but it’s a start and likely good enough for functional Dev/Test.</p>

<p>In fact, many E-Series users who new to AI want to start somewhere. Others already use AI in production, but need another environment for testing (preferably fast and economical).</p>

<p>Previously I explained (not that it wasn’t explained by ThinkParQ, but I hope I explained it a bit better) how to stand-up containerized BeeGFS. So, that’s already “solved”.</p>

<p>But why not go a step further, and solve it even more? Say, add NFS and S3 services.</p>

<p>With that, all you need is two E-Series volumes, and once that is done you can have a singleton BeeGFS cluster with NFS and S3 ready-to-use.</p>

<h2 id="components">Components</h2>

<p>From bottom up:</p>

<ul>
  <li>NetApp E-Series</li>
  <li>ThinkParQ BeeGFS</li>
  <li>Linux NFS 4.1 (kernel-based) server</li>
  <li>Versity S3 Gateway</li>
</ul>

<p>What to expect?</p>

<ul>
  <li>BeeGFS, a parallel file system</li>
  <li>Ability to deploy BeeGFS CSI (if you’re a Kubernetes user) or use BeeGFS locally on the Docker host</li>
  <li>Ability to upload or download data from external clients using NFS or S3, which makes synchronization with production environments easy</li>
</ul>

<p>What to not expect?</p>

<p>For scale-out BeeGFS you’d need a bit more work, to make the BeeGFS containers work with external, preferably RDMA-enabled, networks. See the BeeGFS containers-related documentation, or just use non-containerized BeeGFS.</p>

<p>Our singleton BeeGFS approach can ignore external networks aside from non-BeeGFS services, which need to be exposed over plain TCP/IP which is easy.</p>

<h2 id="workflow">Workflow</h2>

<p>1) Create E-Series volumes (on DDP or traditional Disk Group, for testing either is fine)</p>

<p>2) Create E-Series hosts (this lets the array know which clients (FC, iSCSI, etc.) are out there, and map LUNs to selected host(s))</p>

<p>3) Map volumes to hosts</p>

<p>4) Configure multi-pathing or, if it’s already in place, rescan storage to detect new disks</p>

<p>5) Edit YAML and Docker configuration file</p>

<p>6) Go! <code class="language-plaintext highlighter-rouge">docker compose up</code></p>

<p>7) Install BeeGFS client and mount BeeGFS from containers</p>

<p>Steps 1-4 are routine for most E-Series users. You can complete them from the SANtricity UI (5 minutes of work) or or via the API (10 seconds of staring). The NetApp BeeGFS deployment scripts for Ansible (find ‘em on Github) may be used if you’re not in the mood for writing to the SANtricity API.</p>

<p>You can see screenshots of some of the steps 1-4 in my post about Ubuntu with iSER.</p>

<p>Steps 5-7 are explained in my post about containerized BeeGFS.</p>

<h2 id="expected-outcome">Expected outcome</h2>

<p>Maybe this heading will eventually be changed to “result”, but until I get that done I’ll refer to it as “expected outcome”.</p>

<p><img src="/assets/images/netapp-eseries-containerized-beegfs-nfs-s3.svg" alt="Containerized BeeGFS, NFS and S3" /></p>

<h2 id="next-steps">Next steps</h2>

<p>Mild stress test for your stack (S3, NFS, filesystem) would be a good first step.</p>

<p>In order to install Kubernetes and ThinParQ BeeGFS CSI driver on the host we may need to deploy these containers on Kubernetes. As-is, it’s meant for Docker, but if your environment and workflows depend on Kubernetes, you can modify the YAML to suit your needs.</p>

<h2 id="security">Security</h2>

<p>If you handle sensitive data, just use the plain BeeGFS container set as explained in that earlier post. You can still use WinSCP or SCP to get your data in and out.</p>

<p>NFS and S3 expose data on LAN, so users with sensitive data need to restrict access, especially to NFS. S3 is probably easier and harder to make mistakes with, as key pairs need to be created and provided to users.</p>

<h3 id="quotas-and-acls">Quotas and ACLs</h3>

<p>BeeGFS users with (commercial) enterprise support get quotas and ACLs.</p>

<p>Versity S3 gateway may be able to provide some quota control as well, but it won’t apply to local (BeeGFS) users on the host.</p>

<h2 id="monitoring">Monitoring</h2>

<p>You can throw in a few more containers to get BeeGFS monitoring, and 3-4 more from my EPA project to get E-Series monitoring as well.</p>

<p>As this setup is for Dev/Test and demo environments, it’s likely not necessary to add all the gizmos one would want in Production.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Production deployments and integrations usually require a lot of work, but non-production do not.</p>

<p>This approach aims to make it easy to get an idea of how BeeGFS with E-Series works and uses more batteries than the previous post on BeeGFS containers. Now even upload and download to this environment should be convenient.</p>

<p>Although this example requires just a single server attached to one E-Series, if your server and storage has enough IO resources you can run hundreds of Dev/Test containers on it. Even the entry-level EF-Series EF300 - given enough disks - can give you over 10 GB/s in mixed read-write performance.</p>

<p>And it takes less than minutes to get started.</p>


      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#kubernetes">kubernetes</a>
      &nbsp; 
    
      <a href="
      /categories/#storage">storage</a>
      &nbsp; 
    
      <a href="
      /categories/#ai">ai</a>
       
    
  </span>
</div>
    

  
    <div>
      <h3>Related Posts</h3>
      <ul>
      
        <li><a href="/2024/01/24/kubernetes-keda-netapp-solidfire-eseries.html">Kubernetes KEDA with NetApp SolidFire and E-Series</a></li>
      
        <li><a href="/2023/09/08/beegfs-csi-driver-lives-on.html">ThinkParQ takes over NetApp-created BeeGFS CSI driver</a></li>
      
        <li><a href="/2023/12/02/containerized-beegfs-with-netapp-eseries.html">Containerized BeeGFS with NetApp E-Series</a></li>
      
        <li><a href="/2023/01/14/eseries-performance-analyzer-container-orchestrator-kubernetes.html">NetApp E-Series Performance Analyzer in orchestrated container environments</a></li>
      
        <li><a href="/2022/12/16/eseries-beegfs-csi-driver-140.html">NetApp BeeGFS CSI driver 1.4.0</a></li>
      
      </ul>
    </div>
  

    
  </div><footer class= "footer">
    <p>2024-07-10 22:16 </p>
    <p>Copyright © 2024 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
