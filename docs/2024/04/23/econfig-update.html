<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            EConfig v2 | Acting Technologist
      
    </title>
    <meta name="description" content="
     See what's new in tools for no-BS-sizing for certain E-Series use cases
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>EConfig v2 | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="EConfig v2" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="See what’s new in tools for no-BS-sizing for certain E-Series use cases" />
<meta property="og:description" content="See what’s new in tools for no-BS-sizing for certain E-Series use cases" />
<link rel="canonical" href="https://scaleoutsean.github.io/2024/04/23/econfig-update.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2024/04/23/econfig-update.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:image" content="https://scaleoutsean.github.io/assets/images/econfig-v2-ddp-nvme-sizer.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-04-23T00:00:00+08:00" />
<script type="application/ld+json">
{"image":"https://scaleoutsean.github.io/assets/images/econfig-v2-ddp-nvme-sizer.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2024/04/23/econfig-update.html"},"author":{"@type":"Person","name":"scaleoutSean"},"description":"See what’s new in tools for no-BS-sizing for certain E-Series use cases","@type":"BlogPosting","url":"https://scaleoutsean.github.io/2024/04/23/econfig-update.html","headline":"EConfig v2","dateModified":"2024-04-23T00:00:00+08:00","datePublished":"2024-04-23T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">EConfig v2</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>23 Apr 2024</span> - <i class="far fa-clock"></i> 


  
  
    6 minute read
  

    </span>
  </div>
  
        <ul>
  <li><a href="#wtf-is-econfig">WTF is EConfig?</a></li>
  <li><a href="#whats-new">What’s new</a></li>
  <li><a href="#how-i-use-econfig">How I use EConfig</a>
    <ul>
      <li><a href="#ddp">DDP</a></li>
      <li><a href="#beegfs">BeeGFS</a></li>
    </ul>
  </li>
  <li><a href="#troubles">Troubles</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
  <li><a href="#appendix-a---beegfs-sizer">Appendix A - BeeGFS sizer</a></li>
</ul>

<h2 id="wtf-is-econfig">WTF is EConfig?</h2>

<p>EConfig is my site with currently two (unofficial) sizing tools (or utilities, or features, whatever):</p>

<ul>
  <li>BeeGFS tool that he map BeeGFS data and metadata capacity requirement to E-Series RAID (or DDP) configurations.</li>
  <li>DDP tool that calculates capacity for any or either supported RAID level (1 or 6)</li>
</ul>

<p>In 2022 I created the first version.</p>

<p>Initially it was just for BeeGFS, based on the idea that, because there aren’t a limited number of “good” configurations anyway, one could instead create a brute-force permutation of all “good” configurations and then just search through those, rather than size from scratch.</p>

<p>Initially I used Jupyter as the UI but that was “too scientific”. I had to do it on the Web and with JavaScript, so I did. Then later I added interactive forward sizing as well.</p>

<p>Even later - may have been 2023 - I also added DDP sizing with the ability to split capacity by RAID 1 and RAID 6, which is highly relevant to NOSQL and analytics use cases that I often blog about here. (Relevant for me - not that I’ve ever heard anyone said it was relevant to them.)</p>

<p>What I didn’t waste time on was design. It was plain and - to my surprise - 2-3 months ago somebody even told me it sucked on mobile. Ouch. I’d never even tried it on mobile!</p>

<p>Other challenges included lack of support for 22 TB drives (E-Series added them a few months ago) and the inability to use more than 10 arrays. I didn’t expect I’d hit that limit, but I did - just last month.</p>

<h2 id="whats-new">What’s new</h2>

<ul>
  <li>Completely new design - it looks a bit too fancy, but that’s not the point: the point is that it still retains the density and doesn’t require much scrolling (on desktop)</li>
  <li>It sucks less on mobile</li>
  <li>There were bugs. Bugs were fixed. New bugs were added</li>
  <li>I did a bit of “QA” on DDP sizing tool and accuracy is quite decent, at least for DDP sizer</li>
  <li>22 TB disk size added to BeeGFS sizer</li>
</ul>

<p>What about those bugs?</p>

<p>There were sizing bugs and there were UI annoyances (such as rounding). I don’t think it’s a big deal - those tools aren’t meant to be used for production or purchasing-related sizing in the first place.</p>

<p>The idea has always been to get an approximate picture of what’s a configuration supposed to look like - say we’ll go with 7.68 TB drives and 15% in RAID 1. That kind of thing. If you don’t need 24 drives to meet that requirement, then even if final “commercial” sizing needs to add an extra drive, that won’t force a change from 7.68 to 15.36 TB drives.</p>

<p>You may need to use 17 rather than 16, but so what? You would have used 17 anyway, but using EConfigs has saved you 20-30 minutes.</p>

<h2 id="how-i-use-econfig">How I use EConfig</h2>

<h3 id="ddp">DDP</h3>

<p>Say I need 7 TiB in RAID 1 and 34 TiB in RAID 6.</p>

<p>Most people I know still create classic RAID groups: RAID 1 (2 x 7.68 TB, maybe) and a RAID 5 (8+1, using 7.68 TB disks, etc.).</p>

<p>I go to EConfig and use DDP sizer for NVMe. In approximately 60 seconds I have my answer:</p>

<ul>
  <li>20-disk DDP (1 disk worth of preservation capacity is fixed in this tool, given it’s for NVMe SSDs). 19 disks also works, if we need no room for growth</li>
  <li>25% of usable DDP capacity will be allocated to RAID 1 volumes</li>
</ul>

<p><img src="/assets/images/econfig-v2-ddp-nvme-sizer-example.png" alt="" /></p>

<p>Now compare this to fiddling with classic RAID configurations or other alternatives…</p>

<h3 id="beegfs">BeeGFS</h3>

<p>I find out what the objective is - highest performance, lowest cost, etc.</p>

<p>Say we need 10 PiB with focus on cost.</p>

<p>Then I start with RAID 6 groups and 12 TB disks and see how much I can get from one array. If it’s not enough, I go to larger disks (e.g. 22 TB), if it’s too much, try smaller (8 TB).</p>

<p>Since current E-Series models can’t configure 10 PB usable even with 22 TB disk drives, I’d probably go for 5 PiB and 2 arrays.</p>

<p>You can see this output in Appendix A.</p>

<p>The entire process takes around 60 seconds. If satisfied, I would perform “official” sizing, but not before that as the idea is to minimize the time spent on using the official sizing tools.</p>

<h2 id="troubles">Troubles</h2>

<p>Cloudflare, where EConfig runs, can be flakey. After this update I often get Error 500 (Internal Service Error) on initial access (hitting F5 “fixes” it, but most people probably just leave at that point).</p>

<p>Before EConfig v2 I used to get a “frozen” site with EConfig v1 (also required F5 to “fix” it) and I thought that was bad. Well, now is worse.</p>

<p>The same app running on NodeJS locally runs without any problem, so I’m sure it’s not the app. And I noticed that this year other Cloudflare Web site owners have complained about this problem, too.</p>

<h2 id="conclusion">Conclusion</h2>

<p>EConfig probably still has some bugs, but the sad truth about sizing is you never do it just once.</p>

<p>Using official sizing tool only as the last sizing tool before hand-over lets me iterate using my own tools and save a ton of time even if the final configuration is off by a little - a disk or two can be added in the last iteration.</p>

<p>EConfig saves time and cuts down on turnaround time. It’s suitable for Web meeting use and solutioning iteration.</p>

<p>It’s not perfect and it has room for improvement, but I don’t use it <em>that</em> often, so I won’t touch it until larger disks come out or some bugs need to be fixed.</p>

<h2 id="appendix-a---beegfs-sizer">Appendix A - BeeGFS sizer</h2>

<p>Screenshot from BeeGFS sizer is vertically large, so I put it here.</p>

<p><img src="/assets/images/econfig-v2-ddp-beegfs-sizer-example.png" alt="" /></p>

<p>Most HPC environments use RAID 6 (as in this screenshot), so BeeGFS sizer in EConfig defaults to RAID 6 and does not allow arbitrary RAID group widths - it’s fixed to 10 (8D2P).</p>

<p>If DDP is selected, you can choose 11-60 drives which is common for 60-drive controlles and DE460C expansion enclosures.</p>

<p>Further below that screenshot there’s a metadata sizer.</p>

<p><img src="/assets/images/econfig-v2-beegfs-sizer-md-example.png" alt="" /></p>

<p>Here you enter usable BeeGFS capacity in TiB and MD capacity as a percentage of that number.</p>

<p>Using “generic” assumptions for the number of files per unit of metadata storage capacity, metadata sizer gives estimates for RAID 10 capacity (TiB) which can be sized in DDP sizer or looked up in the “brute force sizing” table, and an estimate for the maximum number of files.</p>

      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#storage">storage</a>
      &nbsp; 
    
      <a href="
      /categories/#projects">projects</a>
       
    
  </span>
</div>
    

  
    <div>
      <h3>Related Posts</h3>
      <ul>
      
        <li><a href="/2022/09/18/eseries-ddp-capacity-splitter.html">DDP capacity splitter for E-Series</a></li>
      
        <li><a href="/2022/09/04/brute-force-sizing-netapp-eseries.html">Brute force sizing NetApp E-Series</a></li>
      
        <li><a href="/2022/08/28/configuring-netapp-e-series-solution-for-beegfs.html">Configuration approaches to NetApp E-Series with ThinkParQ BeeGFS</a></li>
      
        <li><a href="/2023/10/08/raid1-in-netapp-eseries-ddp.html">Benefits of RAID 1 in E-Series DDP</a></li>
      
        <li><a href="/2022/09/12/new-ddp-and-e-series-santricity-web-restful-api.html">New Dynamic Disk Pool configuration and E-Series SANtricity</a></li>
      
      </ul>
    </div>
  

    
  </div><footer class= "footer">
    <p>2025-02-18 20:54 </p>
    <p>Copyright © 2025 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
