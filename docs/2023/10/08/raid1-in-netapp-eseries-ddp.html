<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            Benefits of RAID 1 in E-Series DDP | Acting Technologist
      
    </title>
    <meta name="description" content="
     Get performance and management improvements with RAID 1 on DDP
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Benefits of RAID 1 in E-Series DDP | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Benefits of RAID 1 in E-Series DDP" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en" />
<meta name="description" content="Get performance and management improvements with RAID 1 on DDP" />
<meta property="og:description" content="Get performance and management improvements with RAID 1 on DDP" />
<link rel="canonical" href="https://scaleoutsean.github.io/2023/10/08/raid1-in-netapp-eseries-ddp.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2023/10/08/raid1-in-netapp-eseries-ddp.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-10-08T00:00:00+08:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"scaleoutSean"},"description":"Get performance and management improvements with RAID 1 on DDP","@type":"BlogPosting","headline":"Benefits of RAID 1 in E-Series DDP","dateModified":"2023-10-08T00:00:00+08:00","datePublished":"2023-10-08T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2023/10/08/raid1-in-netapp-eseries-ddp.html"},"url":"https://scaleoutsean.github.io/2023/10/08/raid1-in-netapp-eseries-ddp.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">Benefits of RAID 1 in E-Series DDP</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>08 Oct 2023</span> - <i class="far fa-clock"></i> 


  
  
    6 minute read
  

    </span>
  </div>
  
        <ul>
  <li><a href="#what-is-this-about-again">What is this about again?</a></li>
  <li><a href="#why-is-raid-1-on-ddp-a-good-idea">Why is RAID 1 on DDP a good idea?</a></li>
  <li><a href="#is-r1-on-ddp-really-faster">Is R1 on DDP really faster?</a></li>
  <li><a href="#which-workloads-can-benefit-from-mixed-raid-1-and-raid-6-volumes-in-ddp">Which workloads can benefit from mixed RAID 1 and RAID 6 volumes in DDP</a></li>
  <li><a href="#data-loss-protection-vs-classic-raid-1-vg">Data loss protection vs. classic RAID 1 VG</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="what-is-this-about-again">What is this about again?</h2>

<p>Even now, few people know E-Series DDP can accommodate RAID 1 volumes. One of the reasons is it still can’t be crated in the Web UI (as of SANtricity 11.80).</p>

<p>I wrote about it <a href="/2022/09/12/new-ddp-and-e-series-santricity-web-restful-api.html">here</a>, so check that long post if you’re interested in details.</p>

<p>“Traditional” storage arrays and RAID controllers use disk groups (or volume groups, or RAID groups).</p>

<p>E-Series and EF-Series are no different - disks are used to create one or more volume groups (RAID 0 or 1 or 5 or 6) and one or more volumes are created on top of each. In addition, E-Series also has DDP (see that post for more) which is generally used to host RAID 6-style volumes.</p>

<p>But if we use the API we can create RAID 1 volumes as well.</p>

<p>This post adds some details about performance of R1 on DDP, as that’s something I didn’t have time to evaluate when I wrote that earlier post.</p>

<p><strong>Note</strong>: R1 and R10 will be used semi-interchangeably. The smallest “classical” RAID 1 VG would consist of 2 disks, whereas a VG with 4 or 8 would be “RAID 10” because data would be striped across mirrored R1 pairs. Data in RAID 1-style volumes in DDP with 11 or more disks is not striped across mirrored pairs; it’s striped and mirrored across a different set of 10 randomly selected disks every time a write occurs.</p>

<h2 id="why-is-raid-1-on-ddp-a-good-idea">Why is RAID 1 on DDP a good idea?</h2>

<p>It’s not <em>always</em> a good idea, but it’s a great feature to have.</p>

<p>Before, when we needed RAID 1-like performance we’d either have to give up on DDP and create at least two volume groups (say, two RAID 1 and another RAID 5 or 6 - shown in the top image, without a hot spare for the R1 VGs).</p>

<p><img src="/assets/images/eseries-r1-ddp-mixed-r1-r2-volumes.png" alt="" /></p>

<p>Or we’d give up on that complexity, eliminate RAID 1 and and use RAID 5 or RAID 6 or R6-style DDP for all volumes.</p>

<p>Now (the bottom image) you can get 11+ disks, create a DDP and in this pool create RAID 1 and RAID 6 volumes.</p>

<p>You don’t get physical disk segregation between R1 and R6 disks that you’d have with distinct Volume Groups, but R1 and R6 maintain their relative performance:</p>

<ul>
  <li>R6 stripes are spread each over 10 random disks in the pool (8 data + 2 parity)</li>
  <li>R1 stripes are spread the same way, but in a RAID 10-like fashion (5 + 5)</li>
</ul>

<p>We get R10-level performance without having to have 3 extra disks (and also potentially 3 disks less in DDP) which is the minimum required for one RAID 1 VG + 1 Hot Spare. In DDP, there are no hot spares: reconstruction capacity is usually set to 2 disks worth of capacity, and shared among all DDP volumes.</p>

<p>With DDP we also don’t have to grow R10 volumes by adding 2 physical disks at a time.</p>

<p>With DDP, both R1 and R6-like volumes can be extended in volumes in GiB increments. If you add 3.84TB of capacity, that capacity is shared among all DDP volumes.</p>

<h2 id="is-r1-on-ddp-really-faster">Is R1 on DDP really faster?</h2>

<p>We should expect it is, and that seems to be the case with both sequential and random IO.</p>

<p>This chart is by no means scientific and representative of real life, but I think it is indicative enough.</p>

<p>My multipathing setup in this environment is not optimal, so any one (or all) of these tests could be slower than it should be. But in all tests R1 consistently outperformed R6, which is why I believe this is indicative.</p>

<p><img src="/assets/images/eseries-r1-ddp-4k-write-performance.png" alt="EF-570 R1 vs R6 on DDP" /></p>

<ul>
  <li>E-Series EF-570 (all-flash SAS) with SANtricity v11.80
    <ul>
      <li>DDP with 16 disks (2 disks of reserve capacity)</li>
    </ul>
  </li>
  <li>R1 and R6 volumes in DDP</li>
  <li>Ubuntu 22.04 LTS iSER client</li>
  <li>Workload: 8 jobs, QD 8, block size 4kB, 80/20 read-write (Note: <em>only</em> the write portion of the benchmark is shown above)</li>
</ul>

<p>What’s R0_2D0P? It’s a RAID 0 made of two SSD disks. I threw it in there to get another reference point. (I’ve never heard of anyone who uses RAID 0 on E-Series, but I’d almost certainly use for <em>something</em>).</p>

<p>I observed 1.5x to 2x faster performance with RAID 1 vs RAID 6 on DDP. And the latency was better as well (blue bars).</p>

<p>That’s very encouraging and meets expectations. I’d also like to evaluate application performance, but since the system doesn’t seem 100% properly configured, I’ll leave that for later.</p>

<h2 id="which-workloads-can-benefit-from-mixed-raid-1-and-raid-6-volumes-in-ddp">Which workloads can benefit from mixed RAID 1 and RAID 6 volumes in DDP</h2>

<p>All workloads that benefit from RAID 6 (or 5) and RAID 10.</p>

<p>Example 1: traditional RDBMS. Transaction log on R1, data on R6. Ideally we’d want data on R5 but that’s a small compromise compared to compromising on R1 (which as you can see in that chart above often gets us not only a ~50% jump in performance, but also a ~50% drop in latency).</p>

<p>Example 2: NoSQL/NuSQL. Elasticsearch, Splunk, Kafka, MongoDB, various new vector databases, etc.</p>

<p>Example 3: different workloads that use E-Series. If we size and manage correctly, we can just create one big DDP pool and offer R1 and R6 on top of it.</p>

<h2 id="data-loss-protection-vs-classic-raid-1-vg">Data loss protection vs. classic RAID 1 VG</h2>

<p>RAID 1 Volume Groups can lose 1 disk without losing data. Sometimes more than 1, but you need to rely on luck for that.</p>

<p>A RAID 1 volume on DDP can also survive the loss of only 1 disk at the same time, but - unlike the traditional R1 VG - DDP can recover and hours later our R1 volume can survive another disk loss (assuming DDP reserve is set to 2 or higher, which it usually is).</p>

<p>So, while “R1 on DDP” doesn’t automatically make R1 volumes resistant to multiple disk failures, it increases its chances over weekends, holidays and in general, with much less reliance on luck. For example, data lost on a 3.84 TB disk that was 70% full (~2 TB) can be reconstructed in low single digit hours.</p>

<p>I should mention the case of modern replicated databases: let’s say we have a database that creates three copies of data. In this case six disks in three R1 Volume Groups can lose 3 disks at the same time without losing data. In this case the resilience of “classic” VG beats R1 on DDP, but you also need 6 (or 12 or 24, for more capacity) disks to make that happen. If we wanted to minimize data loss risk, we’d use the approach similar to the upper image above and provision a RAID 1 pair to each instance.</p>

<p>This example shows that R1 on DDP isn’t always more suitable or faster or “better”, but in many cases it can be.</p>

<h2 id="conclusion">Conclusion</h2>

<p>R1 on DDP isn’t widely known, but it’s a very useful feature.</p>

<p>As long as total performance doesn’t exceed the maximum performance of the array, the benefits of higher performance and lower latency can be significant and worth the overhead.</p>

<p>Because R10 has a greater capacity overhead (R6 - 25%, R10 - 100%), if you use R10 and R6 in DDP you need to carefully monitor DDP capacity utilization - especially so if you also use snapshots and clones.</p>

<p>Check the longer DDP post for more details, links to documentation and API examples.</p>

      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#storage">storage</a>
       
    
  </span>
</div>
    

  
    <div>
      <h3>Related Posts</h3>
      <ul>
      
        <li><a href="/2024/04/23/econfig-update.html">EConfig v2</a></li>
      
        <li><a href="/2022/09/18/eseries-ddp-capacity-splitter.html">DDP capacity splitter for E-Series</a></li>
      
        <li><a href="/2022/09/12/new-ddp-and-e-series-santricity-web-restful-api.html">New Dynamic Disk Pool configuration and E-Series SANtricity</a></li>
      
        <li><a href="/2021/07/06/e-series-ddp-expansion-and-rebalancing.html">Faster initialization and rebalancing with Dynamic Disk Pools on NetApp E-Series</a></li>
      
        <li><a href="/2023/10/29/consistency-group-monitoring-in-eseries.html">Monitor Snapshot Consistency Groups of NetApp E-Series SANtricity OS</a></li>
      
      </ul>
    </div>
  

    
  </div><footer class= "footer">
    <p>2025-06-07 18:07 </p>
    <p>Copyright © 2025 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
