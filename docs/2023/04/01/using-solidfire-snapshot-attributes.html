<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Using snapshot attributes in SolidFire | Acting Technologist</title>
<meta name="description" content="Improve SolidFire snapshot workflows with snapshot attributes">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Using snapshot attributes in SolidFire">
<meta property="og:url" content="https://scaleoutsean.github.io/2023/04/01/using-solidfire-snapshot-attributes.html">


  <meta property="og:description" content="Improve SolidFire snapshot workflows with snapshot attributes">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Using snapshot attributes in SolidFire">
  <meta name="twitter:description" content="Improve SolidFire snapshot workflows with snapshot attributes">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2023/04/01/using-solidfire-snapshot-attributes.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2023-04-01T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2023/04/01/using-solidfire-snapshot-attributes.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Using snapshot attributes in SolidFire">
    <meta itemprop="description" content="Improve SolidFire snapshot workflows with snapshot attributes">
    <meta itemprop="datePublished" content="2023-04-01T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2023/04/01/using-solidfire-snapshot-attributes.html" itemprop="url">Using snapshot attributes in SolidFire
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-04-01T00:00:00+08:00">2023-04-01 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <ul>
  <li><a href="#snapshot-attributes-in-solidfire">Snapshot attributes in SolidFire</a></li>
  <li><a href="#hashtable-example">Hashtable example</a></li>
  <li><a href="#snapshot-with-attributes">Snapshot with attributes</a></li>
  <li><a href="#using-snapshot-attributes">Using snapshot attributes</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="snapshot-attributes-in-solidfire">Snapshot attributes in SolidFire</h2>

<p>When we create a SolidFire snapshot from the Web UI, we see something like this:</p>

<p><img src="/assets/images/solidfire-snapshot-create-01.png" alt="SolidFire create Snapshot dialog" /></p>

<p>That's not all there is to it. The API allows us to tag snapshots with a hashtable.</p>

<p>If we use a CLI or the API, we can take advantage of that to improve storage management workflows such as backup.</p>

<h2 id="hashtable-example">Hashtable example</h2>

<p>Let's say we always have 10-20 "general use" snapshots lying around, but we have one specific workflow that replicates certain volumes to the cloud (say, Digital Ocean, which works <a href="/2021/11/30/digital-ocean-volume-to-solidfire-volume-and-back.html">very well</a>).</p>

<p>Or perhaps once a week we backup certain volumes to Wasabi.</p>

<p>We can assign snapshot attributes to that "special use" snapshot.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$hashtable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w"> </span><span class="nx">Backup2S3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">'</span><span class="nx">Y</span><span class="err">'</span><span class="p">;</span><span class="w"> </span><span class="nx">CG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">'</span><span class="mi">2</span><span class="err">'</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<ul>
  <li>Mark the snapshot for backup to S3</li>
  <li>Indicate that snapshot is part of Consistency Group 2 (so that, having a database that uses volume ID 14 for database tables, and volume ID 15 for transaction log), we take both at the exact same time</li>
</ul>

<p>Group snapshots are taken like this</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">New-SFGroupSnapshot</span><span class="w"> </span><span class="nt">-VolumeID</span><span class="w"> </span><span class="nx">14</span><span class="p">,</span><span class="nx">15</span><span class="w"> </span><span class="nt">-Attributes</span><span class="w"> </span><span class="nv">$hashtable</span><span class="w">

</span><span class="n">GroupSnapshotID</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="nx">4</span><span class="w">
</span><span class="n">GroupSnapshotUUID</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="nx">d2962b6c-56c7-46f9-8549-8f0903374fd3</span><span class="w">
</span><span class="n">Members</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="mi">2023</span><span class="nt">-04-01T05</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">11</span><span class="n">Z</span><span class="p">,</span><span class="w"> </span><span class="nx">2023-04-01T05:29:11Z</span><span class="p">}</span><span class="w">
</span><span class="n">Name</span><span class="w">                    </span><span class="p">:</span><span class="w"> </span><span class="nx">2023-04-01T05:29:11Z</span><span class="w">
</span><span class="n">CreateTime</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="nx">2023-04-01T05:29:11Z</span><span class="w">
</span><span class="n">Status</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="nx">done</span><span class="w">
</span><span class="n">EnableRemoteReplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nx">False</span><span class="w">
</span><span class="n">RemoteStatuses</span><span class="w">          </span><span class="p">:</span><span class="w"> 
</span><span class="n">Attributes</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="p">{[</span><span class="n">CG</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="n">Backup2S3</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p">]}</span><span class="w">
</span></code></pre></div></div>

<p>We have two member snapshots, named 2023-04-01T05:29:11Z and 2023-04-01T05:29:11Z, respectively. Why? See the screenshot above.</p>

<p>Because we didn't give them a name and the default name is UTC time.</p>

<p>And because it's a group snapshot, they are taken at the same time so the names are identical. Just for fun, let's take another:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">New-SFGroupSnapshot</span><span class="w"> </span><span class="nt">-VolumeID</span><span class="w"> </span><span class="nx">14</span><span class="p">,</span><span class="nx">15</span><span class="w"> </span><span class="nt">-Attributes</span><span class="w"> </span><span class="nv">$hashtable</span><span class="w"> </span><span class="nt">-Name</span><span class="w"> </span><span class="nx">jff</span><span class="w">

</span><span class="n">GroupSnapshotID</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="nx">5</span><span class="w">
</span><span class="n">GroupSnapshotUUID</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="nx">ab69a95f-eef1-492f-b863-0ae33e26a56b</span><span class="w">
</span><span class="n">Members</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">jff</span><span class="p">,</span><span class="w"> </span><span class="nx">jff</span><span class="p">}</span><span class="w">
</span><span class="n">Name</span><span class="w">                    </span><span class="p">:</span><span class="w"> </span><span class="nx">jff</span><span class="w">
</span><span class="n">CreateTime</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="nx">2023-04-01T05:30:43Z</span><span class="w">
</span><span class="n">Status</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="nx">done</span><span class="w">
</span><span class="n">EnableRemoteReplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nx">False</span><span class="w">
</span><span class="n">RemoteStatuses</span><span class="w">          </span><span class="p">:</span><span class="w"> 
</span><span class="n">Attributes</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="p">{[</span><span class="n">CG</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="n">Backup2S3</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p">]}</span><span class="w">
</span></code></pre></div></div>

<p>We can distinguish them by GroupSnapshotID.</p>

<p>In a second case, it's 5:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Get-SFGroupSnapshot</span><span class="w"> </span><span class="nt">-GroupSnapshotID</span><span class="w"> </span><span class="nx">5</span><span class="w">

</span><span class="n">GroupSnapshotID</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="nx">5</span><span class="w">
</span><span class="n">GroupSnapshotUUID</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="nx">ab69a95f-eef1-492f-b863-0ae33e26a56b</span><span class="w">
</span><span class="n">Members</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">jff</span><span class="p">,</span><span class="w"> </span><span class="nx">jff</span><span class="p">}</span><span class="w">
</span><span class="n">Name</span><span class="w">                    </span><span class="p">:</span><span class="w"> </span><span class="nx">jff</span><span class="w">
</span><span class="n">CreateTime</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="nx">2023-04-01T05:30:43Z</span><span class="w">
</span><span class="n">Status</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="nx">done</span><span class="w">
</span><span class="n">EnableRemoteReplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nx">False</span><span class="w">
</span><span class="n">RemoteStatuses</span><span class="w">          </span><span class="p">:</span><span class="w"> 
</span><span class="n">Attributes</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="p">{[</span><span class="n">CG</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="n">Backup2S3</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p">]}</span><span class="w">
</span></code></pre></div></div>

<p>In the case of a single volume, we use <code class="language-plaintext highlighter-rouge">New-SFSnapshot</code>:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">New-SFSnapshot</span><span class="w"> </span><span class="nt">-VolumeID</span><span class="w"> </span><span class="nx">14</span><span class="w"> </span><span class="nt">-Attributes</span><span class="w"> </span><span class="nv">$hashtable</span><span class="w">
</span></code></pre></div></div>

<p>Normally we'd also set retention. Add <code class="language-plaintext highlighter-rouge">-Retention 48:00:00</code> to retain a snapshot for two days.</p>

<h2 id="snapshot-with-attributes">Snapshot with attributes</h2>

<p>As we've already seen, snapshot attributes are stored with the snapshot.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SnapshotID</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="nx">333</span><span class="w">
</span><span class="n">VolumeID</span><span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="nx">14</span><span class="w">
</span><span class="n">Name</span><span class="w">                    </span><span class="p">:</span><span class="w"> </span><span class="nx">2023-04-01T04:56:03Z</span><span class="w">
</span><span class="n">Checksum</span><span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="nx">0x0</span><span class="w">
</span><span class="n">EnableRemoteReplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nx">False</span><span class="w">
</span><span class="n">ExpirationReason</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="nx">None</span><span class="w">
</span><span class="n">ExpirationTime</span><span class="w">          </span><span class="p">:</span><span class="w"> 
</span><span class="n">RemoteStatuses</span><span class="w">          </span><span class="p">:</span><span class="w"> 
</span><span class="n">Status</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="nx">done</span><span class="w">
</span><span class="n">SnapshotUUID</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="nx">d4971a0a-60ba-46ae-8543-a5c94add8195</span><span class="w">
</span><span class="n">TotalSize</span><span class="w">               </span><span class="p">:</span><span class="w"> </span><span class="nx">3001024512</span><span class="w">
</span><span class="n">GroupID</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="nx">0</span><span class="w">
</span><span class="n">GroupSnapshotUUID</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="nx">00000000-0000-0000-0000-000000000000</span><span class="w">
</span><span class="n">CreateTime</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="nx">2023-04-01T04:56:03Z</span><span class="w">
</span><span class="n">InstanceCreateTime</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="nx">2023-04-01T04:56:03Z</span><span class="w">
</span><span class="n">VolumeName</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="nx">best</span><span class="w">
</span><span class="n">InstanceSnapshotUUID</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="nx">d4971a0a-60ba-46ae-8543-a5c94add8195</span><span class="w">
</span><span class="n">VirtualVolumeID</span><span class="w">         </span><span class="p">:</span><span class="w"> 
</span><span class="n">Attributes</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="p">{[</span><span class="n">CG</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="n">Backup2S3</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p">]}</span><span class="w">
</span><span class="n">SnapMirrorLabel</span><span class="w">         </span><span class="p">:</span><span class="w"> 
</span></code></pre></div></div>

<h2 id="using-snapshot-attributes">Using snapshot attributes</h2>

<p>In order to use these attributes, we can query snapshots for a volume, and do something with those that match our criteria.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$snaps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-SFSnapshot</span><span class="w"> </span><span class="nt">-VolumeID</span><span class="w"> </span><span class="nx">14</span><span class="w">
</span><span class="kr">foreach</span><span class="w"> </span><span class="p">(</span><span class="nv">$snap</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nv">$snaps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="kr">if</span><span class="w"> </span><span class="p">((</span><span class="nv">$snap</span><span class="o">.</span><span class="nf">Attributes</span><span class="p">)</span><span class="o">.</span><span class="nf">count</span><span class="w"> </span><span class="o">-gt</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Snap"</span><span class="p">,</span><span class="w"> </span><span class="nv">$snap</span><span class="o">.</span><span class="nf">SnapshotID</span><span class="p">,</span><span class="w"> </span><span class="s2">":"</span><span class="p">,</span><span class="w"> </span><span class="nv">$snap</span><span class="o">.</span><span class="nf">Attributes</span><span class="w">
        </span><span class="c"># do something - or not - based on snapshot attribute values</span><span class="w">
        </span><span class="p">}</span><span class="w"> 
    </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w"> 
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Snap"</span><span class="p">,</span><span class="w"> </span><span class="nv">$snap</span><span class="o">.</span><span class="nf">SnapshotID</span><span class="p">,</span><span class="w"> </span><span class="s2">": no attributes, skipping"</span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="n">Snap</span><span class="w"> </span><span class="nx">331</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nx">no</span><span class="w"> </span><span class="nx">attributes</span><span class="p">,</span><span class="w"> </span><span class="nx">skipping</span><span class="w">
</span><span class="n">Snap</span><span class="w"> </span><span class="nx">333</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">CG</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Backup2S3</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>If, for example, key "Backup2S3" has the value of "Y", we back it up to S3.</p>

<p>Sample "backup to S3" scripts I wrote before (posted on Github in <code class="language-plaintext highlighter-rouge">awesome-solidfire</code>) can run backup in parallel but aren't smart about the ordering of backup jobs.</p>

<p>While the second script can optionally backup the most recent snapshot with a fixed name pattern, that's still not very fexible.</p>

<p>Snapshot attributes can fix both of these problems:</p>

<ul>
  <li>using CG values, mark backup-to-S3 job as failed unless all backup jobs with Consistency Group 2 have succeeded</li>
  <li>process snapshots with the same CG at the same time so that all volumes where CG=2 are backed up to S3 at approximately the same time which improves the ods of the entire Consistency Group succeding</li>
</ul>

<p>While we could use snapshot names - for instance, name a snapshot <code class="language-plaintext highlighter-rouge">backup2s3</code> and look for a snapshot of VolumeID 14 with that name - to similar effect, attributes use KV pairs and provide much more flexibility and hence power.</p>

<p>In addition to improving workflows, another area of improvement would be better logging and reporting which could include not just OK/FAIL, but also snapshot attributes so that we can create events and send them to Slack, <a href="/2023/02/06/cloud-sync-elasticsearch.html">Elasticsearch</a> or wherever.</p>

<p>Event like this would make it easy to create a "backup to S3" dashboard:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
    </span><span class="nx">cg</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">$CG</span><span class="w">
    </span><span class="nx">volid</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">$volId</span><span class="w">
    </span><span class="nx">snapid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$snapId</span><span class="w">
    </span><span class="nx">start</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">$startDate</span><span class="w">
    </span><span class="nx">end</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">$endDate</span><span class="w">
    </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$res</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>We could group such events by date and Consistency Group, and easily find which Consistency Groups have failed.</p>

<p>I've blogged about the topic of backup to S3 several times, see <a href="/2021/04/21/solidfire-backup-to-s3.html#demo-script">this</a> and archive for other posts.</p>

<h2 id="conclusion">Conclusion</h2>

<p>SolidFire snapshot names can be set in the UI, but attributes cannot.</p>

<p>SolidFire snapshot attributes are a neat way to improve data management workflows that involve snapshots.</p>

<p>I don't know how SolidFire users use backup to S3 and whether anyone needs that feature, so I'm not going to try and write another backup script. But folks who already automate their SolidFire snapshots and haven't been aware of snapshot attributes should be able to easily make use of this feature on their own.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/api" class="page__taxonomy-item p-category" rel="tag">api</a><span class="sep">, </span>
    
      <a href="/tags/backup" class="page__taxonomy-item p-category" rel="tag">backup</a><span class="sep">, </span>
    
      <a href="/tags/consistency-group" class="page__taxonomy-item p-category" rel="tag">consistency group</a><span class="sep">, </span>
    
      <a href="/tags/devops" class="page__taxonomy-item p-category" rel="tag">DevOps</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/powershell" class="page__taxonomy-item p-category" rel="tag">powershell</a><span class="sep">, </span>
    
      <a href="/tags/snapshot" class="page__taxonomy-item p-category" rel="tag">snapshot</a><span class="sep">, </span>
    
      <a href="/tags/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/automation" class="page__taxonomy-item p-category" rel="tag">automation</a><span class="sep">, </span>
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2023-04-01T00:00:00+08:00">2023-04-01 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Using+snapshot+attributes+in+SolidFire%20https%3A%2F%2Fscaleoutsean.github.io%2F2023%2F04%2F01%2Fusing-solidfire-snapshot-attributes.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2023/04/01/using-solidfire-snapshot-attributes.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2023/03/29/zeroout-with-storage-vmotion-rethin.html" class="pagination--pager" title="Zero-out and rethin VMDKs on NFS">Previous</a>
    
    
      <a href="/2023/04/15/cloudcasa-netapp-trident-solidfire.html" class="pagination--pager" title="CloudCasa, Velero, NetApp Trident, and SolidFire">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/12/05/eseries-santricity-lockout.html" rel="permalink">E-Series SANtricity Web UI lockout
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-12-05T00:00:00+08:00">2025-12-05 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">How to use (or not) lockout feature in E-Series SANtricity
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/15/mcp-tapout.html" rel="permalink">TAPOUT - MCP server for ONTAP to E-Series migration
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-15T00:00:00+08:00">2025-10-15 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Migrate to NetApp E-Series arrays with MCP
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/10/post-quantum-crypto-proxy-for-solidfire-eseries-api.html" rel="permalink">Post-Quantum API proxy for E-Series and SolidFire
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-10T00:00:00+08:00">2025-10-10 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Enterprise-grade PQC TLS encryption for E-Series and SolidFire API endpoints
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/10/09/storagegrid-s3-cache-branch-buckets.html" rel="permalink">StorageGRID Branch Buckets and Read Cache
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-10-09T00:00:00+08:00">2025-10-09 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Some ways to take better advantage of the new features in StorageGRID 12
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
