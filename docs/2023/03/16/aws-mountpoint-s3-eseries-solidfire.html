<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Use cases for AWS mountpoint-s3 with NetApp E-Series and SolidFire | Acting Technologist</title>
<meta name="description" content="Some use cases for AWS mountpoint-s3 with NetApp E-Series and SolidFire">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Use cases for AWS mountpoint-s3 with NetApp E-Series and SolidFire">
<meta property="og:url" content="https://scaleoutsean.github.io/2023/03/16/aws-mountpoint-s3-eseries-solidfire.html">


  <meta property="og:description" content="Some use cases for AWS mountpoint-s3 with NetApp E-Series and SolidFire">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Use cases for AWS mountpoint-s3 with NetApp E-Series and SolidFire">
  <meta name="twitter:description" content="Some use cases for AWS mountpoint-s3 with NetApp E-Series and SolidFire">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2023/03/16/aws-mountpoint-s3-eseries-solidfire.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2023-03-16T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2023/03/16/aws-mountpoint-s3-eseries-solidfire.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->


<meta name="bingbot" content="noindex,noarchive,nofollow">


  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Use cases for AWS mountpoint-s3 with NetApp E-Series and SolidFire">
    <meta itemprop="description" content="Some use cases for AWS mountpoint-s3 with NetApp E-Series and SolidFire">
    <meta itemprop="datePublished" content="2023-03-16T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2023/03/16/aws-mountpoint-s3-eseries-solidfire.html" itemprop="url">Use cases for AWS mountpoint-s3 with NetApp E-Series and SolidFire
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-03-16T00:00:00+08:00">2023-03-16 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <ul>
  <li><a href="#aws-mountpoint-s3">AWS mountpoint-s3</a></li>
  <li><a href="#deploy">Deploy</a></li>
  <li><a href="#use-cases-for-e-series-and-solidfire">Use cases for E-Series and SolidFire</a>
    <ul>
      <li><a href="#s3-bucket-as-backup-mountpoint">S3 bucket as backup mountpoint</a>
        <ul>
          <li><a href="#sub-bucket-allocation">Sub-bucket allocation</a></li>
          <li><a href="#mountpoint-s3-vs-application-native-backup-to-s3">mountpoint-s3 vs application-native backup to S3</a></li>
        </ul>
      </li>
      <li><a href="#e-series-as-s3-storage">E-Series as S3 storage</a></li>
      <li><a href="#data-sharing-with-single-host-filesystem">Data sharing with single-host filesystem</a></li>
      <li><a href="#analytics">Analytics</a></li>
    </ul>
  </li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="aws-mountpoint-s3">AWS mountpoint-s3</h2>

<p><a href="https://github.com/awslabs/mountpoint-s3">AWS mountpoint-s3</a> lets us mount S3 bucket or its path to a Linux mount point, while supporting a subset of POSIX.</p>

<p>The idea (I guess) is to support sequential IO to eliminate the challenges, excessive chatter and small IO that occurs when a more complete POSIX support is possible and used with small files (or generic workloads).</p>

<p>Currently even plain writes aren't supported but they will be soon, so I write this post as if writes and reads were both supported.</p>

<h2 id="deploy">Deploy</h2>

<p>Follow instructions from the README.md and deploy.</p>

<p>Once mountpoint-s3 is up and running, client(s) running mounpoint-S3 can read S3 bucket data at high speed. Soon writes will be possible as well.</p>

<p><img src="/assets/images/aws-mountpoint-s3-01-working.png" alt="AWS mountpoint-S3 on Rocky Linux 8" /></p>

<p>What can we do with this?</p>

<h2 id="use-cases-for-e-series-and-solidfire">Use cases for E-Series and SolidFire</h2>

<p>NetApp StorageGRID is NetApp's main S3 solution, but ONTAP supports it as well. These could be backing object stores for mountpoint-s3, but this post isn't about that - it's about use cases for mountpoint-s3 with E-Series and SolidFire.</p>

<p>Here are some use cases I have in mind for mountpoint-s3.</p>

<h3 id="s3-bucket-as-backup-mountpoint">S3 bucket as backup mountpoint</h3>

<p>First, we'd create a bucket and apply desired ACLs. For example, we could only allow write and list operations to specific set of S3 keys, so that the user posting data cannot delete it. Restores would be done by a different account (or the same, but it'd require read permissions as well).</p>

<p>On SolidFire client we mount S3 just like in that screenshot above, and now we can dump backups to /mnt/backup.</p>

<p>Because mountpoint-s3 is supposed to excel and such workloads (sequential writes), we should be able to backup much faster - possibly at several GB/s - than by using SolidFire's "Backup to S3" API.</p>

<p>If we assume that QoS on the SolidFire volume would be adjusted just in time before scheduled backup, and be left in place for its duration, we could read at 500 MB/s and it'd take less than 9 hours to backup a 16 TB database. Not too bad!</p>

<p>In fact we'd need that much time only the first time around, or maybe once a week, while the rest could be incremental, executed every 15 minutes (log archiving for PostgreSQL, for example).</p>

<p>Another, useful distinction compared to SolidFire's "Backup to S3" feature is that "Backup to S3" uses SolidFire's management network (as observed <a href="/2021/05/19/solidfire-exporter-monitor-solidfire-network-interfaces-with-prometheus-and-grafana.html">here</a>), which can be a problem due to policies and/or network layout. Mountpoint-s3, on the other hand, connects to S3 bucket based on Linux client's routing table which is much more flexible.</p>

<p>We should also recall that SolidFire's "Backup to S3" backs up (and can restore) only an entire SolidFire volume, whereas application-based backup/restore works with application data.</p>

<h4 id="sub-bucket-allocation">Sub-bucket allocation</h4>

<p>On S3, we can allocate one bucket per VM (or workload) or per user. But it can be more granular.</p>

<p>If ACLs are set to protect paths to each workload, so that credentials1 can access only backup-bucket/vm1, it's not necessary to provision too many buckets.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>backup-bucket/vm1
backup-bucket/vm2
</code></pre></div></div>

<p>But one has to watch out for typos and mistakes when creating ACLs.</p>

<h4 id="mountpoint-s3-vs-application-native-backup-to-s3">mountpoint-s3 vs application-native backup to S3</h4>

<p>If our application can backup to S3, we can eliminate the overhead of mountpoint-s3 and backup/restore directly to/from S3.</p>

<p>But not all applications can do that. It is also simpler to dump DB or tar a directory to /mnt/backup than install and update S3 CLI, especially since mountpoint-s3 can be managed by root, while backup/restore to a mountpoint-s3 path can be performed by a non-root user who doesn't need to have access to S3 credentials.</p>

<h3 id="e-series-as-s3-storage">E-Series as S3 storage</h3>

<p>From <a href="/2022/10/21/minio-performance-netapp-e-series.html">this simple test</a> I did with MinIO on E-Series EF570 I know a single VM instance of MinIO can write at multiple GB/s, so it's a very affordable way to create a backup repo using NL-SAS storage (using E2800, for example) and a VM.</p>

<h3 id="data-sharing-with-single-host-filesystem">Data sharing with single-host filesystem</h3>

<p>This is a bit speculative (mountpoint-s3 is in alpha), but I expect it to work.</p>

<p>With several Linux VMs or containers connected to E-Series, as data is ingested to multiple Linux hosts with ext4 or XFS, it can be moved to mountpoint-s3 and become visible to external S3 clients.</p>

<p>Since no modifications to files are allowed via mountpoint-s3, users can analyze S3 data by reading data directly from S3 (without using mountpoint-s3).</p>

<p>Using the same approach, any S3 client can be configured to synchronize or replicate data from this bucket to other locations.</p>

<p>One example of such a use case is AI in hybrid cloud environments. We may create <a href="/2024/01/10/ai-deep-learning-pytorch-checkpointing-eseries.html">checkpoints</a> on-premises and read them from any location from which we want to continue computation.</p>

<h3 id="analytics">Analytics</h3>

<p>Mountpoint-s3 read performance can be over 5 GB/s.</p>

<p>Individual SolidFire volumes can provide read performance up to few hundred MB/s (which is why my earlier estimate for taking a backup of a 16 TB volume is (16000 GB / 0.5 GB) seconds). Short of applying tricks (such as using LVM), certain read analytics can be sped up by 10x by moving data to S3 mountpoint and analyzing it that way.</p>

<p>We could access S3 data at a local filesystem mountpoint, but if our application can work with S3, we could read it directly without mountpoint S3 (see <a href="/2022/03/10/s3-select-vs-remote-csv-over-fuse.html">this</a> example). We could also read it from multiple hosts at once, scaling performance on the client side.</p>

<p>E-Series has a much faster single volume performance compared to SolidFire, so this approach would be less interesting, but there are still scenarios in which we'd use the same approach. Mostly it's related to the ability to access S3 bucket natively from multiple S3 clients at the same time, eliminating the need to configure other ways of multi-client data sharing such as NFS.</p>

<h2 id="conclusion">Conclusion</h2>

<p>AWS mountpoint-s3 makes it easier to make indirect use S3 for special sequential workloads.</p>

<p>Mounting S3 buckets as local devices isn't new, but mountpoint-s3 is focused on specific workloads (sequential write-once, read-many) and should be less buggy and perform better than general approaches.</p>

<p>Application-integrated backup utilities and log archiving, as well as various analytics tools look like interesting use cases for mountpoint-s3.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/analytics" class="page__taxonomy-item p-category" rel="tag">analytics</a><span class="sep">, </span>
    
      <a href="/tags/backup" class="page__taxonomy-item p-category" rel="tag">backup</a><span class="sep">, </span>
    
      <a href="/tags/e-series" class="page__taxonomy-item p-category" rel="tag">E-Series</a><span class="sep">, </span>
    
      <a href="/tags/eseries" class="page__taxonomy-item p-category" rel="tag">eseries</a><span class="sep">, </span>
    
      <a href="/tags/mountpoint-s3" class="page__taxonomy-item p-category" rel="tag">mountpoint-s3</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/s3" class="page__taxonomy-item p-category" rel="tag">S3</a><span class="sep">, </span>
    
      <a href="/tags/solidfire" class="page__taxonomy-item p-category" rel="tag">SolidFire</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/kubernetes" class="page__taxonomy-item p-category" rel="tag">kubernetes</a><span class="sep">, </span>
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2023-03-16T00:00:00+08:00">2023-03-16 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Use+cases+for+AWS+mountpoint-s3+with+NetApp+E-Series+and+SolidFire%20https%3A%2F%2Fscaleoutsean.github.io%2F2023%2F03%2F16%2Faws-mountpoint-s3-eseries-solidfire.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2023/03/16/aws-mountpoint-s3-eseries-solidfire.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2023/02/27/group-multi-volume-backup-solidfire-kubernetes-trident.html" class="pagination--pager" title="Protect multi-PVC Kubernetes apps with NetApp Trident, SolidFire">Previous</a>
    
    
      <a href="/2023/03/29/zeroout-with-storage-vmotion-rethin.html" class="pagination--pager" title="Zero-out and rethin VMDKs on NFS">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/31/epa-version-3-dot-5.html" rel="permalink">EPA version 3.5.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-31T00:00:00+08:00">2025-08-31 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.5.0
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/27/epa-version-3-dot-4-dot-1.html" rel="permalink">EPA version 3.4.1
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-27T00:00:00+08:00">2025-08-27 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.4.1
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/24/epa-version-3-dot-4.html" rel="permalink">EPA version 3.4.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-24T00:00:00+08:00">2025-08-24 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.4.0
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/20/econfig-v2-updates.html" rel="permalink">E-Config v2 updated for QLC drives
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-20T00:00:00+08:00">2025-08-20 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">I got carried away while making overdue updates to E-Config and added a new feature
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
