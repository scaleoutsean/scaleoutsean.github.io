<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            Use Simple Backups to file-backup cloned SolidFire volumes to S3/B2 | Acting Technologist
      
    </title>
    <meta name="description" content="
     Use Simple Backups to file-backup cloned SolidFire volumes to S3/B2
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Use Simple Backups to file-backup cloned SolidFire volumes to S3/B2 | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Use Simple Backups to file-backup cloned SolidFire volumes to S3/B2" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en" />
<meta name="description" content="Use Simple Backups to file-backup cloned SolidFire volumes to S3/B2" />
<meta property="og:description" content="Use Simple Backups to file-backup cloned SolidFire volumes to S3/B2" />
<link rel="canonical" href="https://scaleoutsean.github.io/2023/09/03/simplebackup-with-solidbackup.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2023/09/03/simplebackup-with-solidbackup.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-09-03T00:00:00+08:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2023/09/03/simplebackup-with-solidbackup.html"},"author":{"@type":"Person","name":"scaleoutSean"},"description":"Use Simple Backups to file-backup cloned SolidFire volumes to S3/B2","@type":"BlogPosting","url":"https://scaleoutsean.github.io/2023/09/03/simplebackup-with-solidbackup.html","headline":"Use Simple Backups to file-backup cloned SolidFire volumes to S3/B2","dateModified":"2023-09-03T00:00:00+08:00","datePublished":"2023-09-03T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">Use Simple Backups to file-backup cloned SolidFire volumes to S3/B2</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>03 Sep 2023</span> - <i class="far fa-clock"></i> 


  
  
    8 minute read
  

    </span>
  </div>
  
        <ul>
  <li><a href="#what-is-simple-backups">What is Simple Backups?</a></li>
  <li><a href="#use-simple-backups-for-file-type-backup-with-solidfire-clones-mounted-to-a-backup-vm">Use Simple Backups for File-type backup with SolidFire clones mounted to a “backup VM”</a>
    <ul>
      <li><a href="#backup-sizes-compared-to-solidfires-backup-to-s3">Backup sizes compared to SolidFire’s Backup to S3</a></li>
    </ul>
  </li>
  <li><a href="#thoughts-on-simple-backups">Thoughts on Simple Backups</a>
    <ul>
      <li><a href="#needs-improvement">Needs improvement</a></li>
      <li><a href="#the-good">The good</a></li>
    </ul>
  </li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="what-is-simple-backups">What is Simple Backups?</h2>

<p>Today I evaluated Simple Backups, a managed backup-as-a-service.</p>

<p>Simple Backups can backup applications and files. As applications are backed up using application clients or APIs, there is nothing SolidFire-related there so I skipped that part and focused on <a href="https://simplebackups.com/server-backup/">file backup</a>.</p>

<p>When you use Simple Backups with block volumes in the public cloud, Simple Backups does this you:</p>

<ul>
  <li>Use the cloud storage provider API to take a snapshot</li>
  <li>Mounts the snapshot or its clone</li>
  <li>Backs it up based on job definition</li>
</ul>

<p>They also work on-premises, but currently cannot do the first two steps for you.</p>

<p><a href="https://github.com/scaleoutsean/solidbackup">SolidBackup</a> is a PoC type of project of mine that does three things:</p>

<ul>
  <li>snapshot and clone a list of SolidFire volumes</li>
  <li>mount them all in one VM</li>
  <li>backup data to S3 (by default using restic, but I also tried a few other tools)</li>
</ul>

<p>We can use SolidBackup to make data available for backup, and then use Simple Backups’ file backup to copy data to S3, Simple Backups’ cloud service, or local NAS device.</p>

<h2 id="use-simple-backups-for-file-type-backup-with-solidfire-clones-mounted-to-a-backup-vm">Use Simple Backups for File-type backup with SolidFire clones mounted to a “backup VM”</h2>

<p>For this PoC I didn’t even use <a href="https://github.com/scaleoutsean/solidbackup/blob/101f766a2cbaa28ebf3623acc9cfe7221b3f6ed9/solidbackup.ps1#L239">SolidBackup’s mount script</a> - I simply manually cloned and then mounted one of the SolidFire volumes I created yesterday. On the same VM, I deployed Simple Backups’ “worker” agent.</p>

<p>That can be done automatically or semi-automatically. I used the automatic approach. I had to open this VM to 3-4 Simple Backups’ IPs on port 22. Normally we’d use some dedicated user, but I used my personal test account on this test VM.</p>

<p><img src="/assets/images/simplebackup-01-install-ssh.png" alt="Simple Backups deployment script" /></p>

<p>Before I could create and run a backup job, I needed to simulate SolidBackup’s “<a href="https://github.com/scaleoutsean/solidbackup/blob/develop/solidsync.ps1">clone</a> &amp; <a href="https://github.com/scaleoutsean/solidbackup/blob/101f766a2cbaa28ebf3623acc9cfe7221b3f6ed9/solidbackup.ps1#L239">mount</a>” steps, by manually mounting a volume I cloned in the SolidFire Web UI. Then I defined a Simple Backups backup job to backup files in that mount path.</p>

<p><img src="/assets/images/simplebackup-02-mount-clone-volume.png" alt="Simple Backups filesystem and job configuration" /></p>

<p>Note the advanced features - incremental backup, file backup streaming (lessens the need for local temp space), etc. (NB: you aren’t allowed to enable those in the free trial; if you’re trialing and create a job with these enabled, it will fail!)</p>

<p>I also needed a backup destination and for that I created a bucket on Backblaze. I did not attempt to use Object Lock.</p>

<p><img src="/assets/images/simplebackup-03-create-backup-destination.png" alt="Create Backblaze bucket for backup" /></p>

<p>Then I went back to Simple Backups and configured this Backblaze bucket. I did not enable Object Lock, but it’s good to know that it’s available and could be used.</p>

<p><img src="/assets/images/simplebackup-04-create-backup-destination.png" alt="Configure B2 destination for backup job" /></p>

<p>With that my backup job was ready to be finalized. Using daily schedule here, I’d also run SolidBackup’s clone re-sync feature to make sure /simplebackup/volume11-36 is in sync and re-mounted before daily backup job kicks off.</p>

<p><img src="/assets/images/simplebackup-05-pick-backup-destination.png" alt="Complete creation of new backup job" /></p>

<p>Next run was the next day so I clicked on “Run now” to avoid the wait.</p>

<p><img src="/assets/images/simplebackup-06-backup-job-summary.png" alt="Simple Backups File backup job overview" /></p>

<p>In Advanced tab they have Backup Trigger URL, which is very useful: we would add this to SolidBackup’s clone volume step, to trigger this backup from SolidBackup volume-resync: as soon as the volume is re-synced &amp; mounted, trigger backup job.</p>

<p><img src="/assets/images/simplebackup-07-backup-trigger.png" alt="Backup trigger URL in Simple Backups backup job" /></p>

<p>After first run, “Backup Archive” looked odd (“partial-0”).</p>

<p><img src="/assets/images/simplebackup-08-backup-job-error.png" alt="Simple Backups backup job" /></p>

<p>I turned out those advanced features (streaming backup, etc.) weren’t available for my free evaluation plan, so I had to edit the job, remove those features, and run again. This time it worked.</p>

<p><img src="/assets/images/simplebackup-09-backup-job-success.png" alt="Backup activity on s198" /></p>

<p>Backup of 0.75 GiB of volume files took less than 1 minute.</p>

<p><img src="/assets/images/simplebackup-10-backup-job-success-log.png" alt="Backup job log" /></p>

<p>Job history has a very useful console tab where we can see not only the entire job log, but also output (478 MiB copied to Backblaze).</p>

<p><img src="/assets/images/simplebackup-11-backup-job-success-text-log.png" alt="Backup job console log" /></p>

<p>I downloaded this archive file, restored and compared against the file that was backed up from the backup VM (s198) - the checksums were identical.</p>

<p><img src="/assets/images/simplebackup-12-restore-verification.png" alt="Simple Backups restore verification" /></p>

<p>I also looked at the Backblaze bucket - the file was there.</p>

<p><img src="/assets/images/simplebackup-13-bucket-content.png" alt="Backblaze bucket with Simple Backups data" /></p>

<h3 id="backup-sizes-compared-to-solidfires-backup-to-s3">Backup sizes compared to SolidFire’s Backup to S3</h3>

<p>Two days ago I used <a href="/2023/09/02/solidfire-test-volumes.html">synthetic test data</a> to <a href="/2023/09/02/solidfire-backup-to-s3-backblaze-b2.html">backup SolidFire volumes to Backblaze</a> using SolidFire’s Backup-to-S3 feature.</p>

<p>Using SolidFire’s Native mode where data is (in-volume) deduplicated and compressed, backups were close to MiB. As far as Simple Backups is concerned, files are clearly GZip-ed and the size was 501 MB (see that B2 bucket or job summary screenshot above).</p>

<p>Depending on type of data, two techniques may produce similar or different data, so we cannot make a generic comparison of the two approaches. Also, when I created data I slightly changed the value of deduplication parameter for each volume, so in order to properly compare, I used SolidFire’s Backup-to-S3 to backup volume11-36 to S3 again:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># os3/backup/PROD-wcwb/volume11-36/segments/2023-09-04T05.56.43Z/</span>
501MiB	256 objects	backup/PROD-wcwb/volume11-36/segments/2023-09-04T05.56.43Z
</code></pre></div></div>

<p>The same volume with 750 MB of data results in 501 MB of data on S3 (Simple Backups) and 525 MB (SolidFire’s Backup-to-S3 (Native Mode)). Or 478 MiB (Simple Backups / rclone / gzip) vs. 501 MiB (SolidFire Backup to S3 / native).</p>

<p>And no, I don’t know what SolidFire native mode uses. I know it works with 4096 KiB segments. From Simple Backups’ job log we can see it uses rclone and 1024 KiB segments.</p>

<p>Simple Backups is slightly more space efficient in this particular case, and they may allow (if they already don’t, I haven’t looked) different compression algorithms in the future.</p>

<h2 id="thoughts-on-simple-backups">Thoughts on Simple Backups</h2>

<h3 id="needs-improvement">Needs improvement</h3>

<p>Simple Backups should use reverse SSH to eliminate the need to open SSH to their command &amp; control servers in the cloud.</p>

<p>They should also dim the advanced options to free trial users so that we don’t select those options and have backups fail because free trial users aren’t allowed to use them (which is something I wouldn’t even mind, to edit my job, but it took me a while to figure out why the job was <em>silently failing</em> (the screenshot with <code class="language-plaintext highlighter-rouge">partial-0_</code> shows the job succeeded but backup file size in B2 was 0 bytes)).</p>

<p>I wish they just fixed that by charging per day, then I would have subscribed for premium service for the duration of my evaluation (1 day).</p>

<h3 id="the-good">The good</h3>

<p>It works, it’s simple and I like the UI - everything I needed was available, and easy to find.</p>

<p>I haven’t tested the API, but it’s available. Because the SolidFire API is very nice, it would be easy to make very nice integrations. SolidBackup already assumes backup administrator maintains a configuration file of Source-Destination pairs that need to be cloned and (Destination) backed up. It looks like this (each config could have more than one project, each project more than one application):</p>

<pre><code class="language-raw">@{
  Namespaces = @{
    projecta     = @{
      app1         = @{ 
        SrcId      = 398
        TgtId      = 401
        Part       = 0
        FsType     = "ext4"
        BkpType    = "file"
      }
    } 
  }    
}
</code></pre>

<p>We could compare projects against our Simple Backups’ locations and apps against Simple Backups’ backup jobs, and automatically unschedule or delete backup jobs for volumes that are not present in the config file (i.e. no longer need to be protected), and create new backup jobs for apps that exist in the configuration file but have no backup job. Then we’d obtain the trigger URL for the job and use it from SimpleBackup to kick off each backup job as soon as cloned volumes were mounted.</p>

<p>That would give us almost zero configuration Simple Backups.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Simple Backups has various integrations for popular public cloud storage (e.g. Digital Ocean snapshots).</p>

<p>There’s no such plugin for on-premises storage systems and that includes SolidFire, but as long as we can ensure that SolidFire volumes are mounted and ready, for which we can use something like SolidBackup’s scripts, then we can use Simple Backups to create a centralized backup server.</p>

<p>Of course, the same caveats apply - it is assumed the administrator of the VM running those clone, mount and (Simple Backups) backup jobs is trusted by all data owners because he has access to clones of all SolidFire volumes that need protection, but multiple VMs could be set up to work around that.</p>

<p>Other challenge may be that Linux-based VM can mount clones with ext3, ext4, and XFS, so this automated approach works only for Linux systems with these filesystems.</p>

<p>Without a clone-or-sync approach like the one we use in SolidBackup it is possible to install Simple Backups on each VM that needs data protection, and run it natively from there. Simple Backups’ pricing is currently based on number of jobs and data quantity, so having it deployed on many VMs wouldn’t make it more expensive. It would only have to run on all VMs which is more sensitive security-wise, as incoming SSH connections from Simple Backups’ cloud need to be allowed.</p>

<p>The approach to volume resync used in SolidBackup is perfect for Simple Backups, as it does what Simple Backups needs and doesn’t have - integration with SolidFire, and the ability to copy SolidFire snapshots and make them available for backup.</p>


      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#solidfire">solidfire</a>
      &nbsp; 
    
      <a href="
      /categories/#automation">automation</a>
       
    
  </span>
</div>
    

  
    <div>
      <h3>Related Posts</h3>
      <ul>
      
        <li><a href="/2023/09/03/solidbackup-with-kopia.html">SolidBackup with Kopia</a></li>
      
        <li><a href="/2023/09/02/solidfire-backup-to-s3-backblaze-b2.html">SolidFire backup-to-S3 with Backblaze</a></li>
      
        <li><a href="/2023/09/02/solidfire-test-volumes.html">Using synthetic SolidFire S3 backups for Dev/Test purposes</a></li>
      
        <li><a href="/2023/12/10/solidfire-backup-to-minio-compression.html">NetApp SolidFire backup to S3 and MinIO compression savings</a></li>
      
        <li><a href="/2021/06/22/solidfire-backup-and-cloning-with-per-storage-node-queues.html">Maximum parallelization of SolidFire Backup and Volume Copy/Clone jobs</a></li>
      
      </ul>
    </div>
  

    
  </div><footer class= "footer">
    <p>2025-07-23 22:50 </p>
    <p>Copyright © 2025 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
