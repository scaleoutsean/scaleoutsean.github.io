<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Change E-Series DDP preservation capacity on-the-fly | Acting Technologist</title>
<meta name="description" content="Change E-Series DDP preservation capacity on-the-fly">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Change E-Series DDP preservation capacity on-the-fly">
<meta property="og:url" content="https://scaleoutsean.github.io/2023/08/02/eseries-increase-reserve-preservation-capacity-drives.html">


  <meta property="og:description" content="Change E-Series DDP preservation capacity on-the-fly">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Change E-Series DDP preservation capacity on-the-fly">
  <meta name="twitter:description" content="Change E-Series DDP preservation capacity on-the-fly">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2023/08/02/eseries-increase-reserve-preservation-capacity-drives.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2023-08-02T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2023/08/02/eseries-increase-reserve-preservation-capacity-drives.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Change E-Series DDP preservation capacity on-the-fly">
    <meta itemprop="description" content="Change E-Series DDP preservation capacity on-the-fly">
    <meta itemprop="datePublished" content="2023-08-02T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2023/08/02/eseries-increase-reserve-preservation-capacity-drives.html" itemprop="url">Change E-Series DDP preservation capacity on-the-fly
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-08-02T00:00:00+08:00">2023-08-02 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h2 id="requirement">Requirement</h2>

<p>Some users want to start small and flexibly add disks in small increments (1, 2, 3) later.</p>

<p>For various reasons, DDP is a good match for that. The most obvious argument against using classic RAID is one isn't supposed to create weird RAID 5 or 6 widths - it results in unpredictable (usually on the negative side) performance and the larger a RAID 5 or 6 group, the slower it rebuilds.</p>

<p>You can search this blog or the NetApp Web site for more on DDP vs. RAID 6.</p>

<p>There are two related questions (and answers):</p>

<ul>
  <li>Can DDP be expanded in small increments without negative consequences - yes</li>
  <li>Can DDP "protection" capacity be increased as the pool grows to 60 or 120 or more drives - yes</li>
</ul>

<h2 id="solution">Solution</h2>

<p>I wrote about DDP expansion before so I'll focus on the second question first.</p>

<p>You may start with 20 drives and allocate 2 (common best practice for DDP for up to 2-3 dozen disks) for protection (the so-called DDP preservation capacity). But once you get to 60 drives, you may want to have three drives worth of spare capacity.</p>

<p>DDP preservation capacity is a disk pool setting that's available here:</p>

<ul>
  <li>In SANtricity System Manager, go to * Storage* &gt; <em>Pools and Volumes</em>  and select your DDP</li>
  <li>Click on <em>View/Edit Settings</em></li>
  <li>Go to the modal's second tab, <em>Pool Settings</em> and scroll all the way down</li>
</ul>

<p><img src="/assets/images/eseries-ddp-change-number-of-reserved-drives-00.png" alt="DDP Pool Settings" /></p>

<ul>
  <li>At the very bottom you'll be offered to * update*  (yes!!!) the pool's preservation capacity.</li>
</ul>

<p><img src="/assets/images/eseries-ddp-change-number-of-reserved-drives-01.png" alt="DDP Preservation Capacity" /></p>

<ul>
  <li>Change it (e.g. from 3 to 4) and hit <em>Save</em></li>
</ul>

<p>Now the pool should have a slightly reduced capacity (by 1 disk) as 1 disk worth of capacity was assigned to preservation.</p>

<p>The "Why can't I increase" question is concerning, so let's check that link. What TFM <a href="https://docs.netapp.com/us-en/e-series-santricity/sm-storage/why-cant-i-increase-my-preservation-capacity.html">says</a> is:</p>

<blockquote>
  <p>If you have created volumes on all available usable capacity, you cannot increase preservation capacity without adding capacity to the pool by either adding drives or deleting volumes.</p>
</blockquote>

<p>All right, no big deal - if you're on 3 and you've used up all space for data, you won't be able to increase that to 4 until you add another disk to the pool. Makes sense.</p>

<p>I was able to both shrink (go from 4 to 3) and grow (from 3 to 4) DDP preservation setting.</p>

<p>(FYI, this particular screenshot was taken on E-Series simulator v11.73, something that's handy for quick checks of how SANtricity Web UI works. E-Series Simulator is available to NetApp employees and partners.)</p>

<h2 id="demo">Demo</h2>

<p>I put one of these experiments in a short <a href="https://rumble.com/v3415px-expand-e-series-ddp-pool-and-grow-and-shrink-its-preservation-capacity.html">demo video</a> (2m6s).</p>

<p>It's annotated and easy to understand, so you can mute it if you don't like the voiceover.</p>

<h2 id="conclusion">Conclusion</h2>

<p>By default, DDP has performance characteristics similar to RAID 6. It requires 11 disks to start, but then you can:</p>

<ul>
  <li><a href="/2021/07/06/e-series-ddp-expansion-and-rebalancing.html">Grow DDP</a> in increments between 1 and many disks</li>
  <li>Start with a small DDP preservation setting (e.g. 2 out of 11 at first) and grow it to 3 or 4 as your DDP hits 30 or 60 or 100 drives</li>
</ul>

<h2 id="appendix">Appendix</h2>

<p>For a closer look at the expansion and changes, here are some additional screenshots:</p>

<p>Create a new DDP from 20 "7.68" TB drives.</p>

<p><img src="/assets/images/eseries-ddp-change-number-of-reserved-drives-02-new-20-drive-dpp.png" alt="Create new DDP from 20 drives" /></p>

<p>Let's examine the DDP's properties: these particular drives are 7,319.85 GiB large and the total usable DDP capacity is 104,312 GiB (see the details on capacity calculation in the Appendix at the bottom.)</p>

<p><img src="/assets/images/eseries-ddp-change-number-of-reserved-drives-03-new-20-drive-dpp-settings.png" alt="DDP properties" /></p>

<p>Now let's add 10 more drives, naively thinking that should increase the capacity by 50% (it won't exactly).</p>

<ul>
  <li>Interestingly, the size of these drives - due to them being made by a different manufacturer, for example - are 7,324.85 GiB, so when confirming our action we get a warning that only 7319.85 (5 GiB less) will be used as that's the size of the smallest drive in the original 20 disk group used in this pool</li>
  <li>10 drives amount to 73,248.51 GiB, but as we just saw, this will add 73,198 GiB due to the new disk not having identical capacity which will cause a small "loss" in the process</li>
</ul>

<p><img src="/assets/images/eseries-ddp-change-number-of-reserved-drives-04-add-10-drives-to-20-drive-ddp.png" alt="Expand DDP with 10 similar drives" /></p>

<p>Now our DDP has 162,264 GiB, which despite the loss of 50 GiB, is 55% more, although the number of disks went from 20 to 30. Why?</p>

<p>Because the overhead i.e. the number of preservation capacity was 2 (disks worth of capacity) and it's still 2, which is now smaller percentage-wise (2 over 30 vs. 2 over 20 before).</p>

<p>Originally 18 disks worth of capacity were usable in a 20 large pool. We've added 10 so it's 28 now.</p>

<p><img src="/assets/images/eseries-ddp-change-number-of-reserved-drives-05-30-drives-2-preservation-cap.png" alt="30/2 DDP" /></p>

<p>Let's change the DDP's preservation capacity from 2 to 4 drives worth of capacity: you'd think this would drop usable by 2 x 7,319.85 GiB, but it doesn't. It drops only 11,574 GiB (as if disks are 5,787 GiB!).</p>

<p><img src="/assets/images/eseries-ddp-change-number-of-reserved-drives-06-30-drives-4-preservation-cap.png" alt="Change DDP preservation from 2 to 4" /></p>

<p>(N.B. The notes in these two screenshots are mine, so that I can tell which is which without looking at the file name!)</p>

<p>Because we have no volumes, nothing is used, so preservation setting can be manipulated both ways, up and down. Let's shrink it from 4 to 3. Perhaps unexpectedly, usable capacity grows by only 5,792 GiB.</p>

<p><img src="/assets/images/eseries-ddp-change-number-of-reserved-drives-07-30-drives-3-preservation-cap.png" alt="Change DDP preservation from 4 to 3" /></p>

<p>The main reason is RAID 6-like protection comes * after*  preservation capacity is deducted.</p>

<h3 id="usable-capacity-calculation-in-ddp">Usable capacity calculation in DDP</h3>

<p>If you're trying to make precise sense of the figures, let's do a simple (the exact calculation is slightly different) calculation for 30-large DDP with 3 drives worth of preservation capacity:</p>

<ul>
  <li>30/3 means 3 drives need to be deducted immediately</li>
  <li>The remainder (27) are protected in a RAID 6-like fashion, so 8+2, i.e. deduct 20%</li>
  <li>DDP uses no hot spares</li>
</ul>

<p>Capacity-wise:</p>

<ul>
  <li>(30-3) x 7,319.85 x 0.8 = 158,108.76 GiB</li>
  <li>SANtricity shows (last screenshot, just above) 156,472.00 GiB, which is pretty close</li>
  <li>The exact calculation method for DDP capacity can be found in the DDP Technical Report which I've linked to several times - please read other DDP posts or use a search engine</li>
</ul>


        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/ddp" class="page__taxonomy-item p-category" rel="tag">DDP</a><span class="sep">, </span>
    
      <a href="/tags/e-series" class="page__taxonomy-item p-category" rel="tag">e-series</a><span class="sep">, </span>
    
      <a href="/tags/eseries" class="page__taxonomy-item p-category" rel="tag">eseries</a><span class="sep">, </span>
    
      <a href="/tags/expand" class="page__taxonomy-item p-category" rel="tag">expand</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/pool" class="page__taxonomy-item p-category" rel="tag">pool</a><span class="sep">, </span>
    
      <a href="/tags/preservation" class="page__taxonomy-item p-category" rel="tag">preservation</a><span class="sep">, </span>
    
      <a href="/tags/shrink" class="page__taxonomy-item p-category" rel="tag">shrink</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2023-08-02T00:00:00+08:00">2023-08-02 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Change+E-Series+DDP+preservation+capacity+on-the-fly%20https%3A%2F%2Fscaleoutsean.github.io%2F2023%2F08%2F02%2Feseries-increase-reserve-preservation-capacity-drives.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2023/08/02/eseries-increase-reserve-preservation-capacity-drives.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2023/08/01/fscrawler-filesystem-analytics-elasticsearch.html" class="pagination--pager" title="FSCrawler for basic filesystem analytics in Elasticsearch">Previous</a>
    
    
      <a href="/2023/08/02/netapp-trident-v2307.html" class="pagination--pager" title="What's new in NetApp Trident v23.07">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/24/epa-version-3-dot-4.html" rel="permalink">EPA version 3.4.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-24T00:00:00+08:00">2025-08-24 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.4.0
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/20/econfig-v2-updates.html" rel="permalink">E-Config v2 updated for QLC drives
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-20T00:00:00+08:00">2025-08-20 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">I got carried away while making overdue updates to E-Config and added a new feature
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/11/epa-4-beta.html" rel="permalink">E-Series Performance Analyzer (EPA) v4 beta
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-11T00:00:00+08:00">2025-08-11 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">E-Series Performance Analyzer 4
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/11/bing-index-issue.html" rel="permalink">Got binged in July 2025
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-11T00:00:00+08:00">2025-08-11 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">How I got binged out of Bing in July 2025
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
