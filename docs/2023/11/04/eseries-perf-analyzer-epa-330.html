<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            E-Series Perf Analyzer (EPA) v3.3.0 | Acting Technologist
      
    </title>
    <meta name="description" content="
     What's new in EPA v3.3.0
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>E-Series Perf Analyzer (EPA) v3.3.0 | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="E-Series Perf Analyzer (EPA) v3.3.0" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en" />
<meta name="description" content="What’s new in EPA v3.3.0" />
<meta property="og:description" content="What’s new in EPA v3.3.0" />
<link rel="canonical" href="https://scaleoutsean.github.io/2023/11/04/eseries-perf-analyzer-epa-330.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2023/11/04/eseries-perf-analyzer-epa-330.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-11-04T00:00:00+08:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"scaleoutSean"},"description":"What’s new in EPA v3.3.0","@type":"BlogPosting","headline":"E-Series Perf Analyzer (EPA) v3.3.0","dateModified":"2023-11-04T00:00:00+08:00","datePublished":"2023-11-04T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2023/11/04/eseries-perf-analyzer-epa-330.html"},"url":"https://scaleoutsean.github.io/2023/11/04/eseries-perf-analyzer-epa-330.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">E-Series Perf Analyzer (EPA) v3.3.0</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>04 Nov 2023</span> - <i class="far fa-clock"></i> 


  
  
    5 minute read
  

    </span>
  </div>
  
        <ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#power">Power</a></li>
  <li><a href="#temperature">Temperature</a></li>
  <li><a href="#what-does-v330-do-for-expansion-shelves">What does V3.3.0 do for expansion shelves?</a></li>
  <li><a href="#whats-next-for-epa">What’s next for EPA?</a>
    <ul>
      <li><a href="#database">Database</a></li>
      <li><a href="#grafana">Grafana</a></li>
      <li><a href="#other-wish-list-items">Other wish-list items</a></li>
    </ul>
  </li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>My fork of E-Series Perf Analyzer (EPA) may soon see another release, v3.3.0. The changes are already in <code class="language-plaintext highlighter-rouge">master</code> branch, but I need to do some testing before I release.</p>

<p>What’s new?</p>

<p>Really just two things. The collector now collects:</p>

<ul>
  <li>Total power consumption of the controller shelf</li>
  <li>Environmental sensors’ readings in the controller shelf</li>
</ul>

<h2 id="power">Power</h2>

<p>E/EF Series (usually) have two working PSUs.</p>

<p>I didn’t see a point in gathering each individually, so I just add them up into one.</p>

<p>On today’s entry-level (E2800, EF300) arrays you may see something like 130W per PSU.</p>

<p>On EF570, I usually see 410W. You may be interested in what happens when… I don’t know. I did’t look except this one case:</p>

<ul>
  <li>100% read workload at 1.1 GB/s</li>
  <li>Total PSU wattage goes up 5W</li>
</ul>

<p><img src="/assets/images/epa-330-01-power-psu-reading-example.png" alt="Power consumption grows with workload" /></p>

<p>Other interesting details:</p>

<ul>
  <li>Performance metrics seem to lag behind PSU metrics</li>
  <li>Performance was way lower than 1 GB/s</li>
</ul>

<p>Both of these statements are false. Performance metrics don’t lag, but <em>average</em> metrics do.</p>

<p>SANtricity OS has point-in-time metrics but I’m sure they vary wildly, so any point-in-time reading is probably highly inaccurate and requires averaging.</p>

<p>Like most storage arrays, E-Series averages recent metrics on the array and that’s what we gather in EPA as well - the so called “analyzed” volume metrics.</p>

<p>So, what happens here is it takes some time for “analyzed” volume performance to start reflecting recent performance.</p>

<p>Secondly, if a performance burst lasts less than the averaging interval (say, my test runs 3 minutes and performance is averaged over 5), only 40% of my throughput may be reflected in the reading.</p>

<p>To precisely capture bursty workloads we’d have to sample every second or 5 seconds, which would be very hard for hundreds of disks and volumes. So we don’t.</p>

<p>So, sustained/stable workloads are reflected in performance metrics, and bursty workloads not fully. But bursty may also be absorbed by cache, whether on the client or array, and we don’t necessarily need to worry about them.</p>

<p>For PSU readings, one interesting part is they come from “hardware side of the house” and I assume they are near real-time.</p>

<h2 id="temperature">Temperature</h2>

<p>That’s another interesting one.</p>

<p>I avoid using any “insider” info to gather and interpret metrics because as Open Source project EPA is not supposed to require non-transparent interpretation of what something might mean.</p>

<p>The API call to a dual controller EF570 array returns 6 values. I don’t know if this applies to all arrays or not. I also don’t know if sensors are named the same.</p>

<p>To keep things simple I only asked in public (NetApp Community) how to interpret them and was told they represent CPU temperature, inlet temperature, and overall temperature “goodness” (where 128 is OK, anything else isn’t).</p>

<p>All right, so we can draw the first two (four curves for two controllers) in one chart, and the last two can be mapped to “Good or Crap” (on the right).</p>

<p><img src="/assets/images/epa-330-02-environmental-temp-sensor-reading-example.png" alt="Six sensors" /></p>

<p>Like PSU readings, these aren’t particularly useful in terms of performance monitoring, but if equipment is both busy or insufficiently cooled we can use this to notify us when workloads must be stopped or some equipment shut down.</p>

<h2 id="what-does-v330-do-for-expansion-shelves">What does V3.3.0 do for expansion shelves?</h2>

<p>Nothing.</p>

<p>I don’t know what the API returns for those. I assume PSU readings are still there, but can’t count on the response being identical.</p>

<p>I also don’t know if expansion shelves have the same number of sensors or not, and what each might mean.</p>

<p>So for now I’m not even trying to do something about expansion shelves.</p>

<p>Maybe, if I get a chance to access E-Series with expansion shelves or someone submits a pull request to add that, it can be added in a future version.</p>

<h2 id="whats-next-for-epa">What’s next for EPA?</h2>

<p>I’ve no firm plans at this time, but I’ve been thinking about the following categories.</p>

<h3 id="database">Database</h3>

<p>As some of you know InfluxDB v1 is kind of old, but it’s widely used and still maintained (although updates have slowed down).</p>

<p>I’ve been toying with the idea to update to InfluxDB v2 just so that I use the more actively maintained version. But it’d gain me nothing.</p>

<p>Another idea was to change to Elasticsearch 8, so that there’s one place for logs and performance metrics. But I’d have to redo all dashboards, maybe in Kibana. Also too much trouble.</p>

<p>Then in September came the big news from Influx Data: InfluxDB v3 OSS will be compatible with InfluxDB v1, and it will be released in 2024. Perfect!</p>

<p>That may still require some work in Grafana, but it could potentially even allow in-place upgrades so that users can keep their historic data.</p>

<h3 id="grafana">Grafana</h3>

<p>Grafana 8 OSS is old and the last security update was 12 months ago, in <a href="https://grafana.com/grafana/download/8.5.15?edition=oss">November 2022</a>.</p>

<p>EPA doesn’t <em>depend</em> on Grafana and even latest Grafana 10 works with InfluxDB v1, but EPA’s ready-made dashboards were created for Grafana 8, so users who don’t use stand-alone EPA need to continue using Grafana 8.</p>

<p>I don’t want to be in dashboarding business, so I’m not going to try to update Grafana deployment scripts in EPA to use Grafana 9 or 10.</p>

<p>Users could give it a try - deploy Grafana 8, then upgrade container to version 9 or 10 and see if dashboards work fine or not. Or, those who are good at Grafana could just fix or recreate the dashboards.</p>

<p>In 2024 InfluxDB v3 OSS will come out and then we’ll see if Grafana 10 works well with it. If it does, then I may look into refreshing and fixing the dashboards, as well as creating a simpler installer that no longer uses Ansible.</p>

<h3 id="other-wish-list-items">Other wish-list items</h3>

<p>As far as performance is concerned, EPA already collects everything I care about.</p>

<p>I’m interested in manageability metrics - something along the lines of what I already built <a href="/2023/10/29/consistency-group-monitoring-in-eseries.html#consistency-group-sensor-for-prtg">here</a> - but EPA has been focused on performance so I won’t rush adding these “manageability” metrics unless I encounter a real-life user who can benefit from them.</p>

<p>I still think manageability is better served by gathering logs and events in one place and Splunk or Elasticsearch are better solutions for that. And, by the way, <a href="https://splunkbase.splunk.com/app/1932">NetApp SANtricity Performance App for Splunk Enterprise</a> is dated but with small updates solves the problem for Splunk Enterprise users. The one thing this does and EPA doesn’t is capacity-related metrics.</p>

      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#storage">storage</a>
       
    
  </span>
</div>
    

  
    <div>
      <h3>Related Posts</h3>
      <ul>
      
        <li><a href="/2023/01/14/eseries-performance-analyzer-container-orchestrator-kubernetes.html">NetApp E-Series Performance Analyzer in orchestrated container environments</a></li>
      
        <li><a href="/2022/10/26/eseries-performance-analyzer-e-series.html">Notes on NetApp E-Series Performance Analyzer</a></li>
      
        <li><a href="/2023/01/08/eseries-flash-ssd-wear-level-monitoring.html">Monitor wear level of NetApp E-Series flash drives via the API and from the CLI</a></li>
      
        <li><a href="/2022/12/21/eseries-ssd-wear-indicator-santricity-117.html">SSD disk wear indicator in E-Series SANtricity 11.70</a></li>
      
        <li><a href="/2024/05/03/netapp-solidfire-collector-next.html">Towards next SolidFire Collector (SFC)</a></li>
      
      </ul>
    </div>
  

    
  </div><footer class= "footer">
    <p>2025-06-18 15:58 </p>
    <p>Copyright © 2025 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
