<!doctype html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="googlebot" content="noarchive">
    <meta name="googlebot" content="max-snippet:60">
    <meta name="googlebot" content="max-image-preview:small">
    <meta name="bingbot" content="noarchive">
    <meta name="bingbot" content="max-snippet:60">
    <meta name="bingbot" content="max-image-preview:small">
    <meta name="robots" content="noarchive">
    <meta name="robots" content="max-snippet:60">
    <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />
    <title>
        
            Versity S3 Gateway | Acting Technologist
      
    </title>
    <meta name="description" content="
     Promising free S3 gateway for POSIX filesystems
     ">

    <!-- LINK TO ATOM FEED FOR SEO -->
    <link rel="alternate" type="application/atom+xml" href="https://scaleoutsean.github.io/feed.xml" />

    <!-- FAVICON -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <div id="search"></div>
    <script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search" });
        });
    </script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Versity S3 Gateway | Acting Technologist</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Versity S3 Gateway" />
<meta name="author" content="scaleoutSean" />
<meta property="og:locale" content="en" />
<meta name="description" content="Promising free S3 gateway for POSIX filesystems" />
<meta property="og:description" content="Promising free S3 gateway for POSIX filesystems" />
<link rel="canonical" href="https://scaleoutsean.github.io/2023/06/14/versity-s3-posix-gateway.html" />
<meta property="og:url" content="https://scaleoutsean.github.io/2023/06/14/versity-s3-posix-gateway.html" />
<meta property="og:site_name" content="Acting Technologist" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-06-14T00:00:00+08:00" />
<script type="application/ld+json">
{"headline":"Versity S3 Gateway","dateModified":"2023-06-14T00:00:00+08:00","datePublished":"2023-06-14T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://scaleoutsean.github.io/2023/06/14/versity-s3-posix-gateway.html"},"author":{"@type":"Person","name":"scaleoutSean"},"@type":"BlogPosting","url":"https://scaleoutsean.github.io/2023/06/14/versity-s3-posix-gateway.html","description":"Promising free S3 gateway for POSIX filesystems","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

<body>

  <div class="container">
    <header id="header">
	<div id = site_title>
		<a href="https://scaleoutsean.github.io/">
			<h2 style="font-size:1.8em;">Acting Technologist</h2>
		</a>
		
		<h3>
			civilizations are created by individuals
		</h3>
		
	</div>

	<div id="subheader">
		
		<nav class="pages">
<a href="/about.html">About</a>

<a href="/archive.html">Archive</a>

<a href="/categories/">Categories</a>

<a href="/projects.html">Projects</a>
</nav>
		
		
		<nav class="social">
			
  
    <a href="https://www.github.com/scaleoutsean" target="_blank" id="github"><i class="fab fa-github" aria-hidden="true"></i></a>
  
   

  
    <a href="https://twitter.com/scaleoutsean" target="_blank" id="twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
  
   

  
  
    <a href="/feed.xml" target="_blank" id="rss"><i class="fas fa-rss" aria-hidden="true"></i></a>
   

		</nav>
		
	</div>
</header>


    <div class="post-container">
      <article id = "post">
        <h1 id = "post-title">Versity S3 Gateway</h1>

  
  <div class = "post-info">
    <span>
        <i class="far fa-calendar" aria-hidden="true"></i> <span>14 Jun 2023</span> - <i class="far fa-clock"></i> 


  
  
    3 minute read
  

    </span>
  </div>
  
        <h2 id="what">What</h2>

<p>As some may recall, over a year ago MinIO stopped supporting its gateway deployment type (aka MinIO Gateway).</p>

<p>I blogged about that topic <a href="/2022/08/09/nomad-beegfs-minio-s3.html">here</a>.</p>

<p>Since then several things have happened in this are, such as the MinIO-WEKA licensing spat (or maybe more, but I haven’t heard that it progressed further) in which MinIO accused WEKA of violating its license and WEKA responded that it hasn’t.</p>

<p>What seems to have taken place is WEKA forked MinIO Gateway and respected the license - I don’t recall now whether they forked an original/older Apache-licensed release or later AGPL code, but it also doesn’t matter: the point is some MinIO users didn’t like that Gateway went away.</p>

<p>The ScoutFS vendor Versity is another such user. Unlike WEKA, they took a different path and launched a community project <a href="https://github.com/versity/versitygw">VersityGW</a>, a permissively-licensed S3 gateway.</p>

<p>Versity S3 Gateway is a single Go binary, which makes it easy to deploy and even containerize.</p>

<h2 id="why">Why</h2>

<p>Why blog about it?</p>

<ul>
  <li>Versity GW may eventually by adopted by some E-Series users</li>
  <li>You can probably use this S3 gateway in your E-Series environment</li>
</ul>

<p>First, Versity S3 Gateway supports Versity ScoutFS which is what some E-Series users have in their environment.</p>

<p>Second, Versity S3 Gateway also supports generic POSIX filesystems, which is what  some other E-Series users have.</p>

<p>How does Versity S3 Gateway work? I encourage you to <a href="https://www.versity.com/products/versitygw/">visit the repo</a>, but I’ll borrow this image that shows a Versity S3 Gateway deployment in a ScoutFS environment:</p>

<p><img src="/assets/images/versity-s3-gateway.png" alt="Versity S3 Gateway architecture" /></p>

<p>This is expected to work the best, obviously, but other POSIX file systems can work as well. If you wanted to deploy it in a BeeGFS or XFS environment, that could work.</p>

<h2 id="test-contribute-and-be-patient">Test, contribute and be patient</h2>

<p>Versity S3 Gateway is very early in its development (alpha v0.2) and it has only some most basic features.</p>

<p>MinIO client couldn’t work (I used AWS S3 client instead).</p>

<p>When I PUT files only small (&lt; 100 MB) uploads completed, while larger had various multipart (even at 1 GB size) errors.</p>

<p>Sometimes errors would be inconsistent (one error after a try, another error on a retry).</p>

<p>Uploading a file via POSIX and trying to GET it via S3 didn’t work either. Server-side log:</p>

<pre><code class="language-raw">walk iso: get etag "8cr.pdf": xattr.get iso/8cr.pdf user.etag: no data available
05:42:41 | 200 |      0s |    192.168.1.13 | GET     | /~��c3�&amp;���#zƶ�n�i��8��#=�-��{L�w��8ѱ-4@��Y�U�
</code></pre>

<p>Basically the only thing that worked for me was PUT and GET for sub-100 MB files.</p>

<p>That seems bad if you’re looking to replace MinIO Enterprise Edition with something free, but if you have existing filesystem which you want to share to anonymous users via S3 in a read-only fashion (say, an ISO repository) that may be very close to all the features you need. Well, almost.</p>

<p>Versity seems to have some large users collaborating on this project, but the larger and more active the community becomes the faster its progress be. So give it a try and submit any bugs you find. Don’t miss the Versity S3 Gateway <a href="https://github.com/versity/versitygw/wiki">Wiki</a>!</p>

<h2 id="conclusion">Conclusion</h2>

<p>I have no doubt that ScoutFS integrations will work relatively better because that’s what paying customers use. But others should benefit from this S3 gateway project as well.</p>

<p>Within 2-3 quarters Versity S3 Gateway could be enough for several basic use cases and, being permissively licensed, it’s likely to fill some of the gap left by the end of MinIO Gateway.</p>

<p>It may take longer to address the more demanding use cases, but I wouldn’t even say that is the objective here.</p>

<p>My guess is for Versity the objective is to have a workable scale-out S3 gateway solution for ScoutFS customers. For folks with data on generic POSIX filesystems, the objective may be to identify use cases where Versity S3 Gateway works good enough.</p>

<p>There’s a scarcity of open source S3 gateways, so it would be valuable even if Versity S3 Gateway could satisfy 2-3 use cases with generic filesystems.</p>

      </article>
    </div>
    
      <div class="categories">
    <span><p>Categories:</p>
    
    
      <a href="
      /categories/#storage">storage</a>
       
    
  </span>
</div>
    

    
      <div class="related" data-pagefind-ignore>

    <h4>Possibly related - use live search at the top to find other content</h4>
    
    
    
    
    
    
    
        
        
    
        
    
        
          <div class = "related-posts">
          <h5><a href="/2024/05/04/netapp-solidfire-with-async-http.html">• Access NetApp SolidFire API with Async IO</a></h5>
          </div>
          
          
        
    
      
    
        
        
    
        
    
        
          <div class = "related-posts">
          <h5><a href="/2024/05/03/netapp-solidfire-collector-next.html">• Towards next SolidFire Collector (SFC)</a></h5>
          </div>
          
          
        
    
      
    
        
        
    
        
    
        
          <div class = "related-posts">
          <h5><a href="/2024/04/30/netapp-solidfire-account-attributes.html">• Tenant (account) attributes on NetApp SolidFire</a></h5>
          </div>
          
          
        
    
      
    
        
        
    
        
    
        
          <div class = "related-posts">
          <h5><a href="/2024/04/26/swagger-files-netapp-eseries-arrays.html">• Swagger files for NetApp E-Series</a></h5>
          </div>
          
          
        
    
      
    
        
        
    
        
    
        
          <div class = "related-posts">
          <h5><a href="/2024/04/25/openapi-swagger-for-netapp-solidfire.html">• OpenAPI and SolidFire</a></h5>
          </div>
          
          
            
    
    </div>

    

    
  </div><footer class= "footer">
    <p>2024-05-04 03:34 </p>
    <p>Copyright © 2024 scaleoutSean. Content is released under the CC BY license. Design: Alessio Franceschi</p>
</footer>

</body>
</html>
