<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>SolidFire management Web site and API endpoint behind a proxy | Acting Technologist</title>
<meta name="description" content="About accessing the Web UI and API via a proxy server">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="SolidFire management Web site and API endpoint behind a proxy">
<meta property="og:url" content="https://scaleoutsean.github.io/2023/07/31/solidfire-web-management-api-behind-proxy.html">


  <meta property="og:description" content="About accessing the Web UI and API via a proxy server">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="SolidFire management Web site and API endpoint behind a proxy">
  <meta name="twitter:description" content="About accessing the Web UI and API via a proxy server">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2023/07/31/solidfire-web-management-api-behind-proxy.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2023-07-31T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2023/07/31/solidfire-web-management-api-behind-proxy.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->


<meta name="bingbot" content="noindex,noarchive,nofollow">


  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="SolidFire management Web site and API endpoint behind a proxy">
    <meta itemprop="description" content="What works, and what doesn't, in terms of reverse proxying SolidFire management interfaces">
    <meta itemprop="datePublished" content="2023-07-31T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2023/07/31/solidfire-web-management-api-behind-proxy.html" itemprop="url">SolidFire management Web site and API endpoint behind a proxy
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-07-31T00:00:00+08:00">2023-07-31 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h2 id="introduction">Introduction</h2>

<p>Later (12.*) versions of SolidFire have this annoying authentication callback redirect which seems to prevent proper reverse proxying of the Web UI.</p>

<p>I haven't found a way to make HTTPS reverse proxy work for the Web UI.</p>

<h2 id="environment-and-problem-description">Environment and problem description</h2>

<ul>
  <li>Client: 192.168.1.13</li>
  <li>Proxy server: 192.168.1.137 (s137.datafabric.lan) with a route to 192.168.105.0/24 (management network)</li>
  <li>SolidFire MVIP: 192.168.105.32:443 (management network)</li>
</ul>

<p>When the Web UI is accessed directly, the first 302 redirection happens:</p>

<pre><code class="language-raw">https://192.168.105.32/auth/connect/authorize?
client_id=element-ui&amp;
redirect_uri=https%3A%2F%2F192.168.105.32%2Fcluster%2F%23%2Fauth-callback&amp;
response_type=code&amp;
scope=openid+profile+element_api&amp;
state=454b3859b0fd460fa87b9de3ffc1a5c2&amp;code_challenge=511gUL-IOYiG1E3GV-LIHSEWk1My1FgbRCyfTiBJpYk&amp;
code_challenge_method=S256
&amp;response_mode=query
</code></pre>

<p>Followed by the second:</p>

<pre><code class="language-raw">https://192.168.105.32/auth/api/2/account/login?
returnUrl=%2Fauth%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Delement-ui%26redirect_uri%3Dhttps%253A%252F%252F192.168.105.32%252Fcluster%252F%2523%252Fauth-callback%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520element_api%26state%3D454b3859b0fd460fa87b9de3ffc1a5c2%26code_challenge%3D511gUL-IOYiG1E3GV-LIHSEWk1My1FgbRCyfTiBJpYk%26code_challenge_method%3DS256%26response_mode%3Dquery
</code></pre>

<h2 id="reverse-proxy">Reverse proxy</h2>

<p>What works: API access which will use Basic Authentication header over TLS. To do this, simply configure NGINX or other reverse proxy to terminate TLS and proxy it to the SolidFire API endpoint(s) - mostly MVIP, but you could do node MIPs as well.</p>

<p>What doesn't work: Web management. A simple reverse proxy setup makes redirect URL lead to the internal (MVIP) address (unchanged from examples above) which obviously cannot work since MVIP isn't reachable by the Web client.</p>

<p>Even if the redirect links are manipulated to redirect the client to the proxy server's Public FQDN or IP, it doesn't seem to work without additional tricks which I couldn't figure out.</p>

<p><img src="/assets/images/solidfire-web-management-ui-reverse-forward-proxy-01.png" alt="Error on redirect" /></p>

<p>There are <a href="https://surepassid.atlassian.net/wiki/spaces/ProdDoc/pages/2292056065">complex</a> examples for OIDC reverse proxy configuration out there, but without access to the SolidFire API server's settings the risk of spending hours on this and then getting stuck because some SolidFire Web UI setting can't be changed seemed too high. So I haven't tried.</p>

<h2 id="transparent-proxy">Transparent proxy</h2>

<p>Instead, I tried Squid. Admittedly, Squid may not be fashionable and not many people use it, but it's still maintained and free.</p>

<p>If tightly guarded (IP ACLs, etc.), it may be okay to use it here. Or use some commercial software that does the same.</p>

<p>My proxy server was Rocky 8.8 so I installed squid-4.15-6.</p>

<p>The only thing I changed in default config was to change <code class="language-plaintext highlighter-rouge">acl localnet src 192.168.0.0/16</code> to <code class="language-plaintext highlighter-rouge">acl localnet src 192.168.1.0/24</code>, although <code class="language-plaintext highlighter-rouge">acl localnet src 192.168.1.13/32</code> would have also worked.</p>

<p>I could have limited IP access with firewalld, added authentication (see <a href="https://wiki.squid-cache.org/Features/Authentication">here</a>), and TLS proxying (<a href="https://support.kaspersky.com/KWTS/6.1/en-US/166244.htm">SSL Bump</a>) for additional security.</p>

<p>After that, I changed client browser's proxy settings for HTTP(S) to Squid's service IP and port.</p>

<p><img src="/assets/images/solidfire-web-management-ui-reverse-forward-proxy-02-firefox.png" alt="Configure HTTP(S) proxy in your browser" /></p>

<p>That worked.</p>

<p><img src="/assets/images/solidfire-web-management-ui-reverse-forward-proxy-03-squid.png" alt="Watch Squid log" /></p>

<p>Squid access log:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1690797272.717     61 192.168.1.13 TCP_TUNNEL/200 10562 CONNECT 192.168.105.32:443 - HIER_DIRECT/192.168.105.32 -
1690797272.739      0 192.168.1.13 NONE/000 0 NONE error:transaction-end-before-headers - HIER_NONE/- -
1690797272.739      0 192.168.1.13 NONE/000 0 NONE error:transaction-end-before-headers - HIER_NONE/- -
1690797272.739      0 192.168.1.13 TCP_TUNNEL/200 39 CONNECT 192.168.105.32:443 - HIER_DIRECT/192.168.105.32 -
1690797273.809    163 192.168.1.13 TCP_TUNNEL/200 6161 CONNECT 192.168.105.32:443 - HIER_DIRECT/192.168.105.32 -
1690797273.812    166 192.168.1.13 TCP_TUNNEL/200 4075 CONNECT 192.168.105.32:443 - HIER_DIRECT/192.168.105.32 -
1690797273.872     46 192.168.1.13 TCP_TUNNEL/200 5656 CONNECT 192.168.105.32:443 - HIER_DIRECT/192.168.105.32 -
1690797273.873    230 192.168.1.13 TCP_TUNNEL/200 7160 CONNECT 192.168.105.32:443 - HIER_DIRECT/192.168.105.32 -
1690797273.925     63 192.168.1.13 TCP_TUNNEL/200 3399 CONNECT 192.168.105.32:443 - HIER_DIRECT/192.168.105.32 -
</code></pre></div></div>

<p>So at least we know this works and can be improved to be reasonably secure.</p>

<h2 id="summary">Summary</h2>

<p>Reverse proxying of SolidFire Web management UI access is hard, if not impossible, to configure. It works for JSON-RPC API with Basic Authentication to the API IP endpoint.</p>

<p>A workaround for Web management UI is to use a properly guarded transparent HTTPS proxy.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/api" class="page__taxonomy-item p-category" rel="tag">api</a><span class="sep">, </span>
    
      <a href="/tags/api" class="page__taxonomy-item p-category" rel="tag">api</a><span class="sep">, </span>
    
      <a href="/tags/devops" class="page__taxonomy-item p-category" rel="tag">DevOps</a><span class="sep">, </span>
    
      <a href="/tags/forward-proxy" class="page__taxonomy-item p-category" rel="tag">forward proxy</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/nginx" class="page__taxonomy-item p-category" rel="tag">nginx</a><span class="sep">, </span>
    
      <a href="/tags/proxy" class="page__taxonomy-item p-category" rel="tag">proxy</a><span class="sep">, </span>
    
      <a href="/tags/reverse-proxy" class="page__taxonomy-item p-category" rel="tag">reverse proxy</a><span class="sep">, </span>
    
      <a href="/tags/squid" class="page__taxonomy-item p-category" rel="tag">squid</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/solidfire" class="page__taxonomy-item p-category" rel="tag">solidfire</a><span class="sep">, </span>
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2023-07-31T00:00:00+08:00">2023-07-31 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=SolidFire+management+Web+site+and+API+endpoint+behind+a+proxy%20https%3A%2F%2Fscaleoutsean.github.io%2F2023%2F07%2F31%2Fsolidfire-web-management-api-behind-proxy.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2023/07/31/solidfire-web-management-api-behind-proxy.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2023/07/28/thanos-with-minio-eseries-or-ontap-s3.html" class="pagination--pager" title="Thanos with StorageGRID, ONTAP S3 and MinIO on E-Series">Previous</a>
    
    
      <a href="/2023/08/01/fscrawler-filesystem-analytics-elasticsearch.html" class="pagination--pager" title="FSCrawler for basic filesystem analytics in Elasticsearch">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/04/sfc-solidfire-collector-v2-dot-1-dot-0.html" rel="permalink">SolidFire Collector v2.1.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-04T00:00:00+08:00">2025-09-04 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Stack complete and tagged
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/31/epa-version-3-dot-5.html" rel="permalink">EPA version 3.5.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-31T00:00:00+08:00">2025-08-31 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.5.0
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/27/epa-version-3-dot-4-dot-1.html" rel="permalink">EPA version 3.4.1
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-27T00:00:00+08:00">2025-08-27 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.4.1
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/24/epa-version-3-dot-4.html" rel="permalink">EPA version 3.4.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-24T00:00:00+08:00">2025-08-24 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.4.0
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
