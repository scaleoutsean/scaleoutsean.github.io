<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Burst on-premises BeeGFS/E-Series to Spot Ocean in the cloud | Acting Technologist</title>
<meta name="description" content="Make BeeGFS on E-Series data available to GPU-enabled Analytics and Deep Learning workfloads with Spot Ocean for Spark">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="Burst on-premises BeeGFS/E-Series to Spot Ocean in the cloud">
<meta property="og:url" content="https://scaleoutsean.github.io/2023/01/12/beegfs-eseries-hybrid-cloud-spot-ocean-spark.html">


  <meta property="og:description" content="Make BeeGFS on E-Series data available to GPU-enabled Analytics and Deep Learning workfloads with Spot Ocean for Spark">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="Burst on-premises BeeGFS/E-Series to Spot Ocean in the cloud">
  <meta name="twitter:description" content="Make BeeGFS on E-Series data available to GPU-enabled Analytics and Deep Learning workfloads with Spot Ocean for Spark">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2023/01/12/beegfs-eseries-hybrid-cloud-spot-ocean-spark.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2023-01-12T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2023/01/12/beegfs-eseries-hybrid-cloud-spot-ocean-spark.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Burst on-premises BeeGFS/E-Series to Spot Ocean in the cloud">
    <meta itemprop="description" content="Make BeeGFS on E-Series data available to GPU-enabled Analytics and Deep Learning workfloads with Spot Ocean for Spark">
    <meta itemprop="datePublished" content="2023-01-12T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2023/01/12/beegfs-eseries-hybrid-cloud-spot-ocean-spark.html" itemprop="url">Burst on-premises BeeGFS/E-Series to Spot Ocean in the cloud
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-01-12T00:00:00+08:00">2023-01-12 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <ul>
  <li><a href="#problem-statement">Problem statement</a></li>
  <li><a href="#data-replication">Data replication</a></li>
  <li><a href="#storage">Storage</a>
    <ul>
      <li><a href="#csi-drivers">CSI drivers</a></li>
    </ul>
  </li>
  <li><a href="#gpu-compute-nodes">GPU compute nodes</a></li>
  <li><a href="#performance-monitoring">Performance monitoring</a></li>
  <li><a href="#workflow">Workflow</a></li>
</ul>

<h2 id="problem-statement">Problem statement</h2>

<p>Enterprises with analytics, HPC and Deep Learning workloads that have high-bandwidth storage requirements use BeeGFS with NetApp E-Series.</p>

<p>For various reasons they may need to burst-to-cloud. Some of the main challenges in this process:</p>

<ul>
  <li>Data replication from on-premises BeeGFS to the cloud</li>
  <li>Storage performance in the cloud</li>
  <li>Cost of compute resources in the cloud</li>
</ul>

<h2 id="data-replication">Data replication</h2>

<p>For obvious resons (granularity) in this use case file and object replication are generally a better choice than volume replication.</p>

<p>To copy BeeGFS files to the cloud you may use a file sync tool of your choice: rsync, rclone, etc.</p>

<p>Alternatively, NetApp has a subscription (charged per hour) service called <a href="https://docs.netapp.com/us-en/cloud-manager-sync/concept-cloud-sync.html">Cloud Sync</a>.</p>

<p>I wrote about various ways to sync files and objects <a href="/2022/01/28/storagegrid-hybrid-cloud-processing-without-data-at-rest.html">here</a>. If you use Cloud Sync, automation is availble via the <a href="/2022/01/17/using-netapp-cloudsync-api.html">Cloud Sync API</a>.</p>

<p>Data replication <em>from</em> the cloud to on-premises is usually not a problem because we're talking just about the results (few KB to few GB, perhaps). To avoid having to open enterprise firewall to incoming connections (or - even worse - use VPN), simply post your results to the cloud provider's Object Store and download them from there using Cloud Sync or rclone.</p>

<h2 id="storage">Storage</h2>

<p>For Big Data anlaytics and DL/ML workloads it usually pays to use fast storage because that saves compute costs. Cloud GPUs aren't extactly cheap, so if you use BeeGFS on-premises, you likely want to use it in the public cloud for similar workloads.</p>

<p>The creators of BeeGFS, ThinkParQ, have created BeeOND, a subscription service that's based on BeeGFS running on hyperscaler hardware. Back in 2019 it was possible to get close to 100 GiB/s from such clusters (see <a href="https://techcommunity.microsoft.com/t5/azure-high-performance-computing/tuning-beegfs-and-beeond-on-azure-for-specific-i-o-patterns/ba-p/1015446">this example</a> from Azure).</p>

<p>Compared to ONTAP-based cloud storage, BeeOND is limited in terms of data management features: backup, snapshots, etc. If you need to protect your cloud data before BeeOND subscription is terminated, make a copy in the hyperscaler's Object Storage.</p>

<h3 id="csi-drivers">CSI drivers</h3>

<ul>
  <li><a href="/2022/04/09/beegfs-csi-introduction.html">BeeGFS CSI</a> for BeeOND</li>
  <li><a href="/2022/04/09/beegfs-csi-introduction.html">NetApp Astra Trident CSI</a> for ONTAP-based cloud storage</li>
</ul>

<p>In the case you'd like to use both at the same time - that is BeeOND and for example Cloud Volumes ONTAP - that is possible. You can see how both are used in the same Kubernetes cluster in <a href="/2022/04/09/beegfs-csi-introduction.html#options-in-a-mixed-environment">this post</a>.</p>

<p>Why would we want to do that? Maybe you have cloud data that needs to be kept in the cloud between workloads and CVO is good for that. Then, when you need to run compute jobs, you can use DataOps Toolkit to <a href="/2022/01/28/storagegrid-hybrid-cloud-processing-without-data-at-rest.html#netapp-dataops-toolkit">copy data from CVO to BeeGFS (and back)</a>.</p>

<p>It is also possible to use multiple PVCs at the same time - read data from CVO and stage it to BeeOND, and write the result to a CVO volume.</p>

<h2 id="gpu-compute-nodes">GPU compute nodes</h2>

<p>We want to avoid unnecessary cost of GPU compute resources.</p>

<p>To do that we can use a <a href="https://spot.io">Spot.io</a> service called <a href="https://spot.io/products/ocean-apache-spark/">Spot Ocean for Spark</a>.</p>

<p><img src="/assets/images/spot-ocean-for-spark.png" alt="Spot Ocen for Spark" /></p>

<p>Spot doesn't seem to build GPU clusters from scratch, but Spot allows you to <a href="https://docs.spot.io/ocean-spark/getting-started/create-cluster?id=import-an-existing-kubernetes-cluster-to-ocean-spark">import existing clusters to Spot</a> and let Spot control and manage them.</p>

<p>This means we can build a cluster with GPU-based worker nodes and tell Spot Ocean for Spark to use it.</p>

<p>The next question is whether containers used by Spot Ocean for Spark have CUDA? Spot Ocean Spark uses its own images. Or, to be perfectly correct, containers based on its <strong>base</strong> images (this distinction will come useful shortly).</p>

<p>At the time of writing this post, the images don't seem to have CUDA libraries in them. Because we don't have to use Spot images and can use custom Docker images <strong>based on</strong> Spot's base images, we can easily start with those and create custom containers with CUDA drivers and libraries.</p>

<p>Here you can find <a href="https://docs.spot.io/ocean-spark/configure-spark-apps/package-spark-code">information about the official Spark official images</a> which can be used as base, and <a href="https://console.cloud.google.com/gcr/images/datamechanics/GLOBAL/spark?tag=platform">here is the list</a> of images.</p>

<h2 id="performance-monitoring">Performance monitoring</h2>

<p>For short-lived clusters I'd probably use hyperscaler's monitoring and CLI tools built into BeeGFS. Why?</p>

<ul>
  <li>Cost optimization is done by Spot</li>
  <li>Cluster will be deleted anyway</li>
</ul>

<p>Alternatively, <a href="https://github.com/NetApp/eseries-perf-analyzer-plugin-beegfs">BeeGFS monitoring plugin</a> for Grafana which can run on-premises or be the free Grafana Cloud - both would connect to a small, cloud-based, long-running InfluxDB container that could be left running in the case bursting to cloud happens frequently enough.</p>

<h2 id="workflow">Workflow</h2>

<p>The entire workflow would look like this:</p>

<ul>
  <li>Preparation
    <ul>
      <li>Build images with CUDA version recommended by hyperscaler, and store them in private registry</li>
    </ul>
  </li>
  <li>Replication
    <ul>
      <li>Stand-up minimal BeeOND cluster</li>
      <li>Replicate data to BeeOND (or CVO/ANF/FSxN, if you want to use it alongside BeeOND)</li>
    </ul>
  </li>
  <li>Compute
    <ul>
      <li>Grow BeeOND cluster to enough nodes</li>
      <li>Stand up a Kubernetes cluster with GPU-based nodes and deploy BeeGFS CSI (and Trident, if required)</li>
      <li>Import the cluster to Spot Ocean for Spark</li>
      <li>Run Spark and other workloads</li>
    </ul>
  </li>
  <li>Terminate temporary environment
    <ul>
      <li>Copy results to Object Storage, or CVO/FSxN, or back to on-premises</li>
      <li>Scale down to zero or destroy Kubernetes cluster</li>
      <li>Destroy BeeGFS cluster</li>
    </ul>
  </li>
</ul>

<p>Users who burst to the cloud often could scale up and down rather than re-create clusters every time.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/analytics" class="page__taxonomy-item p-category" rel="tag">analytics</a><span class="sep">, </span>
    
      <a href="/tags/beegfs" class="page__taxonomy-item p-category" rel="tag">beegfs</a><span class="sep">, </span>
    
      <a href="/tags/e-series" class="page__taxonomy-item p-category" rel="tag">e-series</a><span class="sep">, </span>
    
      <a href="/tags/eseries" class="page__taxonomy-item p-category" rel="tag">eseries</a><span class="sep">, </span>
    
      <a href="/tags/hybrid-cloud" class="page__taxonomy-item p-category" rel="tag">hybrid cloud</a><span class="sep">, </span>
    
      <a href="/tags/instaclustr" class="page__taxonomy-item p-category" rel="tag">instaclustr</a><span class="sep">, </span>
    
      <a href="/tags/spot" class="page__taxonomy-item p-category" rel="tag">spot</a><span class="sep">, </span>
    
      <a href="/tags/spot-io" class="page__taxonomy-item p-category" rel="tag">spot.io</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/cloud" class="page__taxonomy-item p-category" rel="tag">cloud</a><span class="sep">, </span>
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2023-01-12T00:00:00+08:00">2023-01-12 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=Burst+on-premises+BeeGFS%2FE-Series+to+Spot+Ocean+in+the+cloud%20https%3A%2F%2Fscaleoutsean.github.io%2F2023%2F01%2F12%2Fbeegfs-eseries-hybrid-cloud-spot-ocean-spark.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2023/01/12/beegfs-eseries-hybrid-cloud-spot-ocean-spark.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2023/01/08/eseries-flash-ssd-wear-level-monitoring.html" class="pagination--pager" title="Monitor wear level of NetApp E-Series SSDs with API and CLI">Previous</a>
    
    
      <a href="/2023/01/14/eseries-performance-analyzer-container-orchestrator-kubernetes.html" class="pagination--pager" title="NetApp E-Series Performance Analyzer in container environments">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/12/beegfs-nfs-s3-for-dev-test-edu-edge.html" rel="permalink">Containerized BeeGFS with NFSv4 and S3
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-12T00:00:00+08:00">2025-09-12 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          7 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Revisiting that old idea for All-in-One BeeGFS stack
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/08/solidfire-wac-gateway-client-powershell.html" rel="permalink">SolidFire WAC Gateway Client (PowerShell)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-08T00:00:00+08:00">2025-09-08 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">About that thing that should have been done in 2016
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/04/sfc-solidfire-collector-v2-dot-1-dot-0.html" rel="permalink">SolidFire Collector v2.1.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-04T00:00:00+08:00">2025-09-04 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Stack complete and tagged
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/31/epa-version-3-dot-5.html" rel="permalink">EPA version 3.5.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-31T00:00:00+08:00">2025-08-31 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.5.0
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
