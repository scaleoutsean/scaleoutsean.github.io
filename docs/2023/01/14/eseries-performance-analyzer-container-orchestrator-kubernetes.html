<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>NetApp E-Series Performance Analyzer in container environments | Acting Technologist</title>
<meta name="description" content="Deploy and run E-Series Performance Analyzer on Kubernetes and Hashicorp Nomad">


  <meta name="author" content="scaleoutSean">
  
  <meta property="article:author" content="scaleoutSean">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Acting Technologist">
<meta property="og:title" content="NetApp E-Series Performance Analyzer in container environments">
<meta property="og:url" content="https://scaleoutsean.github.io/2023/01/14/eseries-performance-analyzer-container-orchestrator-kubernetes.html">


  <meta property="og:description" content="Deploy and run E-Series Performance Analyzer on Kubernetes and Hashicorp Nomad">





  <meta name="twitter:site" content="@scaleoutSean">
  <meta name="twitter:title" content="NetApp E-Series Performance Analyzer in container environments">
  <meta name="twitter:description" content="Deploy and run E-Series Performance Analyzer on Kubernetes and Hashicorp Nomad">
  <meta name="twitter:url" content="https://scaleoutsean.github.io/2023/01/14/eseries-performance-analyzer-container-orchestrator-kubernetes.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2023-01-14T00:00:00+08:00">






<link rel="canonical" href="https://scaleoutsean.github.io/2023/01/14/eseries-performance-analyzer-container-orchestrator-kubernetes.html">







  <meta name="google-site-verification" content="F6q7vIwQ2G0j8tk-KL9rAXOMLXMDMMUkEz4fRs1Nnnc" />


  <meta name="msvalidate.01" content="7cf5b7d96a77410a8ad035f764dc81b3">





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Acting Technologist Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<script src="https://cdn.counter.dev/script.js" data-id="83dc700a-b821-4e57-9425-02b8336a9456" data-utcoffset="0"></script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">


  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/scaleoutsean-acting-technologist.png" alt="Acting Technologist"></a>
        
        <a class="site-title" href="/">
          Acting Technologist
          <span class="site-subtitle">human action through technology</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/archive/"
                
                
              >Archive</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects.html"
                
                
              >Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="NetApp E-Series Performance Analyzer in container environments">
    <meta itemprop="description" content="Deploy and run E-Series Performance Analyzer on Kubernetes and Hashicorp Nomad">
    <meta itemprop="datePublished" content="2023-01-14T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://scaleoutsean.github.io/2023/01/14/eseries-performance-analyzer-container-orchestrator-kubernetes.html" itemprop="url">NetApp E-Series Performance Analyzer in container environments
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-01-14T00:00:00+08:00">2023-01-14 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h2 id="epa-on-kubernetes-and-nomad-is-here">EPA on Kubernetes and Nomad is here</h2>

<p>It took some time to find the timeâ€¦ But it's almost ready now: in EPA 3.1.0, E-Series metrics collector is completely disentangled from InfluxDB management and operation, and can run on its own (in a shell, Docker, Kubernetes, Nomad).</p>

<p>I'm still working on instructions for Kubernetes, but exiting EPA 3.1.0 can be deployed to Kubernetes or Nomad today because the containers are already ready and work without any changes.</p>

<p>The disentangled EPA looks like this:</p>

<p><img src="/assets/images/epa-eseries-perf-analyzer.png" alt="EPA Diagram" /></p>

<p>dbmanager only pushes a list of array names to InfluxDB. It does not connect to E-Series, or have any other details about the storage.</p>

<p>The E-Series admin just needs to have their array name added to dbmanager config, and their collector IP or FQDN added to the list of IPs allowed to access InfluxDB 8086/tcp. Array details, including credentials, do not need to be shared with the Influx or Grafana administrator(s).</p>

<p>Because collector does not need to use storage admin credentials, SANtricity admin credentials can be rotated without changing collector configuration.</p>

<p>In this example we have:</p>

<ul>
  <li>one Grafana instance</li>
  <li>one InfluxDB instance</li>
  <li>one dbmanager periodically pushing list of array names to InfluxDB</li>
  <li>two collectors gathering metrics for two E-Series arrays</li>
</ul>

<p><img src="/assets/images/epa-eseries-perf-analyzer-kubernetes-nomad.png" alt="EPA in action on Kubernetes 1.25" /></p>

<p>This test was done on the (currently) latest Minikube on Rocky Linux 9.</p>

<h3 id="kubernetes">Kubernetes</h3>

<p>Once detailed Kubernetes instructions are ready, version 3.2.0 will be released. Until then you can build and deploy containers to Kubernetes on your own.</p>

<h3 id="nomad">Nomad</h3>

<p>I won't delay 3.2.0 until detailed instructions for Nomad are ready. Why?</p>

<p>Because they aren't necessary. Nomad is easy to use, and for collector it's even more suitable than Kubernetes (because it's easier to use and has all the features collector needs) or Docker Compose (I say this because it has HA features which Docker Compose does not).</p>

<h2 id="whats-next-for-epa">What's next for EPA</h2>

<p>Version 3 seems now complete to me. The code I added for SSD Wear Level shows I'm not a Python expert and could be moved to its own function, but other than that I don't see much wrong with it. "Folder"-related stuff from the time WSP was used was completely removed from collector, and I think having another container (dbmanager) is a nice approach to create InfluxDB folders and serve as the location for generic "database manager" features if new back-ends are added.</p>

<p>I've no plans for the future. It depends what I find intresting in course of my work: if I see opportunities to add something valuable, I'll try.</p>

<p>Objectively speaking, it would be helpful to upgrade InfluxDB to v2, which means changes in collector, and Grafana queries and dashboards would have to be done from scratch.</p>

<p>I don't want to create and maintain Grafana dashboards - I think that should be done by the users - so I'm considering adding another DB back-end so that InfluxDB v1 remains in place, but another DB gets added as an option.</p>

<p>As far as database back-ends for EPA are concerned InfluxDB v1 is good enough, so I'm entertaining the possibility of adding Elasticsearch. The reason is I don't need a better database for EPA data (than InfluxDB), but I'd like to have the option to search for <a href="/2022/12/13/eseries-santricity-mel-forwarding.html">E-Series failures and events</a>, and use Kibana as the UI for that.</p>

<p>And not only that:</p>

<ul>
  <li>In BeeGFS with E-Series environments, Elasticsearch could also collect (and corelate) logs for OS and BeeGFS</li>
  <li>Environments without DB admins could send data to Elastic Cloud and maybe even Instaclustr's OpenSearch</li>
</ul>

<p>The challenge for the second item is OpenSearch and Elasticsearch APIs have been diverging. Personally, I prefer Elasticsearch, but OpenSearch users are welcome to submit pull requests at any time. Ideally I'd like to have the option of back-end selection (InfluxDB, OpenSearch/Elasticsearch, or both) in collector, and dbmanager would contain the code that interfaces with OpenSearch/Elasticsearch.</p>

<p>As of EPA 3.1.0 InfluxDB management is still done in collector because it makes no (significant) difference - the only disadvantage is that any of the collector users can destroy (drop) the InfluxDB, but an assumption EPA inherited from upstream is that all collectors are implicitly trusted. If another back-end becomes available I'd like to have DB-management code moved to dbmanager.</p>

<p>I am not going to improve that in version 3 because InfluxDB data isn't mission-critical, and it's not the only thing that needs to be improved security-wise: there's also a matter of RBAC (dbmanager vs. collector), read (Grafana) and write (collector, dbmanager) separation, TLS certificates, and more. None of that is currently taken care of by default (users may create additional, read-only InfluxDB account for Grafana and such and my Kubernetes notes show how).</p>

<p>But any new back-end should be reasonably secure by default from day one.</p>

<h2 id="resources">Resources</h2>

<ul>
  <li>Download <a href="https://github.com/scaleoutsean/eseries-perf-analyzer/releases/tag/v3.2.0">EPA v3.2.0</a></li>
  <li>Demo of deploying and configuring <a href="https://rumble.com/v28mh6w-netapp-e-series-performance-analyzer-epa-v3.2.0-for-kubernetes.html">EPA v3.2.0 on Kubernetes</a> (4m44s)</li>
  <li>Demo of deploying and configuring <a href="https://rumble.com/v25nep8-e-series-performance-analyzer-3.1.0-on-kubernetes.html">EPA v3.1.0 on Kubernetes</a> (3m16s)</li>
  <li><a href="https://github.com/scaleoutsean/eseries-perf-analyzer">E-Series Performance Analyzer</a> on Github</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/e-series" class="page__taxonomy-item p-category" rel="tag">e-series</a><span class="sep">, </span>
    
      <a href="/tags/epa" class="page__taxonomy-item p-category" rel="tag">epa</a><span class="sep">, </span>
    
      <a href="/tags/eseries" class="page__taxonomy-item p-category" rel="tag">eseries</a><span class="sep">, </span>
    
      <a href="/tags/grafana" class="page__taxonomy-item p-category" rel="tag">grafana</a><span class="sep">, </span>
    
      <a href="/tags/influxdb" class="page__taxonomy-item p-category" rel="tag">influxdb</a><span class="sep">, </span>
    
      <a href="/tags/kubernetes" class="page__taxonomy-item p-category" rel="tag">kubernetes</a><span class="sep">, </span>
    
      <a href="/tags/monitoring" class="page__taxonomy-item p-category" rel="tag">monitoring</a><span class="sep">, </span>
    
      <a href="/tags/netapp" class="page__taxonomy-item p-category" rel="tag">netapp</a><span class="sep">, </span>
    
      <a href="/tags/nomad" class="page__taxonomy-item p-category" rel="tag">nomad</a><span class="sep">, </span>
    
      <a href="/tags/python" class="page__taxonomy-item p-category" rel="tag">python</a><span class="sep">, </span>
    
      <a href="/tags/visualization" class="page__taxonomy-item p-category" rel="tag">visualization</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/containers" class="page__taxonomy-item p-category" rel="tag">containers</a><span class="sep">, </span>
    
      <a href="/categories/storage" class="page__taxonomy-item p-category" rel="tag">storage</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2023-01-14T00:00:00+08:00">2023-01-14 00:00</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=scaleoutSean&text=NetApp+E-Series+Performance+Analyzer+in+container+environments%20https%3A%2F%2Fscaleoutsean.github.io%2F2023%2F01%2F14%2Feseries-performance-analyzer-container-orchestrator-kubernetes.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://scaleoutsean.github.io/2023/01/14/eseries-performance-analyzer-container-orchestrator-kubernetes.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

</section>


      
  <nav class="pagination">
    
      <a href="/2023/01/12/beegfs-eseries-hybrid-cloud-spot-ocean-spark.html" class="pagination--pager" title="Burst on-premises BeeGFS/E-Series to Spot Ocean in the cloud">Previous</a>
    
    
      <a href="/2023/01/17/automation-with-powershell-server.html" class="pagination--pager" title="Like Flask, but with PowerShell">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/09/04/sfc-solidfire-collector-v2-dot-1-dot-0.html" rel="permalink">SolidFire Collector v2.1.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-09-04T00:00:00+08:00">2025-09-04 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Stack complete and tagged
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/31/epa-version-3-dot-5.html" rel="permalink">EPA version 3.5.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-31T00:00:00+08:00">2025-08-31 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.5.0
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/27/epa-version-3-dot-4-dot-1.html" rel="permalink">EPA version 3.4.1
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-27T00:00:00+08:00">2025-08-27 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.4.1
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/08/24/epa-version-3-dot-4.html" rel="permalink">EPA version 3.4.0
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-24T00:00:00+08:00">2025-08-24 00:00</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">What's new in EPA v3.4.0
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/scaleoutsean" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2020-2025 scaleoutSean.github.io | <a href="https://scaleoutsean.github.io">Acting Technologist</a> | Terms: <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC BY 4.0</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
